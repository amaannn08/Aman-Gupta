;/*FB_PKG_DELIM*/

__d("JSResource",["JSResourceReferenceImpl"],(function(a,b,c,d,e,f,g){var h={};function i(a,b){h[a]=b}function j(a){return h[a]}function a(a){a=a;var b=j(a);if(b)return b;b=new(c("JSResourceReferenceImpl"))(a);i(a,b);return b}a.loadAll=c("JSResourceReferenceImpl").loadAll;g["default"]=a}),98);
__d("JSResourceForInteraction",["JSResource"],(function(a,b,c,d,e,f,g){function a(a){return c("JSResource").call(null,a)}b=a;g["default"]=b}),98);
__d("WAAckLevel",[],(function(a,b,c,d,e,f){"use strict";a={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};f.ACK=a}),66);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){if(typeof a!=="number"){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"])),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string'])),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits'])),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAXmlParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.parser=a,this.reason=b}var b=a.prototype;b.toString=function(){return"XmlParsingFailure: "+this.parser+": "+this.reason};return a}();f.XmlParsingFailure=a}),66);
__d("WAParsableXmlNode",["WAHasProperty","WAXmlParsingFailure","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var c=this;this.$1=a;this.$2=b;this.$3=Array.isArray(b.content)?b.content.map(function(b){return new c.constructor(a,b)}):null}var b=a.prototype;b.name=function(){return this.$1};b.node=function(){return this.$2};b.hasAttr=function(a){return c("WAHasProperty")(this.$2.attrs,a)};b.assertTag=function(a){this.$2.tag!==a&&this["throw"]("to be <"+a+">")};b.tag=function(){return this.$2.tag};b.maybeChild=function(a){var b=this.$3;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].tag()===a)return b[c];return null};b.hasChild=function(a){return!!this.maybeChild(a)};b.child=function(a){var b=this.maybeChild(a);return!b?this["throw"]("to have child <"+a+">"):b};b.assertAttr=function(a,b){var c=this.attrString(a);c!==b&&this["throw"]('to have "'+a+'"="'+b+'", but instead has "'+c+'"')};b.attrString=function(a){return!c("WAHasProperty")(this.$2.attrs,a)?this["throw"]('to have attribute "'+a+'"'):this.decodeAsString(this.$2.attrs[a])};b.forEachAttributeKey=function(a){var b=this.$2.attrs;Object.keys(b).forEach(function(b){return a(b)})};b.maybeAttrString=function(a){return this.hasAttr(a)?this.decodeAsString(this.$2.attrs[a]):null};b.maybeAttrInt=function(a,b,c){return this.hasAttr(a)?this.attrInt(a,b,c):null};b.attrEnumValues=function(a,b,c){b=new Set(b);var d=this.attrString(a);if(!b.has(d)){if(c!=null)return c;c=Array.from(b).join("|");return this["throw"]('to have "'+a+'"={'+c+'} but has value "'+d+'"')}return d};b.attrEnum=function(a,b){var d=this.attrString(a);if(!c("WAHasProperty")(b,d)){var e=Object.keys(b).join("|");return this["throw"]('to have "'+a+'"={'+e+'} but has value "'+d+'"')}return b[d]};b.attrEnumOrNullIfUnknown=function(a,b){a=this.attrString(a);return!c("WAHasProperty")(b,a)?null:b[a]};b.attrEnumOrDefault=function(a,b,c){return this.hasAttr(a)?this.attrEnum(a,b):c};b.attrInt=function(a,b,c){var d=this.attrString(a);return this.$4(d,a,b,c)};b.$4=function(a,b,c,d){var e=parseInt(a,10);if(Number.isNaN(e))return this["throw"]('to have "'+b+'"={integer} but has value "'+a+'"');else if(c!==void 0&&e<c)return this["throw"]('to have "'+b+'"={at least '+c+"} but has value "+e);else if(d!==void 0&&e>=d)return this["throw"]('to have "'+b+'"={below '+d+"} but has value "+e);return e};b.forEachChild=function(a){var b=this.$3;if(b)b.forEach(function(b){return a(b)});else if(this.$2.content!=null)return this["throw"]("to have children")};b.forEachChildWithTag=function(a,b){this.forEachChild(function(c){c.tag()===a&&b(c)})};b.mapChildren=function(a){var b=this.$3;return!b&&this.$2.content!=null?this["throw"]("to have children"):b?b.map(function(b){return a(b)}):[]};b.mapChildrenWithTag=function(a,b){var c=this.$3;return!c&&this.$2.content!=null?this["throw"]("to have children"):c?c.filter(function(b){return b.tag()===a}).map(function(a){return b(a)}):[]};b.mapFirstChild=function(a){var b=this.$3;return!b||b.length===0?this["throw"]("to have children"):a(b[0])};b.hasContent=function(){return!this.$3&&!!this.$2.content};b.hasChildren=function(){return this.$3!=null};b.getChildren=function(){return this.$3};b.mapAttrKeys=function(a){var b=this.getAttrKeys();return b&&b.length?b.map(a):[]};b.getAttrKeys=function(){return Object.keys(this.$2.attrs)};b.hasAttrs=function(){var a=this.$2.attrs?Object.keys(this.$2.attrs):[];return a.length>0};b.getNode=function(){return this.$2};b.unsafeSetChildren=function(a){this.$3=a};b.unsafeSetNodeContent=function(a){this.$2.content=a};b.contentUint=function(a){var b=this.contentBytes(a);return h(b,a)};b.contentBytes=function(a){a===void 0&&(a=-1);if(this.$3)return this["throw"]("to have binary content, but has children instead");else if(this.$2.content!=null){var b=this.$2.content;return a!==-1&&b.length!==a?this["throw"]("to be "+a+" bytes, but got "+b.length+" instead"):b}else return this["throw"]("to have content")};b.contentString=function(){if(this.$3)return this["throw"]("to have string content, but has children instead");else if(this.$2.content!=null)return this.$2.content;else return this["throw"]("to have content")};b.contentInt=function(a,b){var c=this.contentString();return this.$4(c,"content",a,b)};b.contentEnum=function(a){var b=this.contentString();if(!c("WAHasProperty")(a,b)){var d=Object.keys(a).join("|");return this["throw"]("to have content {"+d+'} but has value "'+b+'"')}return a[b]};b.decodeAsString=function(a){if(typeof a!=="string")throw c("err")("decodeAsString: attribute is "+typeof a+" not a string: "+a);return a};b["throw"]=function(a){throw new(d("WAXmlParsingFailure").XmlParsingFailure)(this.$1,"expected <"+this.$2.tag+"> "+a)};b.toString=function(){return this.$2.toString()};return a}();function h(a,b){var c=0;for(var d=0;d<b;d++)c=c*256+a[d];return c}g.ParsableXmlNode=a;g.convertBytesToUint=h}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";b={scalarbase:(a=d("tweetnacl")).lowlevel.scalarbase,crypto_hash:a.lowlevel.crypto_hash,modL:a.lowlevel.modL,pack25519:a.lowlevel.pack25519,S:a.lowlevel.S,M:a.lowlevel.M,A:a.lowlevel.A,Z:a.lowlevel.Z,D:a.lowlevel.D,unpack25519:a.lowlevel.unpack25519,pow2523:a.lowlevel.pow2523,crypto_verify_32:a.lowlevel.crypto_verify_32,set25519:a.lowlevel.set25519,add:a.lowlevel.add,scalarmult:a.lowlevel.scalarmult};g.hash=a.hash;g.scalarMult=a.scalarMult;g.verify=a.verify;g.lowlevel=b;g.keypairFromSecretKey=a.box.keyPair.fromSecretKey;g.keyPair=a.box.keyPair;g.signDetachedVerify=a.sign.detached.verify}),98);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,(d=d("WAProtoConst")).TYPES.UINT32],localIdentityPublic:[2,d.TYPES.BYTES],remoteIdentityPublic:[3,d.TYPES.BYTES],rootKey:[4,d.TYPES.BYTES],previousCounter:[5,d.TYPES.UINT32],senderChain:[6,d.TYPES.MESSAGE,e],receiverChains:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],pendingKeyExchange:[8,d.TYPES.MESSAGE,c],pendingPreKey:[9,d.TYPES.MESSAGE,b],remoteRegistrationId:[10,d.TYPES.UINT32],localRegistrationId:[11,d.TYPES.UINT32],needsRefresh:[12,d.TYPES.BOOL],aliceBaseKey:[13,d.TYPES.BYTES]};b.internalSpec={preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[3,d.TYPES.INT32],baseKey:[2,d.TYPES.BYTES]};c.internalSpec={sequence:[1,d.TYPES.UINT32],localBaseKey:[2,d.TYPES.BYTES],localBaseKeyPrivate:[3,d.TYPES.BYTES],localRatchetKey:[4,d.TYPES.BYTES],localRatchetKeyPrivate:[5,d.TYPES.BYTES],localIdentityKey:[7,d.TYPES.BYTES],localIdentityKeyPrivate:[8,d.TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d.TYPES.BYTES],senderRatchetKeyPrivate:[2,d.TYPES.BYTES],chainKey:[3,d.TYPES.MESSAGE,h],messageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f]};f.internalSpec={index:[1,d.TYPES.UINT32],cipherKey:[2,d.TYPES.BYTES],macKey:[3,d.TYPES.BYTES],iv:[4,d.TYPES.BYTES]};h.internalSpec={index:[1,d.TYPES.UINT32],key:[2,d.TYPES.BYTES]};i.internalSpec={currentSession:[1,d.TYPES.MESSAGE,a],previousSessions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,a]};j.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES]};k.internalSpec={id:[1,d.TYPES.UINT32],publicKey:[2,d.TYPES.BYTES],privateKey:[3,d.TYPES.BYTES],signature:[4,d.TYPES.BYTES],timestamp:[5,d.TYPES.FIXED64]};l.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d.TYPES.UINT32],senderChainKey:[2,d.TYPES.MESSAGE,p],senderSigningKey:[3,d.TYPES.MESSAGE,n],senderMessageKeys:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,o]};n.internalSpec={"public":[1,d.TYPES.BYTES],"private":[2,d.TYPES.BYTES]};o.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};p.internalSpec={iteration:[1,d.TYPES.UINT32],seed:[2,d.TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.SessionStructure$PendingPreKeySpec=b;g.SessionStructure$PendingKeyExchangeSpec=c;g.SessionStructure$ChainSpec=e;g.SessionStructure$Chain$MessageKeySpec=f;g.SessionStructure$Chain$ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderKeyStateStructure$SenderSigningKeySpec=n;g.SenderKeyStateStructure$SenderMessageKeySpec=o;g.SenderKeyStateStructure$SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function j(a,e,f){if(f<0||f>i)return(h||(h=b("Promise"))).reject(c("err")("HKDF::expand given bad length "+f));var g,j=Math.ceil(f/d("WACryptoHmac").SHA256_BYTE_LENGTH),k=d("WABinary").Binary.build(e).readByteArrayView(),l=new(d("WABinary").Binary)(),m=d("WACryptoHmac").encodeKeySha256(a).then(function(a){g=a;return new Uint8Array(0)});e=function(a){m=m.then(function(b){return d("WACryptoHmac").sign(g,d("WABinary").Binary.build(b,k,a).readByteArrayView())}).then(function(a){a=new Uint8Array(a);l.writeByteArray(a);return a})};for(a=1;a<=j;a++)e(a);return m.then(function(){return l.readBuffer(f)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return j(new Uint8Array(a),b,c)})}function e(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return j(new Uint8Array(a),c,e)})}g.expand=j;g.extractAndExpand=a;g.extractWithSaltAndExpand=e}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function b(a,b){var c=new TextDecoder();return c.decode(a).toLowerCase()===c.decode(b).toLowerCase()}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function f(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function i(a){if(a!==(a|0))throw c("err")("bound must be int32");if(a<=0)throw c("err")("bound must not be positive");var b=new Int32Array(1),e=-1>>>1;e=a*Math.floor(e/a);var f=-1;while(f===-1){d("WACryptoDependencies").getCrypto().getRandomValues(b);var g=b[0]>>>1;g<e&&(f=g%a)}return f}g.arrayBuffersEqual=a;g.arrayBuffersEqualCaseInsensitive=b;g.uint8ArraysEqual=h;g.rawKeysEqual=e;g.serializedPubKeysEqual=f;g.randomNumberLessThan=i}),98);
__d("WABaseProto",[],(function(a,b,c,d,e,f){"use strict";a="__tu";f.TAGGED_UNION_TAG=a}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];var p=o[1],q=o[0];g.push(q);j.push(p);if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){q=o[2];if(typeof q.cast==="function")f[m]=q;else{var r=!0,s=0;for(var t in q)r&&t!==s++&&(r=!1);t=void 0;if(r){t=[];for(r=0;r<s;r++)t.push(!0)}else{t={};for(r in q)t[q[r]]=!0}f[m]=t}}else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP){if(o.length!==3)throw new Error("Map field "+n+" should have exactly three elements in its internalSpec");f[m]=o[2]}else f[m]=null}var u={};s=function(a){l[a].forEach(function(b){u[b]||(u[b]=[]),u[b].push(a)})};for(r in l)s(r);q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];t=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];p=new h(e,g,j,k,f,l,u,q,t);a.internalCompiledSpec=p;return p}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else if(a===d("WAProtoConst").TYPES.MAP)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long'])),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int'])),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range'])),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""])),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,h=b.oneofToFields,i=b.fieldToOneof,j=b.reservedTags,k=b.reservedFields,m=void 0;b=function(){var b=c[o],n=f[o],p=a[b],q=n&d("WAProtoConst").TYPE_MASK,r=t[q],u=(n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP;if(r===void 0&&!u)throw new Error("Can not find the validator for type "+q);if(n&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array'])),s(p)).color("red"),m={path:[b],error:"repeated field must be array"};else{q=g[o];for(n=0;n<p.length&&!m;n++)m=r(p[n],q),m&&m.path.push(b+"["+n+"]")}else if(u&&p!=null){n=g[o];q=n[0];u=n[1];n=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u;var v=t[q],w=t[n];if(v===void 0||w===void 0)throw new Error("Can not find the validator for Map with key type "+q+", value type "+n);for(n of p){var x=n[0],y=n[1];m=v(x,q);if(m){m.path.push(b+"'s key ["+x+"]");return{v:m}}m=w(y,u);if(m){m.path.push(b+"["+x+"]'s value");return{v:m}}}}else if(p!=null){m=r(p,g[o]);m&&m.path.push(b);y=i[b];y&&y.forEach(function(c){var d=h[c].filter(function(a){return a!==b});d.forEach(function(d){typeof a[d]!=="undefined"&&(m={path:[c],error:"oneof '"+c+"' has fields '"+b+"' and '"+d+"' set"})})});j[e[o]]&&(m={path:[b],error:"tag "+e[o]+" is reserved"});k[b]&&(m={path:[b],error:"field "+b+" is reserved"})}};var n;for(var o=0;o<c.length&&!m;o++){n=b();if(n)return n.v}return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("decodeProtobuf",["WABaseProto","WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function f(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e,f){var g=d("WAProtoCompile").compileSpec(a),k=g.names,l=g.fields,m=g.types,o=g.meta,p=g.oneofToFields,q=g.fieldToOneof,r=g.reservedTags,s=g.reservedFields;g=a.internalDefaults;var t=c||babelHelpers["extends"]({},g)||{};t.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(g=0;g<k.length;g++)m[g]&d("WAProtoConst").FLAGS.REPEATED?t[k[g]]=[]:m[g]===(d("WAProtoConst").TYPES.MAP&d("WAProtoConst").TYPE_MASK)&&(t[k[g]]=new Map());var u=0,v=l.length>0,w=l[0];c=function(){var a=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow),c=a&7;a=a>>>3;if(v&&a!==w){var g=u;do++u===l.length&&(u=0),w=l[u];while(a!==w&&u!==g)}if(v&&a===w){var x=k[u];g=m[u];h(c,g,x);var y=g&d("WAProtoConst").TYPE_MASK,z=o[u];if(g&d("WAProtoConst").FLAGS.PACKED){var A=b.readVarInt(d("WABinary").parseUint64OrThrow);A=b.readBinary(A);while(A.size()){var B=i(x,y,A);(y!==d("WAProtoConst").TYPES.ENUM||z[B]||(z.cast==null?void 0:z.cast(B))!==void 0)&&t[x].push(B)}}else if(y===d("WAProtoConst").TYPES.MESSAGE){B=b.readVarInt(d("WABinary").parseUint64OrThrow);A=b.readBinary(B);if(g&d("WAProtoConst").FLAGS.REPEATED)t[x].push(n(z,A,void 0,e,f));else{B=t[x];t[x]=n(z,A,B,e,f)}}else if(y===d("WAProtoConst").TYPES.MAP){A=b.readVarInt(d("WABinary").parseUint64OrThrow);B=b.readBinary(A);var C,D;for(A=0;A<o[u].length;A++){var E=j(B,0,4294967296,"map field and enc type",d("WABinary").parseInt64OrThrow),F=E&7;E=E>>>3;var G=void 0;switch(F){case d("WAProtoConst").ENC.VARINT:G=B.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:G=B.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:F=z[A];if(F===d("WAProtoConst").TYPES.BYTES||F===d("WAProtoConst").TYPES.STRING)G=i(x,F,B);else{var H=B.readVarInt(d("WABinary").parseUint64OrThrow);H=B.readBinary(H);G=n(F,H,void 0,e,f)}break;case d("WAProtoConst").ENC.BIT32:G=B.readBinary(4);break}E===1?C=G:D=G}t[x].set(C,D)}else{F=i(x,y,b);(y!==d("WAProtoConst").TYPES.ENUM||z[F]||(z.cast==null?void 0:z.cast(F))!==void 0)&&(g&d("WAProtoConst").FLAGS.REPEATED?t[x].push(F):t[x]=F)}H=q[x];H&&typeof t[x]!=="undefined"&&H.forEach(function(a){var b=p[a].filter(function(a){return a!==x});b.forEach(function(a){delete t[a]});if(f){t[a]=(b={type:x,value:t[x]},b[d("WABaseProto").TAGGED_UNION_TAG]=!0,b);delete t[x]}});(r[a]||s[x])&&delete t[x]}else{t.$$unknownFieldCount++;if(e){t.$$unsafeUnknownFields||(t.$$unsafeUnknownFields={});var I;switch(c){case d("WAProtoConst").ENC.VARINT:I=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:I=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:I=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:I=b.readBinary(4);break}t.$$unsafeUnknownFields[a]=I}else c===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):c===d("WAProtoConst").ENC.BIT64?b.advance(8):c===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):c===d("WAProtoConst").ENC.BIT32&&b.advance(4)}};while(b.size())c();return t}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithTaggedUnions=b;g.decodeProtobufWithUnknowns=e;g.getUnknownFields=f;g.assertEncType=h;g.readValue=i;g.readBoundVarInt=j}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArrayView()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else if(p===d("WAProtoConst").TYPES.MAP)for(o of l){r=o[0];var s=o[1];a.writeVarInt(k);var t=q[0],u=q[1],v=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u,w=m[t],x=m[v];if(w==null||x==null)throw new Error("Invalid encoder for map key/value");var y=new(d("WABinary").Binary)(),z=1*8|d("WAProtoUtils").typeToEncType(t);y.writeVarInt(z);w(y,r,t);z=2*8|d("WAProtoUtils").typeToEncType(v);y.writeVarInt(z);x(y,s,u);a.writeVarInt(y.size());a.writeBinary(y)}else{a.writeVarInt(k);w=m[p];w(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("WASignalOther",["WACryptoDependencies","WACryptoHkdf","WACryptoUtils","WAParsableXmlNode","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h={name:"AES-CBC"},i={name:"HMAC",hash:"SHA-256"};function j(a,b){if(a.length!==b)throw c("err")("Signal expected "+b+" bytes, given "+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function e(a,b){return a.readByteArrayView(b)}function f(a){return new Uint8Array(a)}function k(a,b,d){if(a.length-b<d)throw c("err")("Can not split off "+d+" bytes from index "+b+" of "+a.length+" bytes");return a.slice(b,b+d)}function l(a){a=a==="extendedRange"?(-1>>>1)-1:16380;return d("WACryptoUtils").randomNumberLessThan(a)+1}function m(a){return q(a)}function n(a){return d("WAParsableXmlNode").convertBytesToUint(a,4)}function o(){var a=-1>>>1;return d("WACryptoUtils").randomNumberLessThan(a)+1}function p(a){return q(a)}function q(a,b,d){b===void 0&&(b=0);d===void 0&&(d=4294967296);if(typeof a==="number"&&b<=a&&a<d&&Math.floor(a)===a)return a;else throw c("err")("Expected integer in range ["+b+", "+d+"), given "+String(a))}function r(a,b){return d("encodeProtobuf").encodeProtobuf(a,b).readByteArrayView()}function s(a,b,c){return c(d("decodeProtobuf").decodeProtobuf(a,b))}function t(a,b,c,e){return d("WACryptoHkdf").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function u(a,b){var c,e;b==="hmac-sha256"?(c=i,e=["sign"]):(b,c=h,e=["encrypt","decrypt"]);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,c,!1,e)}function v(a){return a}function w(a){return a}function x(a,b){return d("WACryptoUtils").arrayBuffersEqual(a,b)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=e;g.makeBytes=f;g.sliceBytes=k;g.makeRegistrationId=l;g.castRegistrationId=m;g.castRegistrationIdFromBytes=n;g.makeSenderKeyId=o;g.castSenderKeyId=p;g.ensureIntInRange=q;g.encodeSignalProto=r;g.decodeSignalProto=s;g.hkdf=t;g.makeCryptoKey=u;g.castToByteEncoded=v;g.castToSessionHash=w;g.areSessionHashesEqual=x}),98);
__d("WASignalKeys",["WACryptoDependencies","WACryptoPrimitives","WALogger","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=5,j=16777215;function k(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d("WACryptoPrimitives").keypairFromSecretKey(a);var b=a.publicKey;a=a.secretKey;return k(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function b(a,b){return{publicKey:d("WASignalOther").toBytes(a,32),privateKey:d("WASignalOther").toBytes(b,32)}}function l(){var a=d("WACryptoPrimitives").keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return k(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function m(a,b){return k(d("WASignalOther").sliceBytes(b,1,32),a)}function n(a,b){return{serializedPubKey:b,privateKey:a}}function e(){var a=l();return n(a.privateKey,o(a))}function o(a){var b=d("WASignalOther").makeBytes(33);b[0]=i;b.set(a.publicKey,1);return b}function f(a){var b=d("WASignalOther").makeBytes(33);b[0]=i;b.set(d("WASignalOther").ensureSize(a,32),1);return b}function p(a){return n(a.privateKey,o(a))}function q(a,b){a=(a-1)%j;a<=0&&(a+=j);var c=[];for(var e=0;e<b;e++){var f=a===j?1:a+1,g=l(),h=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:f,publicKey:o(g),privateKey:g.privateKey});c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function r(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:s(b),keyPair:m(d("WASignalOther").toBytes(a,32),u(new Uint8Array(c)))}}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializePreKey error ",""])),a);return null}}function s(a){return d("WASignalOther").ensureIntInRange(a,1,j)}function t(a){return d("WASignalOther").ensureIntInRange(a,0,j)}function u(a){if(a.length===0||a[0]!==i)throw c("err")("Unrecognized public key type");return d("WASignalOther").ensureSize(a,33)}function v(){var a=d("WASignalOther").makeBytes(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a}function w(a,b){return d("WACryptoPrimitives").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=i;g.makeKeyPairFrom=a;g.makeKeyPairFromArrayBuffers=b;g.makeKeyPair=l;g.makeKeyPairFromSerialized=m;g.makeSerializedKeyPairFrom=n;g.makeSerializedKeyPair=e;g.serializePubKey=o;g.serializeIdentity=f;g.toSerializedKeyPair=p;g.makePreKeys=q;g.deserializePreKey=r;g.castToPreKeyId=s;g.castToSignedPreKeyId=t;g.castToSerializedPubKey=u;g.makeRawSenderKey=v;g.ecdh=w}),98);
__d("WATextEncoding",[],(function(a,b,c,d,e,f){"use strict";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);
__d("WAWapDict",[],(function(a,b,c,d,e,f){"use strict";a=3;b=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","notification","disappearing_mode","status","jid","broadcast","user","devices","device_hash","to","offline","message","result","class","xmlns","duration","notify","iq","t","ack","g.us","enc","urn:xmpp:whatsapp:push","presence","config_value","picture","verified_name","config_code","key-index-list","contact","mediatype","routing_info","edge_routing","get","read","urn:xmpp:ping","fallback_hostname","0","chatstate","business_hours_config","unavailable","download_buckets","skmsg","verified_level","composing","handshake","device-list","media","text","fallback_ip4","media_conn","device","creation","location","config","item","fallback_ip6","count","w:profile:picture","image","business","2","hostname","call-creator","display_name","relaylatency","platform","abprops","success","msg","offline_preview","prop","key-index","v","day_of_week","pkmsg","version","1","ping","w:p","download","video","set","specific_hours","props","primary","unknown","hash","commerce_experience","last","subscribe","max_buckets","call","profile","member_since_text","close_time","call-id","sticker","mode","participants","value","query","profile_options","open_time","code","list","host","ts","contacts","upload","lid","preview","update","usync","w:stats","delivery","auth_ttl","context","fail","cart_enabled","appdata","category","atn","direct_connection","decrypt-fail","relay_id","mmg-fallback.whatsapp.net","target","available","name","last_id","mmg.whatsapp.net","categories","401","is_new","index","tctoken","ip4","token_id","latency","recipient","edit","ip6","add","thumbnail-document","26","paused","true","identity","stream:error","key","sidelist","background","audio","3","thumbnail-image","biz-cover-photo","cat","gcm","thumbnail-video","error","auth","deny","serial","in","registration","thumbnail-link","remove","00","gif","thumbnail-gif","tag","capability","multicast","item-not-found","description","business_hours","config_expo_key","md-app-state","expiration","fallback","ttl","300","md-msg-hist","device_orientation","out","w:m","open_24h","side_list","token","inactive","01","document","te2","played","encrypt","msgr","hide","direct_path","12","state","not-authorized","url","terminate","signature","status-revoke-delay","02","te","linked_accounts","trusted_contact","timezone","ptt","kyc-id","privacy_token","readreceipts","appointment_only","address","expected_ts","privacy","7","android","interactive","device-identity","enabled","attribute_padding","1080","03","screen_height"];c=["read-self","active","fbns","protocol","reaction","screen_width","heartbeat","deviceid","2:47DEQpj8","uploadfieldstat","voip_settings","retry","priority","longitude","conflict","false","ig_professional","replaced","preaccept","cover_photo","uncompressed","encopt","ppic","04","passive","status-revoke-drop","keygen","540","offer","rate","opus","latitude","w:gp2","ver","4","business_profile","medium","sender","prev_v_id","email","website","invited","sign_credential","05","transport","skey","reason","peer_abtest_bucket","America/Sao_Paulo","appid","refresh","100","06","404","101","104","107","102","109","103","member_add_mode","105","transaction-id","110","106","outgoing","108","111","tokens","followers","ig_handle","self_pid","tue","dec","thu","joinable","peer_pid","mon","features","wed","peer_device_presence","pn","delete","07","fri","audio_duration","admin","connected","delta","rcat","disable","collection","08","480","sat","phash","all","invite","accept","critical_unblock_low","group_update","signed_credential","blinded_credential","eph_setting","net","09","background_location","refresh_id","Asia/Kolkata","privacy_mode_ts","account_sync","voip_payload_type","service_areas","acs_public_key","v_id","0a","fallback_class","relay","actual_actors","metadata","w:biz","5","connected-limit","notice","0b","host_storage","fb_page","subject","privatestats","invis","groupadd","010","note.m4r","uuid","0c","8000","sun","372","1020","stage","1200","720","canonical","fb","011","video_duration","0d","1140","superadmin","012","Opening.m4r","keystore_attestation","dleq_proof","013","timestamp","ab_key","w:sync:app:state","0e","vertical","600","p_v_id","6","likes","014","500","1260","creator","0f","rte","destination","group","group_info","syncd_anti_tampering_fatal_exception_enabled","015","dl_bw","Asia/Jakarta","vp8/h.264","online","1320","fb:multiway","10","timeout","016","nse_retry","urn:xmpp:whatsapp:dirty","017","a_v_id","web_shops_chat_header_button_enabled","nse_call","inactive-upgrade","none","web","groups","2250","mms_hot_content_timespan_in_seconds","contact_blacklist","nse_read","suspended_group_deletion_notification","binary_version","018","https://www.whatsapp.com/otp/copy/","reg_push","shops_hide_catalog_attachment_entrypoint","server_sync",".","ephemeral_messages_allowed_values","019","mms_vcache_aggregation_enabled","iphone","America/Argentina/Buenos_Aires","01a","mms_vcard_autodownload_size_kb","nse_ver","shops_header_dropdown_menu_item","dhash","catalog_status","communities_mvp_new_iqs_serverprop","blocklist","default","11","ephemeral_messages_enabled","01b","original_dimensions","8","mms4_media_retry_notification_encryption_enabled","mms4_server_error_receipt_encryption_enabled","original_image_url","sync","multiway","420","companion_enc_static","shops_profile_drawer_entrypoint","01c","vcard_as_document_size_kb","status_video_max_duration","request_image_url","01d","regular_high","s_t","abt","share_ext_min_preliminary_image_quality","01e","32","syncd_key_rotation_enabled","data_namespace","md_downgrade_read_receipts2","patch","polltype","ephemeral_messages_setting","userrate","15","partial_pjpeg_bw_threshold","played-self","catalog_exists","01f","mute_v2"];d=["reject","dirty","announcement","020","13","9","status_video_max_bitrate","fb:thrift_iq","offline_batch","022","full","ctwa_first_business_reply_logging","h.264","smax_id","group_description_length","https://www.whatsapp.com/otp/code","status_image_max_edge","smb_upsell_business_profile_enabled","021","web_upgrade_to_md_modal","14","023","s_o","smaller_video_thumbs_status_enabled","media_max_autodownload","960","blocking_status","peer_msg","joinable_group_call_client_version","group_call_video_maximization_enabled","return_snapshot","high","America/Mexico_City","entry_point_block_logging_enabled","pop","024","1050","16","1380","one_tap_calling_in_group_chat_size","regular_low","inline_joinable_education_enabled","hq_image_max_edge","locked","America/Bogota","smb_biztools_deeplink_enabled","status_image_quality","1088","025","payments_upi_intent_transaction_limit","voip","w:g2","027","md_pin_chat_enabled","026","multi_scan_pjpeg_download_enabled","shops_product_grid","transaction_id","ctwa_context_enabled","20","fna","hq_image_quality","alt_jpeg_doc_detection_quality","group_call_max_participants","pkey","America/Belem","image_max_kbytes","web_cart_v1_1_order_message_changes_enabled","ctwa_context_enterprise_enabled","urn:xmpp:whatsapp:account","840","Asia/Kuala_Lumpur","max_participants","video_remux_after_repair_enabled","stella_addressbook_restriction_type","660","900","780","context_menu_ios13_enabled","mute-state","ref","payments_request_messages","029","frskmsg","vcard_max_size_kb","sample_buffer_gif_player_enabled","match_last_seen","510","4983","video_max_bitrate","028","w:comms:chat","17","frequently_forwarded_max","groups_privacy_blacklist","Asia/Karachi","02a","web_download_document_thumb_mms_enabled","02b","hist_sync","biz_block_reasons_version","1024","18","web_is_direct_connection_for_plm_transparent","view_once_write","file_max_size","paid_convo_id","online_privacy_setting","video_max_edge","view_once_read","enhanced_storage_management","multi_scan_pjpeg_encoding_enabled","ctwa_context_forward_enabled","video_transcode_downgrade_enable","template_doc_mime_types","hq_image_bw_threshold","30","body","u_aud_limit_sil_restarts_ctrl","other","participating","w:biz:directory","1110","vp8","4018","meta","doc_detection_image_max_edge","image_quality","1170","02c","smb_upsell_chat_banner_enabled","key_expiry_time_second","pid","stella_interop_enabled","19","linked_device_max_count","md_device_sync_enabled","02d","02e","360","enhanced_block_enabled","ephemeral_icon_in_forwarding","paid_convo_status","gif_provider","project_name","server-error","canonical_url_validation_enabled","wallpapers_v2","syncd_clear_chat_delete_chat_enabled","medianotify","02f","shops_required_tos_version","vote","reset_skey_on_id_change","030","image_max_edge","multicast_limit_global","ul_bw","21","25","5000","poll","570","22","031","1280","WhatsApp","032","bloks_shops_enabled","50","upload_host_switching_enabled","web_ctwa_context_compose_enabled","ptt_forwarded_features_enabled","unblocked","partial_pjpeg_enabled","fbid:devices","height","ephemeral_group_query_ts","group_join_permissions","order","033","alt_jpeg_status_quality","migrate","popular-bank","win_uwp_deprecation_killswitch_enabled","web_download_status_thumb_mms_enabled","blocking","url_text","035","web_forwarding_limit_to_groups","1600","val","1000","syncd_msg_date_enabled","bank-ref-id","max_subject","payments_web_enabled","web_upload_document_thumb_mms_enabled","size","request","ephemeral","24","receipt_agg","ptt_remember_play_position","sampling_weight","enc_rekey","mute_always","037","034","23","036","action","click_to_chat_qr_enabled","width","disabled","038","md_blocklist_v2","played_self_enabled","web_buttons_message_enabled","flow_id","clear","450","fbid:thread","bloks_session_state","America/Lima","attachment_picker_refresh","download_host_switching_enabled","1792","u_aud_limit_sil_restarts_test2","custom_urls","device_fanout","optimistic_upload","2000","key_cipher_suite","web_smb_upsell_in_biz_profile_enabled","e","039","siri_post_status_shortcut","pair-device","lg","lc","stream_attribution_url","model","mspjpeg_phash_gen","catalog_send_all","new_multi_vcards_ui","share_biz_vcard_enabled","-","clean","200","md_blocklist_v2_server","03b","03a","web_md_migration_experience","ptt_conversation_waveform","u_aud_limit_sil_restarts_test1"];e=["64","ptt_playback_speed_enabled","web_product_list_message_enabled","paid_convo_ts","27","manufacturer","psp-routing","grp_uii_cleanup","ptt_draft_enabled","03c","business_initiated","web_catalog_products_onoff","web_upload_link_thumb_mms_enabled","03e","mediaretry","35","hfm_string_changes","28","America/Fortaleza","max_keys","md_mhfs_days","streaming_upload_chunk_size","5541","040","03d","2675","03f","...","512","mute","48","041","alt_jpeg_quality","60","042","md_smb_quick_reply","5183","c","1343","40","1230","043","044","mms_cat_v1_forward_hot_override_enabled","user_notice","ptt_waveform_send","047","Asia/Calcutta","250","md_privacy_v2","31","29","128","md_messaging_enabled","046","crypto","690","045","enc_iv","75","failure","ptt_oot_playback","AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk","w","048","2201","web_large_files_ui","Asia/Makassar","812","status_collapse_muted","1334","257","2HP4dm","049","patches","1290","43cY6T","America/Caracas","web_sticker_maker","campaign","ptt_pausable_enabled","33","42","attestation","biz","04b","query_linked","s","125","04a","810","availability","1411","responsiveness_v2_m1","catalog_not_created","34","America/Santiago","1465","enc_p","04d","status_info","04f","key_version","..","04c","04e","md_group_notification","1598","1215","web_cart_enabled","37","630","1920","2394","-1","vcard","38","elapsed","36","828","peer","pricing_category","1245","invalid","stella_ios_enabled","2687","45","1528","39","u_is_redial_audio_1104_ctrl","1025","1455","58","2524","2603","054","bsp_system_message_enabled","web_pip_redesign","051","verify_apps","1974","1272","1322","1755","052","70","050","1063","1135","1361","80","1096","1828","1851","1251","1921","key_config_id","1254","1566","1252","2525","critical_block","1669","max_available","w:auth:backup:token","product","2530","870","1022","participant_uuid","web_cart_on_off","1255","1432","1867","41","1415","1440","240","1204","1608","1690","1846","1483","1687","1749","69","url_number","053","1325","1040","365","59","Asia/Riyadh","1177","test_recommended","057","1612","43","1061","1518","1635","055","1034","1375","750","1430","event_code","1682","503","55","865","78","1309","1365","44","America/Guayaquil","535","LIMITED","1377","1613","1420","1599","1822","05a","1681","password","1111","1214","1376","1478","47","1082","4282","Europe/Istanbul","1307","46","058","1124","256","rate-overlimit","retail","u_a_socket_err_fix_succ_test","1292","1370","1388","520","861","psa","regular","1181","1766","05b","1183","1213","1304","1537"];var g=["1724","profile_picture","1071","1314","1605","407","990","1710","746","pricing_model","056","059","061","1119","6027","65","877","1607","05d","917","seen","1516","49","470","973","1037","1350","1394","1480","1796","keys","794","1536","1594","2378","1333","1524","1825","116","309","52","808","827","909","495","1660","361","957","google","1357","1565","1967","996","1775","586","736","1052","1670","bank","177","1416","2194","2222","1454","1839","1275","53","997","1629","6028","smba","1378","1410","05c","1849","727","create","1559","536","1106","1310","1944","670","1297","1316","1762","en","1148","1295","1551","1853","1890","1208","1784","7200","05f","178","1283","1332","381","643","1056","1238","2024","2387","179","981","1547","1705","05e","290","903","1069","1285","2436","062","251","560","582","719","56","1700","2321","325","448","613","777","791","51","488","902","Asia/Almaty","is_hidden","1398","1527","1893","1999","2367","2642","237","busy","065","067","233","590","993","1511","54","723","860","363","487","522","605","995","1321","1691","1865","2447","2462","NON_TRANSACTIONAL","433","871","432","1004","1207","2032","2050","2379","2446","279","636","703","904","248","370","691","700","1068","1655","2334","060","063","364","533","534","567","1191","1210","1473","1827","069","701","2531","514","prev_dhash","064","496","790","1046","1139","1505","1521","1108","207","544","637","final","1173","1293","1694","1939","1951","1993","2353","2515","504","601","857","modify","spam_request","p_121_aa_1101_test4","866","1427","1502","1638","1744","2153","068","382","725","1704","1864","1990","2003","Asia/Dubai","508","531","1387","1474","1632","2307","2386","819","2014","066","387","1468","1706","2186","2261","471","728","1147","1372","1961"],h=[c,d,e,g];f.DICT_VERSION=a;f.SINGLE_BYTE_TOKEN=b;f.DICTIONARY_0_TOKEN=c;f.DICTIONARY_1_TOKEN=d;f.DICTIONARY_2_TOKEN=e;f.DICTIONARY_3_TOKEN=g;f.DICTIONARIES=h}),66);
__d("WAWapJid",["$InternalEnum","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4},i=b("$InternalEnum")({WHATSAPP:0,LID:1,HOSTED:128,HOSTED_LID:129});a=function(){function a(a){this.$1=a}a.createAD=function(b,c,d){return new a({type:h.JID_AD,user:b,device:d==null?0:d,agent:c==null?0:c,domainType:i.WHATSAPP})};a.createJidU=function(b,c,d){return new a({type:h.JID_U,user:b,device:d==null?0:d,domainType:c==null?i.WHATSAPP:c})};a.createFbJid=function(b,c){c=c==null?0:c;return new a({type:h.JID_FB,user:b,device:c})};a.createInteropJid=function(b,c,d){c=c==null?0:c;return new a({type:h.JID_INTEROP,user:b,device:c,integrator:d})};a.create=function(b,c){return new a({type:h.JID,user:b,server:c})};var b=a.prototype;b.toString=function(){if(this.$1.type===h.JID_AD||this.$1.type===h.JID_U){var a=this.$1,b=a.user,c=a.device;a=a.domainType;var e;a===i.WHATSAPP?e=d("WAJids").WA_USER_JID_SUFFIX:a===i.HOSTED?e=d("WAJids").HOSTED_SUFFIX:a===i.HOSTED_LID?e=d("WAJids").HOSTED_LID_SUFFIX:e=d("WAJids").LID_SUFFIX;return c===0?b+"@"+e:b+":"+c+"@"+e}else if(this.$1.type===h.JID_FB){a=this.$1;b=a.user;c=a.device;e=d("WAJids").MSGR_USER_JID_SUFFIX;return b+":"+c+"@"+e}else if(this.$1.type===h.JID_INTEROP){a=this.$1;b=a.user;c=a.device;e=a.integrator;a=d("WAJids").INTEROP_USER_JID_SUFFIX;return e+"-"+b+":"+c+"@"+a}else{this.$1.type;e=this.$1;b=e.user;c=e.server;return b!=null?b+"@"+c:c}};b.getInnerJid=function(){return this.$1};return a}();g.WAP_JID_SUBTYPE=h;g.DomainType=i;g.WapJid=a}),98);
__d("WAXmlFormatter",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~");var b=a.length,c=!1,d=0,e="",f=0,h=["\n"];for(f=0;f<100;f++)h.push(h[f]+"    ");var i=function(b,a){var c=/^<[\w:\-.,]+/.exec(b[a-1]);b=/^<\/[\w:\-.,]+/.exec(b[a]);return c!=null&&b!=null&&c[0]===b[0]};for(f=0;f<b;f++)a[f].search(/<!/)>-1?(e+=h[d]+a[f],c=!0,(a[f].search(/-->/)>-1||a[f].search(/\]>/)>-1||a[f].search(/!DOCTYPE/)>-1)&&(c=!1)):a[f].search(/-->/)>-1||a[f].search(/\]>/)>-1?(e+=a[f],c=!1):i(a,f)?(e+=a[f],c||d--):a[f].search(/<\w/)>-1&&a[f].search(/<\//)===-1&&a[f].search(/\/>/)===-1?(a[f]=g(a[f]),e=c?e+=a[f]:e+=h[d++]+a[f]):a[f].search(/<\w/)>-1&&a[f].search(/<\//)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(/<\//)>-1?e=c?e+=a[f]:e+=h[d===0?d:--d]+a[f]:a[f].search(/\/>/)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(/<\?/)>-1?e+=h[d]+a[f]:a[f].search(/xmlns:/)>-1||a[f].search(/xmlns=/)>-1?e+=h[d]+a[f]:e+=a[f];return e[0]==="\n"?e.slice(1):e}function g(a){var b=a.match(/(<query.*>|<result>)(\{.*\})/);if(b===null)return a;try{var c=b[1];b=JSON.stringify(JSON.parse(b[2]),null,2);return c+"\n"+b}catch(b){return a+"[Error formatting JSON]"}}f["default"]=a}),66);
__d("WAXmlNode",["WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h={};a=function(){function a(a,b,c){b===void 0&&(b=h),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a="<"+this.tag;a+=i(this.attrs);var b=this.content;Array.isArray(b)?a+=">"+b.map(String).join("")+"</"+this.tag+">":b instanceof Uint8Array?a+=">"+j(b)+"</"+this.tag+">":b!=null?a+=">"+String(b)+"</"+this.tag+">":a+=" />";return a};return a}();function i(a){var b=Object.keys(a),c="";for(var d=0;d<b.length;d++){var e=b[d];c+=" "+e+'="'+a[e].toString()+'"'}return c}function j(a){var b;a.length===0?b="<!-- empty binary -->":a.length<50?b=d("WAHex").bytesToDebugString(a):b="<!-- "+a.length+" bytes -->";return b}g.XmlNode=a;g.attrsToString=i;g.uint8ArrayToDebugString=j}),98);
__d("WAWap",["WAAssertUnreachable","WABinary","WACryptoDependencies","WAJids","WALogger","WALongInt","WATextEncoding","WAWapDict","WAWapJid","WAXmlFormatter","WAXmlNode","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k=d("WAJids")).MSGR_USER_DOMAIN.replace("@",""),aa=k.WA_USER_DOMAIN.replace("@",""),m=k.LID_DOMAIN.replace("@",""),n=k.INTEROP_DOMAIN.replace("@",""),o=k.HOSTED_DOMAIN.replace("@",""),p=2,ba=128,q=0,r=236,s=237,t=238,u=239,ca=[r,s,t,u],v=245,w=246,x=247,y=248,z=249,A=250,B=251,C=252,D=253,E=254,F=255,da=["0","1","2","3","4","5","6","7","8","9","-",".","\ufffd","\ufffd","\ufffd","\ufffd"],ea=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],G="",fa=1,H={sentinel:"DROP_ATTR"},I=(s=d("WAWapJid")).WapJid.create(null,"g.us"),J=s.WapJid.create(null,k.WA_SERVER_JID_SUFFIX);t=s.WapJid.create("status","broadcast");var K=s.WapJid.create(null,"newsletter");k=s.WapJid.create(null,"hosted");var ga=s.WapJid.create(null,"hosted.lid"),L=s.WapJid.create(null,"call"),M={},N=!1;function a(){N=!0}var ha=d("WATextEncoding").newTextEncoder(),O=function(){function a(a,b,c){b===void 0&&(b=M),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a="<"+this.tag;a+=d("WAXmlNode").attrsToString(this.attrs);var b=this.content;Array.isArray(b)?a+=">"+b.map(String).join("")+"</"+this.tag+">":b?a+=">"+d("WAXmlNode").uint8ArrayToDebugString(b)+"</"+this.tag+">":a+=" />";N&&(a=c("WAXmlFormatter")(a));return a};return a}();function b(a,b,e){var f=null;if(b&&b.children!=null)throw c("err")('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(e))f=e.filter(Boolean);else if(typeof e==="string")f=d("WABinary").Binary.build(e).readByteArrayView();else if(e instanceof ArrayBuffer)f=new Uint8Array(e);else if(e instanceof Uint8Array)f=e;else{var g=[];for(var h=2;h<arguments.length;h++){var i=arguments[h];i&&g.push(i)}f=g}Array.isArray(f)&&f.length===0&&(f=null);var j={};if(b){var k=b;Object.keys(k).forEach(function(b){if(["__self","__source"].includes(b))return;var d=k[b];if(d==null)throw c("err")("Attr "+b+" in <"+a+"> is null");if(d===H)return;j[b]=d})}return new O(a,j,f)}s=b;function e(a){return a instanceof d("WAWapJid").WapJid?a.toString():a}function P(a){var b=a.content;Array.isArray(b)?b=b.map(P):typeof b==="string"&&(b=d("WABinary").Binary.build(b).readByteArrayView());return new O(a.tag,a.attrs||M,b)}function f(a){a=a instanceof O?a:P(a);var b=new(d("WABinary").Binary)();Q(a,b);a=0;b=b.readByteArrayView();var c=new Uint8Array(1+b.length);c[0]=a;c.set(b,1);return c}function Q(a,b){if(a==null)b.writeUint8(q);else if(a instanceof O)R(a,b);else if(a instanceof d("WAWapJid").WapJid)ia(a,b);else if(typeof a==="string")V(a,b);else if(a instanceof Uint8Array)ka(a,b);else{a;b=typeof a;throw c("err")("Invalid payload type "+b)}}function ia(a,b){a=a.getInnerJid();if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_U){var c=a.user,e=a.device,f=a.domainType;b.writeUint8(x);b.writeUint8(f);b.writeUint8(e);Q(c,b)}else if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_FB){f=a.user;e=a.device;b.writeUint8(w);Q(f,b);b.writeUint16(e);Q(l,b)}else if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_INTEROP){c=a.user;f=a.device;e=a.integrator;b.writeUint8(v);Q(c,b);b.writeUint16(f);b.writeUint16(e)}else{c=a.user;f=a.server;b.writeUint8(A);c!=null?Q(c,b):b.writeUint8(q);Q(f,b)}}function R(a,b){if(a.tag===void 0){b.writeUint8(y);b.writeUint8(q);return}var c=1;a.attrs&&(c+=Object.keys(a.attrs).length*2);a.content&&c++;c<256?(b.writeUint8(y),b.writeUint8(c)):c<65536&&(b.writeUint8(z),b.writeUint16(c));Q(a.tag,b);a.attrs&&Object.keys(a.attrs).forEach(function(c){V(c,b),Q(a.attrs[c],b)});c=a.content;if(Array.isArray(c)){c.length<256?(b.writeUint8(y),b.writeUint8(c.length)):c.length<65536&&(b.writeUint8(z),b.writeUint16(c.length));for(var d=0;d<c.length;d++)R(c[d],b)}else c&&Q(c,b)}var S,T;function U(a){var b=new Map();for(var c=0;c<a.length;c++)b.set(a[c],c);return b}function V(a,b){if(a===""){b.writeUint8(C);b.writeUint8(0);return}S==null&&(S=U(d("WAWapDict").SINGLE_BYTE_TOKEN));var c=S.get(a);if(c!=null){b.writeUint8(c+1);return}if(T==null){T=[];for(c=0;c<d("WAWapDict").DICTIONARIES.length;++c)T.push(U(d("WAWapDict").DICTIONARIES[c]))}for(c=0;c<T.length;++c){var e=T[c].get(a);if(e!=null){b.writeUint8(ca[c]);b.writeUint8(e);return}}e=d("WABinary").numUtf8Bytes(a);if(e<128){c=/[^0-9.-]+?/;var f=/[^0-9A-F]+?/;if(!c.exec(a)){ja(a,F,b);return}else if(!f.exec(a)){ja(a,B,b);return}}la(e,b);b.writeString(a)}function ja(a,b,d){var e=a.length%2===1;d.writeUint8(b);var f=Math.ceil(a.length/2);e&&(f|=ba);d.writeUint8(f);e=0;for(f=0;f<a.length;f++){var g=a.charCodeAt(f),h=null;48<=g&&g<=57?h=g-48:b===F?g===45?h=10:g===46&&(h=11):b===B&&(65<=g&&g<=70&&(h=g-55));if(h==null)throw c("err")("Cannot nibble encode "+g);else f%2===0?(e=h<<4,f===a.length-1&&(e|=15,d.writeUint8(e))):(e|=h,d.writeUint8(e))}}function ka(a,b){la(a.length,b),b.writeByteArray(a)}function la(a,b){if(a<256)b.writeUint8(C),b.writeUint8(a);else if(a<1048576)b.writeUint8(D),b.writeUint8(a>>>16&255),b.writeUint8(a>>>8&255),b.writeUint8(a&255);else if(a<4294967296)b.writeUint8(E),b.writeUint32(a);else throw c("err")("Binary with length "+a+" is too big for WAP protocol")}function ma(a,b){a=new(d("WABinary").Binary)(a);var c=a.readUint8();c=c&p;if(c){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Decoding compressed stanza"])));return b(a.readByteArrayView()).then(function(a){return X(new(d("WABinary").Binary)(a))})}return Promise.resolve(X(a))}function na(a){a=new(d("WABinary").Binary)(a);var b=a.readUint8();b=b&p;if(b)throw c("err")("Cannot pass compressed stanza to decodeStanzaDebug");return X(a)}function W(a,b){var e=a.readUint8();if(e===q)return null;if(e===y)return oa(a,a.readUint8());if(e===z)return oa(a,a.readUint16());if(e===C){var f=a.readUint8();return Z(a,f,b)}if(e===D){f=a.readUint8();var g=a.readUint8(),h=a.readUint8();f=((f&15)<<16)+(g<<8)+h;return Z(a,f,b)}if(e===E){g=a.readUint32();return Z(a,g,b)}if(e===A)return qa(a);if(e===w)return ra(a);if(e===v)return sa(a);if(e===x)return ta(a);if(e===F){h=a.readUint8();f=h>>>7;g=h&127;return ua(a,da,f,g)}if(e===B){b=a.readUint8();h=b>>>7;f=b&127;return ua(a,ea,h,f)}if(e<=0||e>=240)throw c("err")("Unable to decode WAP buffer");if(e>=r&&e<=u){g=e-r;b=d("WAWapDict").DICTIONARIES[g];if(b===void 0)throw c("err")("Missing WAP dictionary "+g);h=a.readUint8();f=b[h];if(f===void 0)throw c("err")("Invalid value index "+h+" in dict "+g);return f}a=d("WAWapDict").SINGLE_BYTE_TOKEN[e-1];if(a===void 0)throw c("err")("Undefined token with index "+e);return a}function oa(a,b){var c=[];for(var d=0;d<b;d++)c.push(X(a));return c}function X(a){var b=a.readUint8(),e;if(b===y)e=a.readUint8();else if(b===z)e=a.readUint16();else throw c("err")("Failed to decode node since type byte "+String(b)+" is invalid");b=void 0;var f=null;if(e===0)throw c("err")("Failed to decode node, list cannot be empty");var g=Y(a);e-=1;while(e>1){b||(b={});var h=Y(a),i=W(a,!0);b[h]=i;e-=2}e===1&&(f=W(a,!1),f instanceof d("WAWapJid").WapJid&&(f=String(f)),typeof f==="string"&&(f=ha.encode(f)));return new O(g,b,f)}function Y(a){a=W(a,!0);if(typeof a!=="string"){d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["decodeString got invalid value: ",", string expected"])),String(a));throw c("err")("WAWap:decodeString got invalid value, string expected")}return a}function pa(a){a=W(a,!0);if(a!=null&&typeof a!=="string"){d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["decodeNullableString got invalid value: ",", string expected"])),String(a));throw c("err")("WAWap:decodeNullableString got invalid value, string expected")}return a}function qa(a){var b=pa(a);a=Y(a);return d("WAWapJid").WapJid.create(b,a)}function ra(a){var b=Y(a),c=a.readUint16();Y(a);return d("WAWapJid").WapJid.createFbJid(b,c)}function sa(a){var b=Y(a),c=a.readUint16(),e=a.readUint16();Y(a);return d("WAWapJid").WapJid.createInteropJid(b,c,e)}function ta(a){var b=null,e=a.readUint8();if(e===0)b=d("WAWapJid").DomainType.WHATSAPP;else if(e===1)b=d("WAWapJid").DomainType.LID;else if((1&e)===0&&(128&e)!==0)b=d("WAWapJid").DomainType.HOSTED;else if(e===129)b=d("WAWapJid").DomainType.HOSTED_LID;else throw c("err")("decodeJidU - Invalid domain type encoding "+e);e=a.readUint8();a=Y(a);return d("WAWapJid").WapJid.createJidU(a,b,e)}function Z(a,b,c){c===void 0&&(c=!1);if(c)return a.readString(b);else return a.readByteArrayView(b)}function ua(a,b,c,d){d=new Array(d*2-c);for(var e=0;e<d.length-1;e+=2){var f=a.readUint8();d[e]=b[f>>>4];d[e+1]=b[f&15]}if(c){f=a.readUint8();d[d.length-1]=b[f>>>4]}return d.join("")}function va(){if(!G){var a=new Uint16Array(2);d("WACryptoDependencies").getCrypto().getRandomValues(a);G=String(a[0])+"."+String(a[1])+"-"}return""+G+fa++}function wa(a){switch(a.type){case"group":return a.groupJid;case"status":return d("WAJids").STATUS_JID;case"device":return a.deviceJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;default:a.type;return a.broadcastJid}}function xa(a){switch(a.type){case"group":return a.author;case"status":return a.author;case"broadcast":return a.author;default:a.type;return null}}function ya(a){return a.type==="status"||a.type==="group"||a.type==="broadcast"?$(a.author):H}function za(a){return $(wa(a))}function $(a){var b=d("WAJids").validateDomainJid(a);if(b!=null)return Aa(b);b=a.split("@");a=b[0];b=b[1];var e=null;if((b===aa||b===l||b===n||b===m||b===o||b===d("WAJids").HOSTED_LID_SUFFIX)&&a.indexOf(":")!==-1){var f=a.split(":");a=f[0];f=f[1];e=parseInt(f,10)}if(b===n){f=a.split("-");var g=f[0];f=f[1];return d("WAWapJid").WapJid.createInteropJid(f,e,parseInt(g,10))}else if(b===l)return d("WAWapJid").WapJid.createFbJid(a,e);f=null;if(b===m)f=d("WAWapJid").DomainType.LID;else if(b===o){if(e!==99)throw c("err")("wid unexpected deviceId");f=d("WAWapJid").DomainType.HOSTED}else if(b===d("WAJids").HOSTED_LID_SUFFIX){if(e!==99)throw c("err")("lid invalid deviceId");f=d("WAWapJid").DomainType.HOSTED_LID}else f=d("WAWapJid").DomainType.WHATSAPP;return e!=null&&e!==0?d("WAWapJid").WapJid.createJidU(a,f,e):d("WAWapJid").WapJid.create(a,b)}function Aa(a){if(a==="s.whatsapp.net")return J;else if(a==="g.us")return I;else if(a==="newsletter")return K;else if(a==="call")return L;else return c("WAAssertUnreachable")(a)}function Ba(a){return $(a)}function Ca(a){return $(a)}function Da(a){return $(a)}function Ea(a){return $(a)}function Fa(a){return $(a)}function Ga(a){return $(a)}function Ha(a){if(a.jidType==="phoneDevice")return $(a.deviceJid);else if(a.jidType==="msgrDevice")return $(a.deviceJid);else if(a.jidType==="lidDevice")return $(a.deviceJid);else if(a.jidType==="phoneUser")return $(a.userJid);else if(a.jidType==="msgrUser")return $(a.userJid);else if(a.jidType==="lidUser")return $(a.userJid);else if(a.jidType==="group")return $(a.groupJid);else if(a.jidType==="status")return $(a.statusJid);else if(a.jidType==="call")return $(a.callJid);else if(a.jidType==="interopDevice")return $(a.deviceJid);else if(a.jidType==="interopUser")return $(a.userJid);else if(a.jidType==="newsletter")return $(a.newsletterJid);else if(a.jidType==="hosted")return $(a.hostedDeviceJid);else if(a.jidType==="hostedLid")return $(a.hostedLidDeviceJid);else if(a.jidType==="bot")return $(a.botJid);else{a.jidType;return $(a.broadcastJid)}}function Ia(a){return a}function Ja(a){return a.toString()}function Ka(a){return a}function La(a){return a}function Ma(a){return a==null?H:a}function Na(a){return a.toString()}function Oa(a){return d("WALongInt").longIntToDecimalString(a)}function Pa(a,b){b===void 0&&(b=4);a=a;var c=new Uint8Array(b);for(b=b-1;b>=0;b--)c[b]=a&255,a>>>=8;return c}g.DROP_ATTR=H;g.G_US=I;g.S_WHATSAPP_NET=J;g.STATUS_BROADCAST=t;g.NEWSLETTER=K;g.HOSTED=k;g.HOSTED_LID=ga;g.CALL=L;g.enableXMLFormat=a;g.WapNode=O;g.makeWapNode=b;g.wap=s;g.decodeAsString=e;g.makeStanza=P;g.encodeStanza=f;g.decodeStanza=ma;g.decodeStanzaDebug=na;g.generateId=va;g.extractToJid=wa;g.extractParticipantJid=xa;g.PARTICIPANT_JID=ya;g.TO_JID=za;g.JID=$;g.DOMAIN_JID=Aa;g.USER_JID=Ba;g.DEVICE_JID=Ca;g.GROUP_JID=Da;g.BROADCAST_JID=Ea;g.CALL_JID=Fa;g.NEWSLETTER_JID=Ga;g.TO_WAP_JID=Ha;g.STANZA_ID=Ia;g.SMAX_ID=Ja;g.CUSTOM_STRING=Ka;g.CALL_ID=La;g.MAYBE_CUSTOM_STRING=Ma;g.INT=Na;g.LONG_INT=Oa;g.BIG_ENDIAN_CONTENT=Pa}),98);
__d("WAParsableWapNode",["WABinary","WAJids","WALogger","WALongInt","WAParsableXmlNode","WASignalKeys","WATimeUtils","WAWap","WAWapJid","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){function b(b,c){var d;d=a.call(this,"XmppParsingFailure: "+b+": "+c)||this;d.name="XmppParsingFailure";d.parser=b;d.reason=c;return d}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.toString=function(){return"XmppParsingFailure: "+this.parser+": "+this.reason};return b}(babelHelpers.wrapNativeSuper(Error));a=function(a){function b(b,c){return a.call(this,b,c)||this}babelHelpers.inheritsLoose(b,a);var e=b.prototype;e.assertFromServer=function(){var a=this.attrString("from");a!==d("WAJids").WA_SERVER_JID_SUFFIX&&this["throw"]('to have "from"="s.whatsapp.net", but instead has "'+a+'"')};e.attrUserJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.botJid!=null)return c.botJid;else if(c.userJid==null)return this["throw"]('to have "'+a+'"={UserJid}, but instead has "'+b+'"');return c.userJid};e.attrPhoneUserJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.jidType==="phoneUser"?c.userJid:this["throw"]('to have "'+a+'"={PhoneUserJid}, but instead has "'+b+'"')};e.attrLidUserJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.jidType==="lidUser"?c.userJid:this["throw"]('to have "'+a+'"={LidUserJid}, but instead has "'+b+'"')};e.maybeAttrUserJid=function(a){return this.hasAttr(a)?this.attrUserJid(a):null};e.maybeAttrPhoneUserJid=function(a){return this.hasAttr(a)?this.attrPhoneUserJid(a):null};e.maybeAttrLidUserJid=function(a){return this.hasAttr(a)?this.attrLidUserJid(a):null};e.attrGroupJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.groupJid==null?this["throw"]('to have "'+a+'"={GroupJid}, but instead has "'+b+'"'):c.groupJid};e.maybeAttrGroupJid=function(a){return this.hasAttr(a)?this.attrGroupJid(a):null};e.attrChatJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.userJid!=null)return c.userJid;return c.groupJid!=null?c.groupJid:this["throw"]('to have "'+a+'"={ChatJid}, but instead has "'+b+'"')};e.attrPhoneChatJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.jidType==="phoneUser")return c.userJid;else if(c.jidType==="group")return c.groupJid;else return this["throw"]('to have "'+a+'"={ChatJid}, but instead has "'+b+'"')};e.attrDeviceJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.deviceJid!=null)return c.deviceJid;if(c.userJid!=null)return d("WAJids").defaultDeviceJidForUser(c.userJid);if(c.hostedDeviceJid!=null)return c.hostedDeviceJid;if(c.hostedLidDeviceJid!=null)return c.hostedLidDeviceJid;return c.botJid!=null?c.botJid:this["throw"]('to have "'+a+'"={DeviceJid}, but instead has "'+b+'"')};e.attrPhoneDeviceJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.jidType==="phoneDevice")return c.deviceJid;return c.jidType==="phoneUser"?d("WAJids").defaultPhoneDeviceJidForUser(c.userJid):this["throw"]('to have "'+a+'"={PhoneDeviceJid}, but instead has "'+b+'"')};e.attrLidDeviceJid=function(a){var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);if(c.jidType==="lidDevice")return c.deviceJid;return c.jidType==="lidUser"?d("WAJids").defaultLidDeviceJidForLidUserJid(c.userJid):this["throw"]('to have "'+a+'"={LidDeviceJid}, but instead has "'+b+'"')};e.attrDeviceId=function(a){a=this.attrInt(a);return d("WAJids").interpretAsDeviceId(a)};e.attrFromJidChat=function(){var a=this.attrJidWithType();switch(a.jidType){case"msgrUser":var b=a.userJid,e=d("WAJids").defaultDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"interopUser":b=a.userJid;e=d("WAJids").defaultDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"phoneUser":b=a.userJid;e=d("WAJids").defaultDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"lidUser":b=a.userJid;e=d("WAJids").defaultLidDeviceJidForLidUserJid(b);return{type:"device",chat:b,deviceJid:e,author:e};case"phoneDevice":b=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(b),deviceJid:b,author:b};case"msgrDevice":e=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(e),deviceJid:e,author:e};case"interopDevice":b=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(b),deviceJid:b,author:b};case"lidDevice":e=a.deviceJid;return{type:"device",chat:d("WAJids").extractUserJid(e),deviceJid:e,author:e};case"group":b=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return b==null?this["throw"]("expected to have participant JID for group"):{type:"group",chat:a.groupJid,groupJid:a.groupJid,author:b};case"broadcast":e=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return e==null?this["throw"]("expected to have participant JID for group"):{type:"broadcast",broadcastJid:a.broadcastJid,chat:d("WAJids").extractUserJid(e),author:e};case"hosted":b=a.hostedDeviceJid;return{type:"device",chat:d("WAJids").extractUserJid(b),deviceJid:b,author:b};case"hostedLid":e=a.hostedLidDeviceJid;return{type:"device",chat:d("WAJids").extractUserJid(e),deviceJid:e,author:e};case"call":d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["ParsableWapNode: attrFromJid() is called with ",""])),a.callJid);throw c("err")("ParsableWapNode: attrFromJid() does not support CallJid");default:a.jidType;return this["throw"]("attrFromJidChat should not be used with jid of type "+a.jidType)}};e.attrFromJidPhoneChat=function(){var a=this.attrJidWithType();switch(a.jidType){case"phoneUser":var b=a.userJid,e=d("WAJids").defaultPhoneDeviceJidForUser(b);return{type:"device",chat:b,deviceJid:e,author:e};case"phoneDevice":b=a.deviceJid;return{type:"device",chat:d("WAJids").extractPhoneUserJid(b),deviceJid:b,author:b};case"group":e=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return e==null?this["throw"]("expected to have participant JID for group"):{type:"group",chat:a.groupJid,groupJid:a.groupJid,author:e};case"broadcast":b=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return b==null?this["throw"]("expected to have participant JID for group"):{type:"broadcast",broadcastJid:a.broadcastJid,chat:d("WAJids").extractPhoneUserJid(b),author:b};case"call":d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["ParsableWapNode: attrFromJid() is called with ",""])),a.callJid);throw c("err")("ParsableWapNode: attrFromJid() does not support CallJid");default:a.jidType;return this["throw"]("attrFromJidChat should not be used with jid of type "+a.jidType)}};e.attrFromPhoneJid=function(){var a=this.attrJidWithType();if(a.jidType==="status"){a=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return a==null?this["throw"]("to have participant for status msg"):{type:"status",author:a}}else return this.attrFromJidPhoneChat()};e.attrFromJid=function(){var a=this.attrJidWithType();if(a.jidType==="status"){var b=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return b==null?this["throw"]("to have participant for status msg"):{type:"status",author:b}}if(a.jidType==="newsletter")return{type:"newsletter",newsletterJid:a.newsletterJid};if(a.jidType==="hosted")return{type:"hosted",hostedDeviceJid:a.hostedDeviceJid};return a.jidType==="hostedLid"?{type:"hostedLid",hostedLidDeviceJid:a.hostedLidDeviceJid}:this.attrFromJidChat()};e.attrJidWithType=function(a){a===void 0&&(a="from");var b=this.attrString(a),c=d("WAJids").interpretAndValidateJid(b);return c.jidType==="unknown"?this["throw"]('to have "'+a+'"={Jid}, but instead has "'+b+'"'):c};e.attrWapJid=function(a){a===void 0&&(a="from");a=this.attrString(a);var b=d("WAJids").interpretAndValidateJid(a);return b.jidType==="unknown"?d("WAWapJid").WapJid.create(null,a):d("WAWap").JID(d("WAJids").extractFromJid(b))};e.attrLongInt=function(a){a=this.attrString(a);return d("WALongInt").decimalStringToLongInt(a)};e.attrTime=function(a){return d("WATimeUtils").castToUnixTime(this.attrInt(a))};e.attrFutureTime=function(a){a=this.attrInt(a);return d("WATimeUtils").futureUnixTime(a)};e.contentString=function(){if(this.hasChildren())return this["throw"]("to have string content, but has children instead");else if(this.hasContent()){var a=new(d("WABinary").Binary)(this.contentBytes());return a.readString(a.size())}else return this["throw"]("to have content")};e.decodeAsString=function(a){return d("WAWap").decodeAsString(a)};e.contentSerializedPubKey=function(){if(this.hasContent())return d("WASignalKeys").serializeIdentity(this.contentBytes());else return this["throw"]("to have content")};e.createParseError=function(a){return new j(this.name(),"expected <"+this.tag()+"> "+a)};e["throw"]=function(a){throw this.createParseError(a)};return b}(d("WAParsableXmlNode").ParsableXmlNode);g.XmppParsingFailure=j;g.ParsableWapNode=a}),98);
__d("WADeprecatedWapParser",["WAParsableWapNode","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.parse=function(a){a=new(d("WAParsableWapNode").ParsableWapNode)(this.$1,a);try{return{success:this.$2(a)}}catch(a){if(a instanceof d("WAParsableWapNode").XmppParsingFailure)return{error:a};else throw a}};b.parseOrThrow=function(a){a=this.parse(a);if(a.error)throw c("err")(String(a.error));return a.success};return a}();g["default"]=a}),98);
__d("WAAckParser",["WADeprecatedWapParser","WAJids"],(function(a,b,c,d,e,f,g){"use strict";b=new(c("WADeprecatedWapParser"))("ack",function(a){a.assertTag("ack");return{id:a.attrString("id"),ts:a.maybeAttrString("t"),"class":a.attrString("class"),type:a.maybeAttrString("type"),from:a.attrJidWithType(),participant:a.hasAttr("participant")?a.attrDeviceJid("participant"):null,recipient:a.hasAttr("recipient")?a.attrUserJid("recipient"):null}});function a(a,b){return a.id===b.id&&(b["class"]===void 0||a["class"]===b["class"])&&(b.type===void 0||a.type===b.type)&&(b.from===void 0||h(a.from,b.from))&&(b.participant===void 0||a.participant===b.participant)&&(b.recipient===void 0||a.recipient===b.recipient)&&(b.ts===void 0||a.ts===b.ts)}function h(a,b){if(d("WAJids").extractFromJid(a)===b)return!0;if(a.userJid!=null)return d("WAJids").defaultDeviceJidForUser(a.userJid)===b;if(a.deviceJid!=null){a=a.deviceJid;return d("WAJids").extractDeviceId(a)===0&&d("WAJids").extractUserJid(a)===b}return!1}g.AckParser=b;g.ackMatchesTemplate=a;g.fromJidsAreEqual=h}),98);
__d("WAArrayBufferUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(h||(h=b("Promise")))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var i=8388607;function f(a,b){a=new Uint8Array(a);if(b>i)throw c("err")("Divisor is too big");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function j(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function k(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return l(a,b)}function l(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=j;g.arrayBuffersEqualUNSAFE=k;g.uint8ArraysEqualUNSAFE=l}),98);
__d("WAArrayGroupBy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Map();for(var d=0;d<a.length;d++){var e=b(a[d]),f=c.get(e);f==null?c.set(e,[a[d]]):f.push(a[d])}return Array.from(c.entries())}f.groupBy=a}),66);
__d("WAArrayUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a}function a(a,b){var c=a.pop();b<a.length&&(a[b]=c)}function* b(a,b){for(var c=0;c<a.length;c+=b)yield a.slice(c,c+b)}function c(a,b){return h(a,b,g)}function h(a,b,c){var d=new Map();for(a of a){var e,f=b(a);e=(e=d.get(f))!=null?e:[];e.push(c(a));d.set(f,e)}return d}f.removeIndexWithoutPreservingOrder=a;f.peekEvery=b;f.groupBy=c;f.groupByAndMap=h}),66);
__d("WAAsyncSleep",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b===void 0&&(b=200),c===void 0&&(c=200),a>0&&a%b===0&&(yield i(c))});return h.apply(this,arguments)}function i(a){return new(g||(g=b("Promise")))(function(b){return setTimeout(b,a)})}f.asyncSleepAfterGivenLoopIteration=a;f.asyncSleep=i}),66);
__d("WARetryPromise",["Promise","WAAbortError","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return new(h||(h=b("Promise")))(function(f,g){var i=0,j,k=!1;if(e){var l=function(){e.removeEventListener("abort",l),k=!0,j!=null&&clearTimeout(j),g(new(d("WAAbortError").AbortError)())};if(e.aborted){l();return}e.addEventListener("abort",l)}function m(){var d=!1,e=!1;j=null;try{var l=a({retry:function(a){if(k||e)return;d=!0;i++;if(a==null)return m();j=setTimeout(m,a)},failCount:i});if(!(l instanceof(h||(h=b("Promise")))))throw c("err")("TypeError: task must return a promise");l.then(function(a){if(k||d)return;e=!0;f(a)})["catch"](function(a){if(k||d)return;e=!0;g(a)})}catch(a){if(k||d)return;g(a)}}m()})}g["default"]=a}),98);
__d("WARetryableError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){var c;c=a.call(this,"see error at this.source")||this;c.source=b;return c}babelHelpers.inheritsLoose(b,a);return b}(d("WACustomError").customError("RetryableError"));g["default"]=a}),98);
__d("WABackoff",["Promise","WARetryPromise","WARetryableError","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i=Object.freeze({timeoutIncludesTaskDuration:!0});function a(a,d){a=babelHelpers["extends"]({},i,a);var e=a.signal,f=a.timeoutIterator,g=a.timeoutIncludesTaskDuration;return c("WARetryPromise")(function(a){var e=a.retry,i=a.failCount;return new(h||(h=b("Promise")))(function(a,j){var k=Date.now();try{d(l,i).then(a)["catch"](m)}catch(a){m(c("getErrorSafe")(a));return}function l(a){return(h||(h=b("Promise"))).reject(new(c("WARetryableError"))(a))}function m(a){if(!(a instanceof c("WARetryableError")))return void j(a);var b=f.next();if(b.done)return void j(a.source);a=Date.now()-k;a=g?Math.max(b.value-a,0):b.value;e(a)}})},e)}g.defaults=i;g.backoff=a}),98);
__d("WABatcher",["Promise","WAResolvable","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,d){var e=a.delayMs,f=a.maxSize,g=null;function i(a){g&&g.args===a&&(g=null);return d(a)}var j=function(){if(g==null)return(h||(h=b("Promise"))).resolve();var a=g;g=null;clearTimeout(a.timer);a.run();return a.batchPromise};a=function(a){if(g)g.args.push(a);else{var d,k=[a];a=new(h||(h=b("Promise")))(function(a){d=function(){return void a(k)}}).then(i);var l=d;g={args:k,batchPromise:a,run:l,timer:setTimeout(l,e)}}if(g==null)throw c("err")("activeBatch should not be null here");a=g;l=a.args;a=a.batchPromise;var m=l.length-1;f!=null&&l.length>=f&&void j();return a.then(function(a){return a[m]})};return{accept:a,runActiveBatch:j}}function a(a,b){var c=i(a,b);return function(a){return c.accept(a)}}function e(a){var e=[],f=new(d("WAResolvable").Resolvable)(),g=function(c){if(e.length===0)return(h||(h=b("Promise"))).resolve(new Map());var g=e,i=f;e=[];f=new(d("WAResolvable").Resolvable)();return(h||(h=b("Promise"))).resolve(a(g,c)).then(function(a){i.resolve(a);return a})},i=function(a){e.push(a);return f.promise.then(function(b){b=b.get(a);if(b==null)throw c("err")("This should not happen because we just added it to the batch");return b})};return{accept:i,runActiveBatch:g}}g.createSimpleBatcher=i;g.batch=a;g.createBatcher=e}),98);
__d("WABitArray",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=8;a=function(){function a(a){if(a<=0)throw c("err")("BitArray:numBits should be positive");this.$1=a;this.$2=new Uint8Array(Math.ceil(this.$1/h))}var b=a.prototype;b.get=function(a){a=this.$3(a);var b=a[0];a=a[1];return Boolean(this.$2[b]>>a&1)};b.set=function(a){a=this.$3(a);var b=a[0];a=a[1];this.$2[b]|=1<<a};b.unset=function(a){a=this.$3(a);var b=a[0];a=a[1];this.$2[b]&=~(1<<a)};b.toggle=function(a){a=this.$3(a);var b=a[0];a=a[1];this.$2[b]^=1<<a};b.clear=function(){this.$2=new Uint8Array(Math.ceil(this.$1/h))};b.toArray=function(){var a=[];for(var b=0;b<this.$1;b++)a.push(this.get(b));return a};b.toString=function(){return this.toArray().map(function(a){return a?"1":"0"}).join("")};b.toNumber=function(){return parseInt(this.toString(),2)};b.$3=function(a){if(a<0||a>=this.$1)throw c("err")("BitArray:index out of bounds");var b=Math.floor(a/h);a=a-b*h;return[b,a]};return a}();g["default"]=a}),98);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("WAErrors",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=(a=d("WACustomError")).customError("BufferTooLarge",!1);c=a.customError("Disconnected",!1);e=a.customError("Offline",!1,c);f=a.customError("MaxRetries",!1);d=a.customError("Aborted",!1);g.BufferTooLargeError=b;g.Disconnected=c;g.Offline=e;g.MaxRetries=f;g.Aborted=d}),98);
__d("WANotifyConnectionChangeFactory",[],(function(a,b,c,d,e,f){"use strict";var g=15e3;function a(a,b,c){c===void 0&&(c=g);var d={timeoutID:null,connectionStatus:"disconnected",optimismLevel:"optimist"},e=function(){var a=d.optimismLevel,e=d.connectionStatus;a==="optimist"?d.timeoutID=setTimeout(function(){d.optimismLevel="realist",b(e)},c):b(e)};return function(c){d.connectionStatus=c,c==="disconnected"?e():c==="in_handshake"?e():(c,d.timeoutID!=null&&(clearTimeout(d.timeoutID),d.timeoutID=null),b(c)),a(c)}}f.notifyConnectionChangeFactory=a}),66);
__d("WAPromiseBackoffs",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===0)return 0;var c=o(b.algo);for(var d=1;d<a;d++)c();return j(b,c())}function i(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=o(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=j(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function d(a){var c=i(a);return function(a){return new(h||(h=b("Promise")))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function j(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function k(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function l(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function m(a){var b=a.delay;return function(){return b}}function n(a){var b=a.toMs;a=a.backoff;var c=o(a);return function(){return b(c())}}function o(a){switch(a.type){case"fibonacci":return k(a);case"exponential":return l(a);case"constant":return m(a);case"adjust":return n(a);default:a;throw c("err")("makeTimeFunc unrecognized backoff "+a.type)}}g.getDelay=a;g.createTimer=i;g.createPromiseTimer=d}),98);
__d("WAPromiseRetryLoop",["Promise","WALogger","WAPromiseBackoffs","WAPromiseDelays","WAResolvable","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p;a=function(){function a(a){var b=this;this.$2=new(d("WAResolvable").Resolvable)();this.$3=null;this.$4=null;this.$5=0;this.$6=new(d("WAResolvable").Resolvable)();this.endWithValue=function(a){b.$5++,b.$2.resolve(a)};this.$1=a}var e=a.prototype;e.resetTimeoutAfter=function(a){this.$4=Date.now()+a};e.cancelReset=function(){this.$4=null};e.reset=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""])),this.$1.name);this.$5++;this.$6.resolve();this.$7()};e.start=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: starting ",""])),this.$1.name);this.$5!==0&&d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop was called several times. You may have race conditions"])));this.$5++;this.$6.resolve();this.$7()};e.pauseOnNextIteration=function(){d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: pause requested on next iteration"]))),this.$6.resolve(),this.$6=new(d("WAResolvable").Resolvable)()};e.unpause=function(){this.$6.resolveWasCalled()||d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: loop unpaused"]))),this.$6.resolve()};e.$7=function(){var a=this,c=this.$1,e=this.$5,f=d("WAPromiseBackoffs").createTimer(this.$1.timer);f();var g=function(){if(a.$1.isPauseEnabled!==!0)return(p||(p=b("Promise"))).resolve();a.$6.resolveWasCalled()||d("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: loop paused - waiting for unpause"])));return a.$6.promise},h=function(){if(a.$2.resolveWasCalled())return;if(e!==a.$5)return;var b=Date.now();a.$3=c.code(a.endWithValue).then(function(){if(a.$2.resolveWasCalled())return;var e=c.resetDelay;(e!==void 0&&Date.now()>=b+e||a.$4!=null&&a.$4<=Date.now())&&(d("WALogger").LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""])),c.name),f=d("WAPromiseBackoffs").createTimer(a.$1.timer));a.$4=null;e=f();d("WALogger").LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: retrying "," in ","ms"])),c.name,e);return d("WAPromiseDelays").delayMs(e).then(g).then(h)});return a.$3};this.$3=(p||(p=b("Promise"))).resolve().then(h)};e.promise=function(){var a=this;if(this.$2.resolveWasCalled())return this.$2.promise;return!this.$3?(p||(p=b("Promise"))).reject(c("err")("PromiseRetryLoop "+this.$1.name+" had promise() called before start()")):(p||(p=b("Promise"))).race([this.$2.promise,this.$3.then(function(){return a.$2.promise})])};return a}();g.PromiseRetryLoop=a}),98);
__d("WASmaxInPingsEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={validators:[d("WAJids").validateDomainJid,d("WAJids").validateUserJid],typeName:"DomainJid|UserJid"};g.DOMAINJID_USERJID=a}),98);
__d("WADeepEquals",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a===b)return!0;if(!a||!b||typeof a!=="object"&&typeof b!=="object")return!1;var c=Array.isArray(a),d=Array.isArray(b);if(c!==d)return!1;d=!0;if(c){c=a.length;if(c!==b.length)return!1;for(var e=0;d&&e<c;e++)d=g(a[e],b[e]);return d}c=Object.keys(a);for(e=0;d&&e<c.length;e++){var f=c[e];d=b.propertyIsEnumerable(f)&&g(a[f],b[f])}return d&&Object.keys(b).length===c.length}f.deepEqual=g}),66);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";var g=/^[0-9A-Za-z-]{1,32}$/;function a(a){return a}function b(a){return g.test(a)?a:null}f.toStanzaId=a;f.validateCallId=b}),66);
__d("WASmaxParseUtils",["WABase64","WABinary","WACryptoUtils","WADeepEquals","WAHasProperty","WAResultOrError","WAStanzaUtils","WAWapJid","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAResultOrError").makeResult();function a(a,b){return a.tag!==b?I(a,"to be <"+b+">"):h}function i(a,b){return!J(a,b)?I(a,'to have attribute "'+b+'"'):K(a,a.attrs[b])}function j(a,b,c,e){var f=i(a,b);if(!f.success)return f;c=c(f.value);return c!=null?d("WAResultOrError").makeResult(c):I(a,'to have "'+b+'"={'+e+'}, but instead has "'+f.value+'"')}function k(a,b,c){var e=C(a);if(!e.success)return e;b=b(e.value);return b!=null?d("WAResultOrError").makeResult(b):I(a,"to have "+c+' content, but instead has "'+e.value+'"')}function b(a,b,c){var d=i(a,b);if(!d.success)return d;else if(d.value!==c)return I(a,'to have "'+b+'"="'+c+'", but instead has "'+d.value+'"');return h}function e(a,b){return j(a,b,d("WAStanzaUtils").toStanzaId,"stanzaID")}function f(a,b){return j(a,b,d("WAStanzaUtils").validateCallId,"callID")}function l(a,b){return j(a,b,L,"integer")}function m(a,b,c,e){var f=l(a,b);if(!f.success)return f;f=f.value;if(c!==void 0&&f<c)return I(a,'to have "'+b+'"={at least '+c+"} but has value "+f);else if(e!==void 0&&f>e)return I(a,'to have "'+b+'"={at most '+e+"} but has value "+f);return d("WAResultOrError").makeResult(f)}function n(a){var b=a.content;return b instanceof Uint8Array?I(a,"to have children"):d("WAResultOrError").makeResult(b)}function o(a,b){var c=n(a);if(!c.success)return c;c=c.value;if(c==null)return h;var e=null;for(var f=0;f<c.length;f++){var g=c[f];if(g.tag===b){if(e!=null)return I(a,"to have 1 child <"+b+">, but found more than 1");e=g}}return d("WAResultOrError").makeResult(e)}function p(a,b,c){a=o(a,b);if(!a.success)return a;return a.value==null?h:c(a.value)}function q(a,b,c){c=p(a,b,c);if(!c.success)return c;c=c.value;return c==null?I(a,"to have 1 child <"+b+">, but found 0"):d("WAResultOrError").makeResult(c)}function r(a,b){var c=o(a,b);if(!c.success)return c;return c.value==null?I(a,"to have 1 child <"+b+">, but found 0"):d("WAResultOrError").makeResult(c.value)}function s(a,b,c,e,f){a=M(a,b,c,e);if(!a.success)return a;b=[];for(c=0;c<a.value.length;c++){e=f(a.value[c]);if(!e.success)return e;b.push(e.value)}return d("WAResultOrError").makeResult(b)}function t(a,b,c,e,f){a=M(a,b,c,e);if(!a.success)return a;b=a.value.length;for(c=0;c<b;c++){e=f(a.value[c]);if(!e.success)return e}return d("WAResultOrError").makeResult(b)}function u(a,b,c){b=s(a,b,0,Infinity,c);if(!b.success)return b;for(c=0;c<b.value.length;c++)if(!d("WADeepEquals").deepEqual(b.value[0],b.value[c]))return I(a,"to have homogeneous children, but found two children that are not equal");return b}function v(a,b,c){a=u(a,b,c);return!a.success?a:d("WAResultOrError").makeResult(a.value.length)}function w(a,b,c,d,e){return J(b,c)?a(b,c,d,e):h}function x(a,b,c,e){if(e==null)return h;a=w(a,b,c);if(!a.success)return a;if(a.value===e)return d("WAResultOrError").makeResult(e);return a.value==null?h:I(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function y(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?d("WAResultOrError").makeResult(e):I(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function z(a,b,c){a=a(b);if(!a.success)return a;return a.value===c?d("WAResultOrError").makeResult(c):I(b,'to have content "'+c+'", but instead has "'+a.value+'"')}function A(a,b,c){var e=i(a,b);if(!e.success)return e;var f=c[e.value];if(f!=null)return d("WAResultOrError").makeResult(f);f=Object.values(c).join("|");return I(a,'to have "'+b+'"={'+f+'}, but instead has "'+e.value+'"')}function B(a,b){var c=C(a);if(!c.success)return c;var e=b[c.value];if(e!=null)return d("WAResultOrError").makeResult(e);e=Object.values(b).join("|");return I(a,'to have content "'+e+'", but instead has "'+c.value+'"')}function C(a){var b=D(a);if(!b.success)return b;else try{b=new(d("WABinary").Binary)(b.value);b=b.readString(b.size());return d("WAResultOrError").makeResult(b)}catch(b){return I(a,"to have string content, but run into decoding error: "+c("getErrorSafe")(b).message)}}function D(a){var b=a.content;if(b==null)return I(a,"to have content");else if(Array.isArray(b))return I(a,"to have content, but has children instead");else return d("WAResultOrError").makeResult(b)}function E(a,b){var c=D(a);if(!c.success)return c;return d("WACryptoUtils").uint8ArraysEqual(c.value,b)?d("WAResultOrError").makeResult(b):I(a,'to have content ":binary:'+d("WABase64").encodeB64(b)+'", but instead has ":binary:'+d("WABase64").encodeB64(c.value)+'"')}function F(a,b,c){var e=a.content;if(e==null)if(b===void 0||b<1)return d("WAResultOrError").makeResult(new Uint8Array([]));else return I(a,"to have content");else if(Array.isArray(e))return I(a,"to have content, but has children instead");else{var f=e.length;if(b!==void 0&&f<b)return I(a,"to have binary content at least "+b+" bytes but has "+f+" bytes");else if(c!==void 0&&f>c)return I(a,"to have binary content at most "+c+" bytes but has "+f+" bytes");return d("WAResultOrError").makeResult(e)}}function G(a){return k(a,L,"integer")}function H(a){return a}function I(a,b){return d("WAResultOrError").makeError("expected <"+a.tag+">: "+b)}function J(a,b){return c("WAHasProperty")(a.attrs,b)}function K(a,b){if(b instanceof d("WAWapJid").WapJid)return d("WAResultOrError").makeResult(b.toString());return typeof b==="string"?d("WAResultOrError").makeResult(b):I(a,"decodeAsString: attribute is "+typeof b+" not a string: "+String(b))}function L(a){a=parseInt(a,10);return Number.isNaN(a)?null:a}function M(a,b,c,e){var f=n(a);if(!f.success)return f;f=f.value;if(f==null)if(c!==0)return I(a,"to have at least "+c+" <"+b+"> children, but found 0");else return d("WAResultOrError").makeResult([]);var g=[];for(var h=0;h<f.length;h++){var i=f[h];i.tag===b&&g.push(i)}i=g.length;if(i<c)return I(a,"to have at least "+c+" <"+b+"> children, but found "+i);else if(i>e)return I(a,"to have at most "+e+" <"+b+"> children, but found "+i);return d("WAResultOrError").makeResult(g)}var N={};function O(a,b,c){var d=b.map(function(a,b){return a+": "+c[b].error});return I(a,["to match any of following mixins: "+b.join(", ")+", but all mixins failed."].concat(d).join(" "))}g.voidSuccess=h;g.assertTag=a;g.attrString=i;g.attrValidate=j;g.contentValidate=k;g.assertAttr=b;g.attrStanzaId=e;g.attrCallId=f;g.attrInt=l;g.attrIntRange=m;g.maybeChildren=n;g.optionalChild=o;g.optionalChildWithTag=p;g.childWithTag=q;g.flattenedChildWithTag=r;g.mapChildrenWithTag=s;g.countChildrenWithTag=t;g.mapHomogeneousChildrenWithTag=u;g.countHomogeneousChildrenWithTag=v;g.optional=w;g.optionalLiteral=x;g.literal=y;g.literalContent=z;g.attrStringEnum=A;g.contentStringEnum=B;g.contentString=C;g.contentBytes=D;g.contentLiteralBytes=E;g.contentBytesRange=F;g.contentInt=G;g.identity=H;g.errorMessage=I;g.emptyObject=N;g.errorMixinDisjunction=O}),98);
__d("WASmaxParseJid",["WAJids","WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateUserJid,"UserJid")}function b(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateLidUserJid,"LidUserJid")}function c(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateDeviceJid,"DeviceJid")}function e(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateGroupJid,"GroupJid")}function f(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateCallJid,"CallJid")}function h(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateDomainJid,"DomainJid")}function i(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateBroadcastJid,"BroadcastJid")}function j(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateStatusJid,"StatusJid")}function k(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateNewsletterJid,"NewsletterJid")}function l(a,b,c){var e=d("WASmaxParseUtils").attrString(a,b);if(!e.success)return e;var f=c.validators;c=c.typeName;for(var g=0;g<f.length;g++){var h=f[g](e.value);if(h!=null)return d("WAResultOrError").makeResult(h)}return d("WASmaxParseUtils").errorMessage(a,'to have "'+b+'"={'+c+'}, but instead has "'+e.value+'"')}function m(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?a:d("WASmaxParseUtils").errorMessage(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function n(a,b,c,e){a=d("WASmaxParseUtils").optional(a,b,c);if(!a.success)return a;return a.value==null||a.value===e?a:d("WASmaxParseUtils").errorMessage(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}g.attrUserJid=a;g.attrLidUserJid=b;g.attrDeviceJid=c;g.attrGroupJid=e;g.attrCallJid=f;g.attrDomainJid=h;g.attrBroadcastJid=i;g.attrStatusJid=j;g.attrNewsletterJid=k;g.attrJidEnum=l;g.literalJid=m;g.optionalLiteralJid=n}),98);
__d("WASmaxParseReference",["WAHasProperty","WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){b=j(b,c);if(!b.success)return l(b);a=a(b.value,c[c.length-1],d,e);return!a.success?l(a):a}function a(a,b,c,e,f){return k(b,c)?h(a,b,c,e,f):d("WASmaxParseUtils").voidSuccess}function i(a,b){return h(d("WASmaxParseUtils").attrString,a,b)}function b(a,b){return k(a,b)?i(a,b):d("WASmaxParseUtils").voidSuccess}function e(a,b){a=j(a,b);if(!a.success)return l(a);b=d("WASmaxParseUtils").contentString(a.value);return!b.success?l(b):b}function j(a,b){var c=b.length;a=a;for(var e=0;e<c-1;e++){var f=b[e];f=d("WASmaxParseUtils").flattenedChildWithTag(a,f);if(!f.success)return f;a=f.value}return d("WAResultOrError").makeResult(a)}function k(a,b){a=j(a,b);return a.success&&c("WAHasProperty")(a.value.attrs,b[b.length-1])}function l(a){return d("WAResultOrError").makeError("in the reference, "+a.error)}g.attrFromReference=h;g.optionalAttrFromReference=a;g.attrStringFromReference=i;g.optionalAttrStringFromReference=b;g.contentStringFromReference=e}),98);
__d("WASmaxInPingsClientResponseServerResponse",["WAResultOrError","WASmaxInPingsEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInPingsEnums").DOMAINJID_USERJID);if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").attrInt(a,"t");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:e.value,t:b.value})}g.parseClientResponseServerResponse=a}),98);
__d("WASmaxJsx",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";g.smax=d("WAWap").wap}),98);
__d("WASmaxMixins",["WAArrayBufferUtils","WAWapJid"],(function(a,b,c,d,e,f,g){"use strict";var h="smax$any";function i(a,b){j(a,b);k(a,b);b.content instanceof Uint8Array?m(a,b.content):b.content!=null&&n(a,b.content);return a}function a(a,b,c,d){return c!=null?a(b,c,d):b}function j(a,b){a=a.tag;b=b.tag;if(b===h)return;if(a!==b)throw new Error("tag mismatch: "+a+" != "+b)}function k(a,b){var c=a.attrs,d=b.attrs;Object.keys(d).forEach(function(a){var b=d[a],e=c[a];if(b!=null&&e!=null){if(l(b,e))return;throw new Error("conflict for key: "+a)}c[a]=b})}function l(a,b){if(typeof a==="string"&&typeof b==="string")return a===b;return a instanceof d("WAWapJid").WapJid&&b instanceof d("WAWapJid").WapJid?a.toString()===b.toString():!1}function m(a,b){var c=a.content;if(c instanceof Uint8Array){if(!d("WAArrayBufferUtils").uint8ArraysEqualUNSAFE(c,b))throw new Error("elementValue mismatch: bytes dose not equal");return}if(c!=null)throw new Error("elementValue mismatch: destination has children");a.content=b}function n(a,b){var c=a.content;if(c instanceof Uint8Array)throw new Error("children mismatch: destination has element value");if(c==null||c.length===0){a.content=b;return}if(!o(c,b))throw new Error("children mismatch: child counts are not compatible");var d=[],e=Array.from(c);b.forEach(function(a){var b=e.findIndex(function(b){return b.tag===a.tag});if(b===-1)d.push(a);else{b=e.splice(b,1);b=i(b[0],a);d.push(b)}});e.forEach(function(a){return d.push(a)});a.content=d}function o(a,b){b=p(b);a=p(a);var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d],f=b[e];e=a[e];if(f!=null&&e!=null&&f!==e)return!1}return!0}function p(a){return a.reduce(function(a,b){b=b.tag;var c=a[b];a[b]=c==null?1:c+1;return a},{})}g.mergeStanzas=i;g.optionalMerge=a}),98);
__d("WASmaxOutPingsClientWellFormedToMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientWellFormedToMixin=a}),98);
__d("WASmaxOutPingsClientRequest",["WASmaxJsx","WASmaxOutPingsClientWellFormedToMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutPingsClientWellFormedToMixin").mergeClientWellFormedToMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get",xmlns:"w:p"}));return a}g.makeClientRequest=a}),98);
__d("WAComms",["Promise","WAArrayUtils","WABaseGlobals","WAErrors","WALogger","WANotifyConnectionChangeFactory","WAPromiseRetryLoop","WAResolvable","WAShiftTimer","WASmaxInPingsClientResponseServerResponse","WASmaxOutPingsClientRequest","WASmaxParseUtils","WATimeUtils","WAWap","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P=null,Q=null,R=1,S=0,T=function(){function a(a,b,c){var e=this;this.nextSocketId=1;this.pendingIqs=new Map();this.ackHandlers=[];this.pendingSmaxStanzas=new Map();this.$2=new(d("WAResolvable").Resolvable)();this.socketAbortController=null;this.activePing=null;this.$3=new Set();this.socketId=S;this.socket=null;this.softCloseSocket=null;this.handleStanza=function(a,b,c){var f=d("WASmaxParseUtils").attrString(a,"id");if(f.success&&a.tag!=="receipt"){f=f.value;var g=e.pendingSmaxStanzas.get(f);if(g){e.pendingSmaxStanzas["delete"](f);g.resolve(a);e.maybeScheduleHealthCheck();return"NO_ACK"}}f=$(a);if(f!=null){g=e.pendingIqs.get(f);g?(e.pendingIqs["delete"](f),g.resolve(a),e.maybeScheduleHealthCheck()):(d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq with id ",""])),f),d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq"]))))}else if(a.tag==="ack")e.handleAck(a);else return a.tag==="failure"&&e.config.shouldBlockReceivingUntilSuccess?e.$1(a,b,c):e.$2.promise.then(function(){return e.$1(a,b,c)});return"NO_ACK"};this.healthCheckTimer=new(d("WAShiftTimer").ShiftTimer)(function(){if(!e.socketId)return;void e.sendPing()});this.deadSocketTimer=new(d("WAShiftTimer").ShiftTimer)(function(a){if(a!==e.socketId)return;d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," expired"])),a);e.softCloseSocket&&e.softCloseSocket()});this.$1=a;this.onConnectionChange=d("WANotifyConnectionChangeFactory").notifyConnectionChangeFactory((a=b.handlers.onConnectionChange)!=null?a:function(){},(a=b.handlers.onOptimisticConnectionChange)!=null?a:function(){});this.gzipInflate=c;this.config=b;this.socketLoop=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"MainSocketLoop",code:W,timer:(a=b.socketReconnectBackoffAlgo)!=null?a:{jitter:.1,max:b.maxSocketLoopWaitTime,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4,isPauseEnabled:b.isPauseEnabled===!0})}var e=a.prototype;e.filterPending=function(a){var b=[];function c(c){a(c)&&b.push(c)}this.pendingIqs.forEach(c);this.ackHandlers.forEach(c);this.pendingSmaxStanzas.forEach(c);return b};e.sendPendingStanza=function(a){a.cleanup==null||a.cleanup(),a.cleanup=void 0,void this.callStanza(a.stanza)};e.maybeSendPendingStanza=function(a){if(a.attempt>=this.config.maxRetries){var b,c;(b=(c=this.config.handlers).onDropStanza)==null||b.call(c,a);a.cleanup==null||a.cleanup();a.cleanup=void 0;this.removeHandler(a,"max-retries")}else if(this.socket){a.attempt+=1;this.sendPendingStanza(a);return}else d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will resend stanza when socket opens"])))};e.callStanzaAsync=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield this.callStanza(a,b));return a});function c(b,c){return a.apply(this,arguments)}return c}();e.callStanza=function(a,b){a=this.castStanza(a,b);this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId);this.healthCheckTimer.cancel();return a};e.castStanzaAsync=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.castStanza(a));return a});function c(b){return a.apply(this,arguments)}return c}();e.castStanza=function(a,c){var e=this;try{var f,g;f=(f=(g=this.config.handlers).onBeforeCastStanzaForE2E)==null?void 0:f.call(g,a,c);if(f!=null){d("WALogger").DEV_XMPP(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched:\n",". We return mock response directly."],["Dropping stanza since onBeforeCastStanza matched:\\n",". We return mock response directly."])),a);d("WALogger").DEV_XMPP(m||(m=babelHelpers.taggedTemplateLiteralLoose(["--- Receive (via SMAX+E2E) ---\n",""],["--- Receive (via SMAX+E2E) ---\\n",""])),f);d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched. We return mock response directly."])));if(Array.isArray(f))return(O||(O=b("Promise"))).all(f.map(function(a){return(O||(O=b("Promise"))).resolve(e.handleStanza(a,e.socketId,S))}));else{this.handleStanza(f,this.socketId,S);return(O||(O=b("Promise"))).resolve()}}}catch(a){d("WALogger").DEV_XMPP(o||(o=babelHelpers.taggedTemplateLiteralLoose(["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\n",""],["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\\n",""])),a)}g=this.socketOrThrow("castStanza");try{d("WALogger").DEV_XMPP(p||(p=babelHelpers.taggedTemplateLiteralLoose(["--- Sending ---\n",""],["--- Sending ---\\n",""])),a);return g.sendFrame(d("WAWap").encodeStanza(a)).then(function(){e.config.handlers.onCastStanza==null||e.config.handlers.onCastStanza(a,c)})["catch"](function(a){d("WALogger").ERROR(q||(q=babelHelpers.taggedTemplateLiteralLoose(["castStanza async error ",""])),a).devConsole(a);if(a instanceof d("WAErrors").BufferTooLargeError)return(O||(O=b("Promise"))).reject(a)})}catch(a){d("WALogger").ERROR(r||(r=babelHelpers.taggedTemplateLiteralLoose(["castStanza error ",""])),a).devConsole(a)}return(O||(O=b("Promise"))).resolve()};e.socketOrThrow=function(a){var b=this.socket;if(b)return b;throw c("err")("Comms."+a+" called while no socket")};e.startHandlingRequests=function(){d("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Comms.startHandlingRequests"])));this.$2.resolve();return this.$2.promise.then(function(){})};e.parseAndHandleStanza=function(a,b){var c=this;a===this.socketId&&(this.deadSocketTimer.cancel(),Q&&(Q.resolve(),Q=null));var e=d("WAWap").decodeStanza(b,this.gzipInflate)["catch"](function(a){d("WALogger").ERROR(t||(t=babelHelpers.taggedTemplateLiteralLoose(["Failure parsing stanza!"]))).devConsole(b);throw a}).then(function(e){d("WALogger").DEV_XMPP(u||(u=babelHelpers.taggedTemplateLiteralLoose(["--- Receiving ---\n",""],["--- Receiving ---\\n",""])),e);c.config.handlers.onHandleStanza==null||c.config.handlers.onHandleStanza(e,a,b.byteLength);var f=c.activePing;if(f&&f.socketId===a&&f.stanzaId===$(e)){c.activePing=null;f.handler.resolve(e);c.maybeScheduleHealthCheck();return"NO_ACK"}return c.handleStanza(e,a,b.byteLength)}).then(function(b){if(a!==c.socketId)return;if(b==="CLOSE_SOCKET"){d("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[comms] job response is CLOSE_SOCKET"])));var e=c.socket;e&&e.close()}else b==="NO_ACK"||void c.castStanza(b);return"NO_ACK"});this.$3.add(e);e["finally"](function(){return void c.$3["delete"](e)})};e.handleAck=function(a){var b=this.ackHandlers,c=-1,e=null;while(!e&&++c<b.length)e=b[c].parseAndTest(a);if(e){var f=b[c];d("WAArrayUtils").removeIndexWithoutPreservingOrder(b,c);(c=(b=this.config.handlers).onHandleAck)==null||c.call(b,a);f.resolve(e);this.maybeScheduleHealthCheck()}else d("WALogger").WARN(w||(w=babelHelpers.taggedTemplateLiteralLoose(["handleAck: unrecognized ",""])),a)};e.removeHandler=function(a,c){c===void 0&&(c="disconnect");if(a.type==="iq"||a.type==="smax"){var e=a.stanza.attrs.id;if(!e||typeof e!=="string")return;if(a.type==="iq"&&!this.pendingIqs["delete"](e)||a.type==="smax"&&!this.pendingSmaxStanzas["delete"](e))return}else{a.type;e=this.ackHandlers.indexOf(a);if(e===-1)return;d("WAArrayUtils").removeIndexWithoutPreservingOrder(this.ackHandlers,e)}c==="disconnect"?a.resolve((O||(O=b("Promise"))).reject(new(d("WAErrors").Disconnected)())):c==="abort"?a.resolve((O||(O=b("Promise"))).reject(new(d("WAErrors").Aborted)())):a.resolve((O||(O=b("Promise"))).reject(new(d("WAErrors").MaxRetries)()))};e.maybeScheduleHealthCheck=function(){if(this.healthCheckTimer.isScheduled())return;if(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)return;var a=this.config.healthCheckInterval;a=Math.ceil(a*1e3*(1+Math.random()));this.healthCheckTimer.onOrBefore(a)};e.sendPing=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Z("sendPing");if(!a.socketId){d("WALogger").LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing when socket dead"])));return!1}if(a.activePing&&a.activePing.socketId===a.socketId){d("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing ping still pending"])));return!1}a.activePing&&a.activePing.handler.resolve();var b=d("WASmaxOutPingsClientRequest").makeClientRequest(),c=b.attrs.id;if(typeof c!=="string"){d("WALogger").ERROR(z||(z=babelHelpers.taggedTemplateLiteralLoose(["[comms] No stanzaId in ping request stanza"])));return!1}var e=new(d("WAResolvable").Resolvable)();a.activePing={socketId:a.socketId,stanzaId:c,handler:e};c=Date.now();void a.callStanza(b);e=(yield e.promise);var f=Date.now();if(e){e=d("WASmaxInPingsClientResponseServerResponse").parseClientResponseServerResponse(e,b);if(e.success){b=f-c;f=Math.round(b/2);b=d("WATimeUtils").castToUnixTime(e.value.t);e=d("WABaseGlobals").newClockSkewCalculation()?Math.round((c+f)/1e3-b):Math.round(Date.now()/1e3-b);a.config.handlers.onClockSkewUpdate==null||a.config.handlers.onClockSkewUpdate(e);return!0}}return!1});function a(){return c.apply(this,arguments)}return a}();return a}();function a(){return P}function e(a,b,c,d){d===void 0&&(d=!0);if(P)return;P=new T(a,b,c);d&&setTimeout(U,0)}function f(){var a=Z("stopComms");a.socketLoop.endWithValue();a.socket&&X();P=null}function aa(){var a=Z("closeSocketAndPreventRetry");a.socketLoop.endWithValue();a.socket&&(d("WALogger").LOG(A||(A=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndPreventRetry called"]))),X())}function ba(){var a=Z("closeSocketAndPause");a.socketLoop.pauseOnNextIteration();a.socket&&(d("WALogger").LOG(B||(B=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndPause called"]))),X())}function ca(){var a=Z("closeSocketAndResume");a.socketLoop.unpause();a.socket&&(d("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndResume called"]))),X())}function U(){Z("openSocketLoop").socketLoop.start()}function da(){d("WALogger").LOG(D||(D=babelHelpers.taggedTemplateLiteralLoose(["[comms] maybeResetSocketLoop"]))),V()||Z("maybeResetSocketLoop").socketLoop.reset()}function ea(){Z("forceResetSocketLoop").socketLoop.reset()}function fa(){var a,b=Z("socketAbortController");(a=b.socketAbortController)==null||a.abort();b.softCloseSocket==null||b.softCloseSocket()}function V(){var a;return!!((a=P)!=null&&a.socket)}function W(){var a=Z("socketLoopIteration"),b=a.nextSocketId++;d("WALogger").LOG(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opening"])),b);var c=function(){a.onConnectionChange("in_handshake")};a.config.handlers.onSocketLoopIteration==null||a.config.handlers.onSocketLoopIteration(a.socketAbortController);typeof AbortController==="function"&&(a.socketAbortController=new AbortController());return a.config.openChatSocket(c,(c=a.socketAbortController)==null?void 0:c.signal).then(function(c){if(c.success){var e=c.value;a.config.handlers.onSocketOpen==null||a.config.handlers.onSocketOpen();var f=new(d("WAResolvable").Resolvable)();d("WALogger").LOG(F||(F=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opened"])),b);a.socketId=b;a.socket=e;a.softCloseSocket=function(){a.softCloseSocket=null,a.socket&&a.config.shouldCloseStaleSocket&&(X(),a.socket=null),f.resolve()};a.socketLoop.resetTimeoutAfter(1e4);a.deadSocketTimer.cancel();a.maybeScheduleHealthCheck();e.setOnFrame(function(c){return a.parseAndHandleStanza(b,c)});e.setOnClose(function(){d("WALogger").LOG(G||(G=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"])),b);a.activePing&&b===a.activePing.socketId&&(a.activePing.handler.resolve(),a.activePing=null);a.filterPending(function(a){return a.attachedToSocketId===b}).forEach(function(b){return void a.removeHandler(b)});if(b!==a.socketId)return;a.socketId=S;a.socket=null;a.onConnectionChange("disconnected");a.config.handlers.onDisconnect==null||a.config.handlers.onDisconnect();f.resolve()});a.onConnectionChange("connected");a.config.handlers.onConnect==null||a.config.handlers.onConnect();a.filterPending(function(a){return!a.attachedToSocketId}).sort(function(a,b){return a.orderedId-b.orderedId}).forEach(function(b){switch(b.type){case"smax":case"iq":a.maybeSendPendingStanza(b);break;case"ack":void a.callStanza(b.stanza);break;default:b.type;break}});return f.promise}else{e=c.error;switch(e){case"max-hunters":d("WALogger").WARN(H||(H=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake using treasureHunt strategy"])));break;case"disconnected":d("WALogger").WARN(I||(I=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket disconnected while in noise handshake"])));break;default:e;return}}})["catch"](function(a){a instanceof d("WAErrors").Disconnected?d("WALogger").LOG(J||(J=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake"]))):d("WALogger").ERROR(K||(K=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration failed ",""])),a).devConsole(a)})}function X(){var a=Z("closeSocket");a.socket&&(d("WALogger").LOG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"])),a.socketId),d("WALogger").LOG(M||(M=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocket called"]))),a.socket.close())}function ga(){Z("onStreamErrorReceived").socketLoop.cancelReset()}function ha(){void Z("waitForConnection").sendPing();Q||(Q=new(d("WAResolvable").Resolvable)());return Q.promise}function ia(a,b){var c=Z("castStanza");c.socket?void c.castStanza(a,b):d("WALogger").LOG(N||(N=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket"])))}function ja(a){var b=Z("castStanza");return b.socketId===a}function Y(a,e,f,g,h){f===void 0&&(f=0);h===void 0&&(h="iq");return new(O||(O=b("Promise")))(function(i){var j=Z("sendIq"),k=a.attrs.id;if(!k||typeof k!=="string")throw c("err")("[comms] sendIq given iq without id: "+String(a));var l=j.socketId;if(e&&!l){i((O||(O=b("Promise"))).reject(new(d("WAErrors").Offline)()));return}var m=function(a){a===void 0&&(a="disconnect");var d=h==="iq"?j.pendingIqs.get(k):j.pendingSmaxStanzas.get(k);if(!d){i((O||(O=b("Promise"))).reject(c("err")("[comms] _sendIq unexisting stanza to be cancelled: "+k)));return}j.removeHandler(d,a)},n=null;if(f>0){var o=setTimeout(m,f*1e3);n=function(){clearTimeout(o)}}if(g!=null)if(g.aborted){i((O||(O=b("Promise"))).reject(new(d("WAErrors").Disconnected)()));return}else{var p=function(){m("abort")};g.addEventListener("abort",p);n=function(){g.removeEventListener("abort",p)}}l={resolve:i,stanza:a,attachedToSocketId:e?l:S,orderedId:R++,attempt:0,cleanup:n};if(h==="iq"){n=babelHelpers["extends"]({type:h},l);j.pendingIqs.set(k,n);j.config.handlers.onSendIq==null||j.config.handlers.onSendIq(a);j.maybeSendPendingStanza(n)}else{h;n=babelHelpers["extends"]({type:h},l);j.pendingSmaxStanzas.set(k,n);j.maybeSendPendingStanza(n)}})}function ka(a,b){var c,d;c=(c=b==null?void 0:b.withoutRetry)!=null?c:!1;d=(d=b==null?void 0:b.timeoutSeconds)!=null?d:0;b=(b=b==null?void 0:b.signal)!=null?b:null;return Y(a,c,d,b,"smax")}function la(){var a=Z("sendPing");return a.sendPing()}function ma(){return Z("startHandlingRequests").startHandlingRequests()}function na(){P&&P.deadSocketTimer.cancel()}function Z(a){if(P)return P;throw c("err")("[comms] "+a+" called before startComms")}function $(a){if(a.tag==="iq"){var b=a.attrs.type;if(b==="result"||b==="error")return d("WAWap").decodeAsString(a.attrs.id)||null}return null}function oa(){return R++}function pa(){P=null,Q=new(d("WAResolvable").Resolvable)(),R=1}g.DEFAULT_SOCKET_ID=S;g.getComms=a;g.startComms=e;g.stopComms=f;g.closeSocketAndPreventRetry=aa;g.closeSocketAndPause=ba;g.closeSocketAndResume=ca;g.openSocketLoop=U;g.maybeResetSocketLoop=da;g.forceResetSocketLoop=ea;g.forceAbortSocketConnection=fa;g.isSocketConnected=V;g.socketLoopIteration=W;g.closeSocket=X;g.onStreamErrorReceived=ga;g.waitForConnection=ha;g.castSmaxStanza=ia;g.isActiveSocket=ja;g._sendIq=Y;g.sendSmaxStanza=ka;g.sendPing=la;g.startHandlingRequests=ma;g.cancelDeadSocketTimer=na;g.singletonOrThrowIfUninitialized=Z;g.getAndIncrementNextOrderedId=oa;g.resetStateForTests=pa}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("WAJobPriorityBucket",["WAJobOrchestratorTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a){this.tasks=[];this.pendingTasks=[];this.lastJobStartedTimestampMs=null;this.jobMaxConcurrency=(a=a.jobMaxConcurrencyMap)!=null?a:{}}var b=a.prototype;b.updateConfig=function(a){this.jobMaxConcurrency=(a=a.jobMaxConcurrencyMap)!=null?a:{}};b.getStats=function(){return[].concat(this.tasks,this.pendingTasks).reduce(function(a,b){var c;c=(c=a[b.jobName])!=null?c:0;a[b.jobName]=c+1;return a},{})};b.next=function(){var a=this;if(this.tasks.length===0)return null;var b=this.pendingTasks.reduce(function(a,b){var c;c=(c=a.get(b.jobName))!=null?c:0;a.set(b.jobName,c+1);return a},new Map()),c=this.tasks.filter(function(c){var e;return((e=b.get(c.jobName))!=null?e:0)<((e=a.jobMaxConcurrency[c.jobName])!=null?e:d("WAJobOrchestratorTypes").DEFAULT_CONCURRENCY)});return c.length>0?[c[0]]:null};b.add=function(a,b,c,d){c={jobId:c,jobInfo:b,jobName:a,run:d};this.tasks.push(c);return c};b.markJobTaskPending=function(a){this.pendingTasks.includes(function(b){return b.jobId===a.jobId})&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskPending found jobId: "," in pending tasks"])),a.jobId).sendLogs("JobOrchestrator::markJobTaskPending"),this.lastJobStartedTimestampMs=Date.now(),this.pendingTasks.push(a),this.tasks=this.tasks.filter(function(b){return b.jobId!==a.jobId})};b.markJobTaskDone=function(a){this.pendingTasks=this.pendingTasks.filter(function(b){return b.jobId!==a}),this.tasks.includes(function(b){return b.jobId===a})&&d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskDone found jobId: "," in scheduled tasks"])),a).sendLogs("JobOrchestrator::markJobTaskDone")};b.count=function(){return this.tasks.length};b.pendingCount=function(){return this.pendingTasks.length};b.clearWaitingTasks=function(){this.tasks=[]};b.clear=function(){this.tasks=[],this.pendingTasks=[]};b.getLastJobStartedTimestamp=function(){return this.lastJobStartedTimestampMs};return a}();b=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.next=function(){var a=this,b,c;if(this.tasks.length===0)return null;var d=this.pendingTasks.reduce(function(a,b){var c;c=(c=a.get(b.jobName))!=null?c:0;a.set(b.jobName,c+1);return a},new Map()),e=this.tasks.filter(function(b){var c;return((c=d.get(b.jobName))!=null?c:0)<((c=a.jobMaxConcurrency[b.jobName])!=null?c:1)});if(e.length===0)return null;b=(b=this.jobMaxConcurrency[e[0].jobName])!=null?b:1;c=(c=d.get(e[0].jobName))!=null?c:0;if(b>1&&c<b){var f=e.filter(function(a){return a.jobName===e[0].jobName});b=Math.min(f.length,b-c);return f.slice(0,b)}return[e[0]]};return b}(a);g.BaseJobBucket=a;g.LowJobBucket=b}),98);
__d("WAMetrics",["Promise","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WATimeUtils").performanceAbsoluteNow();return new(h||(h=b("Promise")))(function(b){setTimeout(function(){b(d("WATimeUtils").performanceAbsoluteNow()-a)},0)})}g.getEventLoopDelay=a}),98);
__d("WAConcurrentBucketJobQueue",["Promise","WABase64","WACryptoDependencies","WACustomError","WAJobOrchestratorTypes","WAJobPriorityBucket","WALogger","WAMetrics","WANullthrows","WAPromiseTimeout","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=30,l=new Map([[d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,5],[d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,1]]);function m(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WABase64").encodeB64(a)}a=function(){function a(){this.$1=!1,this.$2=0,this.$3=0,this.$4=0,this.$5=new Map(),this.$6=new Map(),this.$7=new Map(),this.$9=0}var e=a.prototype;e.init=function(a,b){var e,f,g;if(this.$1)throw c("err")("WAConcurrentBucketJobQueue has already initialized");this.$4=(e=a==null?void 0:a.bestEffortWaitTimeoutSec)!=null?e:k;this.$2=a.maxConcurrency;this.$3=a.maxConcurrency;this.$8=b;this.$7=this.$11(a==null?void 0:a.jobPrioritiesQuota);this.$6=new Map(this.$7);this.$5=new Map();this.$9=Date.now();b=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(e=a.maxConcurrencyPerJob)!=null?e:{}});e=new(d("WAJobPriorityBucket").LowJobBucket)({jobMaxConcurrencyMap:(e=a.maxConcurrencyPerJob)!=null?e:{}});f=new(d("WAJobPriorityBucket").LowJobBucket)({jobMaxConcurrencyMap:(f=a.maxConcurrencyPerJob)!=null?f:{}});g=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(g=a.maxConcurrencyPerJob)!=null?g:{}});a=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(a=a.maxConcurrencyPerJob)!=null?a:{}});this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION,b);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,b);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.OFFLINE,g);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.HISTORY_SYNC,a);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,e);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,f);this.$1=!0};e.updateConfig=function(a){this.$3+=a.maxConcurrency-this.$2,this.$2=a.maxConcurrency,this.$5.forEach(function(b){return b.updateConfig({jobMaxConcurrencyMap:(b=a.maxConcurrencyPerJob)!=null?b:{}})}),this.$7=this.$11(a==null?void 0:a.jobPrioritiesQuota),d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: updated WAConcurrentBucketJobQueue config"])))};e.isInitialized=function(){return this.$1};e.clearQueue=function(){if(!this.$1)throw c("err")("WAConcurrentBucketJobQueue not initialized");this.$5.forEach(function(a){return a.clear()})};e.clearQueueByPriority=function(a){if(!this.$1)throw c("err")("WAConcurrentBucketJobQueue not initialized");(a=this.$5.get(a))==null||a.clearWaitingTasks()};e.getIntStats=function(){var a=this,b=function(b){var c;b=a.$5.get(b);return((c=b==null?void 0:b.count())!=null?c:0)+((c=b==null?void 0:b.pendingCount())!=null?c:0)};return{highPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}};e.getStringStats=function(){var a=this,b=function(b){var c=(b=(b=a.$5.get(b))==null?void 0:b.getStats())!=null?b:{};b=Object.keys(c).reduce(function(a,b){var d=a[0];a=a[1];var e=c[b];return e>d?[e,b]:[d,a]},[0,null]);b=b[1];return b};return{highPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}};e.enqueue=function(a,e,f,g){var h,i=this;if(!this.$1)return(j||(j=b("Promise"))).reject(c("err")("WAConcurrentBucketJobQueue not initialized"));var k,l,n=new(j||(j=b("Promise")))(function(a,b){k=a,l=b}),o=babelHelpers["extends"]({priority:d("WAJobOrchestratorTypes").DEFAULT_JOB_PRIORITY},f),p=this.getJobBucketByType(o.priority);if(!p)return(j||(j=b("Promise"))).reject(c("err")("WAConcurrentBucketJobQueue no bucket for job with name "+a+" was found."));void d("WAMetrics").getEventLoopDelay().then(function(a){g!=null&&g.isActive()&&(g==null||g.addPoint("measure_event_loop_delay",{"int":{eventLoopDelay:a}}))});g==null||g.addPoint("scheduling_job",{string:babelHelpers["extends"]({},this.getStringStats(),{priority:o.priority}),"int":babelHelpers["extends"]({},this.getIntStats(),{maxTimeoutMs:(h=f==null?void 0:f.maxTimeoutMs)!=null?h:0})});var q=o.priority+"-"+a+"-"+((h=f==null?void 0:f.jobId)!=null?h:m(8));h=p.add(a,o,q,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{i.$8.logJobStarted(q);var a=(yield i.$12(e(),f==null?void 0:f.maxTimeoutMs));i.$8.logJobCompleted(q);k(a)}catch(a){a instanceof d("WACustomError").TimeoutError?i.$8.logJobTimeout(q):i.$8.logJobError(q),l(a)}}));this.$8.logJobCreated({jobId:q,jobName:a,jobPriority:o.priority,pendingJobsCount:p.count()});f&&f.priority===d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION&&void this.$13(h);this.$14();return n};e.getAvailableThreadsCount=function(){return this.$3};e.getJobQuotaConfig=function(){return this.$7};e.getRemainingJobCountMap=function(){return this.$6};e.getJobBucketByType=function(a){return this.$5.get(a)};e.getSnapshot=function(a){a=this.getJobBucketByType(a);return!a?null:a.getStats()};e.$11=function(a){var b;!a?b=new Map(l):b=new Map(a);b.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,0);return b};e.$15=function(a){return(a=this.$6.get(a))!=null?a:0};e.$16=function(){this.$6=new Map(this.$7)};e.$17=function(a){var b=this;a===void 0&&(a=!0);var c=0,e=null,f=0;this.$5.forEach(function(a,d){c+=a==null?void 0:a.count();f+=b.$15(d);if(e!=null)return;a.count()>0&&b.$15(d)>0&&(e=a)});var g=e==null||f===0;g&&this.$16();if(this.$18(c,g))return this.getJobBucketByType(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT);return e==null&&a?this.$17(!1):e};e.$18=function(a,b){var c=this;function e(a,b){var c=Date.now();return a>c?!1:c-a<b*1e3}function f(a,b){a=Math.ceil(a-Date.now())+b*1e3;return a>0?a:0}var g=this.getJobBucketByType(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT);a=a-((a=g==null?void 0:g.count())!=null?a:0);var h=g==null?void 0:g.getLastJobStartedTimestamp();if((g==null?void 0:g.count())===0)return!1;if(h==null&&e(this.$9,this.$4)){if(this.$10==null){g=f(this.$9,this.$4);this.$10=setTimeout(function(){c.$14(),c.$10=null},g)}return!1}return a>0&&h!=null&&e(h,this.$4)?!1:b};e.$19=function(a){a=this.$20(a);return c("WANullthrows")(this.$5.get(a))};e.$20=function(a){var b=a.split("-")[0];b=d("WAJobOrchestratorTypes").JOB_PRIORITY.cast(b);if(!b)throw c("err")("ConcurrentBucketQueue cannot extract known job priority type from id: "+a);return b};e.$21=function(a){a=this.$20(a);this.$15(a)>0?this.$6.set(a,this.$15(a)-1):this.$6.set(a,0)};e.$14=function(){var a=this;while(this.$3>0){var b=this.$17();b=b==null?void 0:b.next();if(b==null)break;b.forEach(function(b){a.$21(b.jobId),void a.$13(b)})}};e.$12=function(a,b){return b!==void 0?d("WAPromiseTimeout").promiseTimeout(a,b):a};e.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=this.$19(a.jobId);this.$3--;c.markJobTaskPending(a);var e=a.run,f=a.jobId,g=a.jobName;try{yield this.$12(e(),((e=a.jobInfo)==null?void 0:e.maxTimeoutMs)===void 0?d("WAJobOrchestratorTypes").DEFAULT_JOB_TIMEOUT_MS:void 0)}catch(a){if(a instanceof d("WACustomError").TimeoutError)this.$8.logJobTimeout(f),d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: "," exceeding the timeout, release the thread."])),g);else throw a}finally{this.$3++,c.markJobTaskDone(f),this.$3>0&&setTimeout(function(){return b.$14()},0)}});function c(b){return a.apply(this,arguments)}return c}();return a}();g.WAConcurrentBucketJobQueue=a}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d,e){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f===void 0&&(f=16);b={name:"AES-GCM",iv:k(b),tagLength:f*8};e!=null&&(b.additionalData=k(e));return d("WACryptoDependencies").getCrypto().subtle.encrypt(b,yield j(a),c)});return h.apply(this,arguments)}function c(a,b,c,d,e){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){f===void 0&&(f=16);b={name:"AES-GCM",iv:k(b),tagLength:f*8};e!=null&&(b.additionalData=k(e));return d("WACryptoDependencies").getCrypto().subtle.decrypt(b,yield j(a),c)});return i.apply(this,arguments)}function j(a){return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",a,"AES-GCM",!1,["encrypt","decrypt"])}function k(a){if(a instanceof Uint8Array)return a;if(typeof a==="string"){var b=new(d("WABinary").Binary)();b.writeString(a);return b.readByteArrayView()}return new Uint8Array(a)}g.gcmEncrypt=a;g.gcmDecrypt=c}),98);
__d("WACryptoEd25519",["WACryptoPrimitives","err"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(a){var b=h;h=[];try{return a()}finally{(h!=null?h:[]).forEach(function(a){return void a.fill(0)}),h=b}}function j(a,b){if(h==null)throw c("err")("allocate called outside of active scope");return new a(b)}function a(a,b,c){d("WACryptoPrimitives").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function e(a,b){var c=[k(),k(),k(),k()];d("WACryptoPrimitives").lowlevel.scalarbase(c,b);R(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw c("err")("Incorrect initialiser array provided to the fieldElement");for(var d=0;d<a.length;d++)b[d]=a[d]}return b}function l(a,b){d("WACryptoPrimitives").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)/65536;c++}}function u(a,b){return T(a,b)?0:1}function v(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c,e=(c=d("WACryptoPrimitives")).lowlevel.unpack25519,f=c.lowlevel.pow2523,g=c.lowlevel.M;c=c.lowlevel.S;var h=k();e(h,z);e=k();f(e,b);f=k();g(f,b,e);e=k();c(e,f);c=k();g(c,f,h);y(f,c,1^u(e,b));a.set(f)}function B(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);S(j,i);f(a,h,j)}function C(a,b){var c=d("WACryptoPrimitives").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d("WACryptoPrimitives").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d("WACryptoPrimitives").lowlevel.S,e=d("WACryptoPrimitives").lowlevel.A,f=d("WACryptoPrimitives").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d("WACryptoPrimitives").lowlevel.unpack25519,f=d("WACryptoPrimitives").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();S(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b,c=(b=d("WACryptoPrimitives")).lowlevel.S,e=b.lowlevel.M,f=b.lowlevel.pow2523;b=b.lowlevel.pack25519;var g=k(),h=k(),i=k(),j=k(),l=k();f(g,a);c(h,g);c(i,h);e(j,i,a);e(l,j,a);f=new Uint8Array(32);b(f,l);return 1&f[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function f(a,b){var c=q();b=U(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d("WACryptoPrimitives").lowlevel.M,e=d("WACryptoPrimitives").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();S(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d("WACryptoPrimitives").lowlevel.unpack25519;a=d("WACryptoPrimitives").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function Q(a){return i(function(){return O(a)})}function R(a,b){var c=k(),e=k(),f=k(),g=d("WACryptoPrimitives").lowlevel.M,h=d("WACryptoPrimitives").lowlevel.pack25519;S(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function S(a,b){var c=k();c.set(b);var e=d("WACryptoPrimitives").lowlevel.M,f=d("WACryptoPrimitives").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function T(a,b){var c=d("WACryptoPrimitives").lowlevel.pack25519,e=d("WACryptoPrimitives").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function U(a,b){var c,e=(c=d("WACryptoPrimitives")).lowlevel.set25519,f=c.lowlevel.S,g=c.lowlevel.M,h=c.lowlevel.Z,i=c.lowlevel.A,j=c.lowlevel.D,l=c.lowlevel.unpack25519;c=c.lowlevel.pow2523;var o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();e(a[2],n());l(a[1],b);f(r,a[1]);g(s,r,j);h(r,r,a[2]);i(s,a[2],s);f(t,s);f(u,t);g(v,u,t);g(o,v,r);g(o,o,s);c(o,o);g(o,o,r);g(o,o,s);g(o,o,s);g(a[0],o,s);f(q,a[0]);g(q,q,s);T(q,r)&&g(a[0],a[0],p());f(q,a[0]);g(q,q,s);if(T(q,r))return-1;V(a[0])===b[31]>>7&&h(a[0],m(),a[0]);g(a[3],a[0],a[1]);return 0}function V(a){var b=d("WACryptoPrimitives").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=e;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=f;g.elligator=P;g.hashToPoint=Q;g.pack=R;g.inv25519=S;g.unpackneg=U}),98);
__d("WALock",["Promise","WAResolvable","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return{lock:function(c,e){var f=new(d("WAResolvable").Resolvable)(),g=c.map(function(a){return[a,new(d("WAResolvable").Resolvable)()]});(i||(i=b("Promise"))).all(g.map(function(b){var c=b[0],d=b[1];return a.enqueue(c,function(){d.resolve();return f.promise})}))["catch"](function(){d("WATagsLogger").TAGS(["WALock"]).ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Lock failed for ",""])),c)});return i.all(g.map(function(a){a[0];a=a[1];return a.promise})).then(function(){return e()})["finally"](function(){f.resolve()})},wait:function(b){return a.wait(b)}}}g.makeLock=a}),98);
__d("WAPromiseQueue",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){a===void 0&&(a=-1),this.$1=(g||(g=b("Promise"))).resolve(),this.$3=0,this.$2=a}var c=a.prototype;c.wait=function(){return this.$1};c.enqueueHandlers=function(a,b,c){var d=this;this.$3++;b=this.$1.then(function(){return a}).then(b,c);c=b.then();this.$1=h(b,this.$2)["finally"](function(){d.$3--});return c};c.enqueue=function(a){var b=this;this.$3++;a=this.$1.then(a);var c=a.then();this.$1=h(a,this.$2)["finally"](function(){b.$3--});return c};c.size=function(){return this.$3};return a}();c=function(){function a(a){a===void 0&&(a=-1),this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitIfPending=function(a){return this.$1.get(a)};c.wait=function(a){return this.$1.get(a)||(g||(g=b("Promise"))).resolve()};c.enqueueHandlers=function(a,b,c,d){c=this.wait(a).then(function(){return b}).then(c,d);return this.$3(a,c)};c.enqueue=function(a,b){b=this.wait(a).then(b);return this.$3(a,b)};c.$3=function(a,b){var c=this,d=b.then(),e,f=function(){c.$1.get(a)===e&&c.$1["delete"](a)};e=h(b,this.$2).then(f,f);this.$1.set(a,e);return d};return a}();function h(a,c){if(c>=0)return new(g||(g=b("Promise")))(function(b){var d=function(){return void b()};a.then(d,d);setTimeout(d,c)});else return a.then(i,i)}function i(){}f.PromiseQueue=a;f.PromiseQueueMap=c}),66);
__d("WALockMap",["WALock","WAPromiseQueue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=-1);a=new(d("WAPromiseQueue").PromiseQueueMap)(a);return d("WALock").makeLock(a)}g.makeLockMap=a}),98);
__d("WACryptoLibraryConfig",[],(function(a,b,c,d,e,f){"use strict";var g={signalFutureMessagesMax:2e3,S508658PreventOldSessionLookupAndPromote:!1,S508658AutoAcknowledgeStaleSessions:!1};function a(){return g}function b(a){g=a}f.getCryptoLibraryConfig=a;f.setCryptoLibraryConfig=b}),66);
__d("WASignalSessions",["WABinary","WACryptoLibraryConfig","WASignalKeys","WASignalOther","err"],(function(a,b,c,d,e,f,g){"use strict";var h=3;function a(a){if(!d("WACryptoLibraryConfig").getCryptoLibraryConfig().S508658AutoAcknowledgeStaleSessions)return a;return a.initialExchangeInfo==null?a:o(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,null,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function b(a,b){return i(a,0,b,[])}function i(a,b,c,d){return{ratchetPubKey:a,nextMsgIndex:b,chainKey:c,unusedMsgKeys:d}}function e(a,b){return j(a,0,b)}function j(a,b,c){return{ratchetKey:a,nextMsgIndex:b,chainKey:c}}function k(a,b,c){return{remoteOneTimeId:a,remoteSignedId:b,localOneTimePubKey:c}}function f(a,b){return o(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,a.initialExchangeInfo,a.prevSendChainHighestIndex,b,a.aliceBaseKey)}function l(a,b,c){return o(a.local,a.remote,a.rootKey,b,c,a.initialExchangeInfo,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function m(a,b,c,d){c===void 0&&(c=a.sendChain);return o(a.local,a.remote,d,b,c,null,Math.max(a.sendChain.nextMsgIndex-1,0),a.prevSessions,a.aliceBaseKey)}function n(a,b,c,d,e,f,g){return o(a,b,c,d,e,f,0,[],g)}function o(a,b,c,d,e,f,g,h,i){return{local:a,remote:b,rootKey:c,sendChain:e,recvChains:d,initialExchangeInfo:f,prevSendChainHighestIndex:g,prevSessions:h,aliceBaseKey:i}}function p(a,b){b=new(d("WABinary").Binary)(b);var c=d("WASignalOther").readBytes(b,32),e=d("WASignalOther").readBytes(b,32);b=d("WASignalOther").readBytes(b,16);return q(a,c,e,b)}function q(a,b,c,d){return{index:a,cipherKey:b,macKey:c,iv:d}}function r(a){return{senderRatchetKey:a.ratchetPubKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey},messageKeys:a.unusedMsgKeys}}function s(a){var b=a.ratchetKey;return{senderRatchetKey:b.serializedPubKey,senderRatchetKeyPrivate:b.privateKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey}}}function t(a){var b=a.local,c=a.remote,d=a.initialExchangeInfo,e=void 0;if(d){var f=d.remoteOneTimeId;e={preKeyId:f!=null?f:void 0,signedPreKeyId:d.remoteSignedId,baseKey:d.localOneTimePubKey}}return{currentSession:{sessionVersion:h,localIdentityPublic:b.pubKey,remoteIdentityPublic:c.pubKey,rootKey:a.rootKey,previousCounter:a.prevSendChainHighestIndex,senderChain:s(a.sendChain),receiverChains:a.recvChains.map(r),pendingPreKey:e,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey},previousSessions:a.prevSessions}}function u(a){var b=a.local,c=a.remote,e=a.sendChain,f=a.initialExchangeInfo,g=void 0;if(f){var i=f.remoteOneTimeId;g={preKeyId:i!=null?i:void 0,signedPreKeyId:f.remoteSignedId,baseKey:d("WASignalOther").toBuffer(f.localOneTimePubKey)}}return{sessionVersion:h,localIdentityPublic:d("WASignalOther").toBuffer(b.pubKey),remoteIdentityPublic:d("WASignalOther").toBuffer(c.pubKey),rootKey:d("WASignalOther").toBuffer(a.rootKey),previousCounter:a.prevSendChainHighestIndex,senderChain:{senderRatchetKey:d("WASignalOther").toBuffer(e.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:d("WASignalOther").toBuffer(e.ratchetKey.privateKey),chainKey:{index:e.nextMsgIndex,key:d("WASignalOther").toBuffer(e.chainKey)},messageKeys:[]},receiverChains:a.recvChains.map(function(a){return{senderRatchetKey:d("WASignalOther").toBuffer(a.ratchetPubKey),chainKey:{index:a.nextMsgIndex,key:d("WASignalOther").toBuffer(a.chainKey)},messageKeys:a.unusedMsgKeys.map(function(a){return{index:a.index,cipherKey:d("WASignalOther").toBuffer(a.cipherKey),macKey:d("WASignalOther").toBuffer(a.macKey),iv:d("WASignalOther").toBuffer(a.iv)}})}}),pendingPreKey:g,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey==null?void 0:d("WASignalOther").toBuffer(a.aliceBaseKey)}}function v(a){var b=B(a.currentSession,"currentSession");return x(b,a.previousSessions)}function w(a){return x(a,[])}function x(a,b){var e=B(a.sessionVersion,"sessionVersion");if(e!==h)throw c("err")("Signal: bad session version "+e);e=B(a.senderChain,"senderChain");var f=B(e.chainKey,"senderChain.chainKey");e=j(d("WASignalKeys").makeSerializedKeyPairFrom(A(e.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),z(e.senderRatchetKey,"senderRatchetKey")),B(f.index,"senderChain.chainKey.index"),A(f.key,32,"senderChain.chainKey.key"));f=B(a.receiverChains,"receiverChains").map(function(a){var b=B(a.chainKey,"receiverChains[].chainKey");return i(z(a.senderRatchetKey,"receiverChains[].senderRatchetKey"),B(b.index,"receiverChains[].chainKey.index"),A(b.key,32,"receiverChains[].chainKey.key"),y(a.messageKeys))});var g={regId:d("WASignalOther").castRegistrationId(B(a.localRegistrationId,"localRegistrationId")),pubKey:z(a.localIdentityPublic,"localIdentityPublic")},l={regId:d("WASignalOther").castRegistrationId(B(a.remoteRegistrationId,"remoteRegistrationId")),pubKey:z(a.remoteIdentityPublic,"remoteIdentityPublic")},m=a.pendingPreKey,n=null;if(m){var p=m.preKeyId;n=k(p!=null?d("WASignalKeys").castToPreKeyId(p):null,d("WASignalKeys").castToSignedPreKeyId(B(m.signedPreKeyId,"pendingPreKey.signedPreKeyId")),z(m.baseKey,"pendingPreKey.baseKey"))}p=a.aliceBaseKey==null?null:z(a.aliceBaseKey,"aliceBaseKey");return o(g,l,A(a.rootKey,32,"rootKey"),f,e,n,a.previousCounter||0,b,p)}function y(a){return a.map(function(a){return{index:B(a.index,"messageKeys[].index"),cipherKey:A(a.cipherKey,32,"messageKeys[].cipherKey"),macKey:A(a.macKey,32,"messageKeys[].macKey"),iv:A(a.iv,16,"messageKeys[].iv")}})}function z(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(B(a,b)))}function A(a,b,c){return d("WASignalOther").toBytes(B(a,c),b)}function B(a,b){if(a==null)throw c("err")("Signal: protobuf is missing "+b);return a}g.FORMAT_VERSION=h;g.maybeClearPendingPreKey=a;g.makeFreshRecvChain=b;g.makeRecvChain=i;g.makeFreshSendChain=e;g.makeSendChain=j;g.makeInitialExchangeInfo=k;g.setPrevSessions=f;g.updateChains=l;g.ratchetSession=m;g.makeFreshSession=n;g.makeSession=o;g.splitMsgKey=p;g.serializeSession=t;g.detachSession=u;g.parseSessionFromRecord=v;g.parseSession=w;g._parseSession=x;g.bytesOrThrow=A;g.definedOrThrow=B}),98);
__d("WASignalSignatures",["Promise","WACryptoDependencies","WACryptoEd25519","WACryptoPrimitives","WAHex","WALogger","WALongInt","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e,f=b.length,g=a.privateKey,h=new Uint8Array(32);(e=d("WACryptoEd25519")).scalarmultBase(h,g);var i=h[31]&128,j=new Uint8Array(f+128);j[0]=254;j.fill(255,1,32);j.set(g,32);j.set(b,64);j.set(c,f+64);var k=e.allocate(Uint8Array,64);e.hashSha512(k,j,f+128);j.set(h,32);h=e.allocate(Float64Array,64);e.reduce(k,h);e.scalarmultBase(j,k);var l=e.allocate(Uint8Array,64);e.hashSha512(l,j,f+64);e.reduce(l,h);for(f=0;f<32;++f)h[f]=k[f];for(f=0;f<32;++f)for(k=0;k<32;++k)h[f+k]+=l[f]*g[k];e.modL(j.subarray(32,64),h);return{pubKeyNegative:i!==0,signedMsg:j}})}function a(a,c){return(i||(i=b("Promise"))).resolve().then(function(){var b=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(b);return k(a,c,b)})}function e(a,b,c){var e=c[63];return e&96?!1:d("WACryptoEd25519").runInAllocationScope(function(){var f,g,h=(f=d("WACryptoPrimitives")).lowlevel.A,i=f.lowlevel.M,j=f.lowlevel.Z,k=f.lowlevel.pack25519,l=f.lowlevel.unpack25519,m=(g=d("WACryptoEd25519")).allocate(Uint8Array,64);m.set(c);m[63]=e&127;var n=g.fieldElement(),o=g.fieldElement(),p=g.fieldElement(),q=g.fieldElement(),r=g.fieldElement(),s=g.allocate(Uint8Array,32),t=g.fieldElement();t[0]=1;l(n,a.subarray(1));j(o,n,t);h(p,n,t);g.inv25519(q,p);i(r,o,q);k(s,r);s[31]=s[31]&127|e&128;return f.signDetachedVerify(b,m,s)})}function k(a,b,c){a=j(a,b,c);b=d("WASignalOther").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function l(a,b,e){var f=d("WASignalKeys").makeKeyPair(),g=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(g);e=k(e,d("WASignalKeys").serializePubKey(f),g);if(!Number.isSafeInteger(b))throw c("err")("Expected timestamp to be a safe integer, given "+String(b));return{id:d("WASignalKeys").castToPreKeyId(a),ts:b,keyPair:f,signature:e}}function f(a,b){var c=d("WASignalOther").makeBytes(64);d("WACryptoDependencies").getCrypto().getRandomValues(c);return k(a,b,c)}function m(a){var b=a.id,c=a.keyPair;return d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts})}function n(a){try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d("WASignalKeys").castToSignedPreKeyId(b),ts:d("WALongInt").numberOrThrowIfTooLarge(a),keyPair:d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalOther").toBytes(e,32),d("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))),signature:d("WASignalOther").toBytes(f,64)}}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializeSignedPreKey error ",""])),a);return null}}function o(a){return new Uint8Array(d("WAHex").parseHex(a))}function p(a){if(a.length===33)return d("WASignalKeys").castToSerializedPubKey(a);else if(a.length===32)return d("WASignalKeys").serializeIdentity(a);else throw c("err")("verifyCertificate publicKey incorrect length")}function q(a,c,d){return(i||(i=b("Promise"))).resolve().then(function(){var b=l(a,c,d),e=m(b);return{plainObject:b,record:e}})}g.signMsg=a;g.verifyMsgSignalVariant=e;g.makeSignature=k;g.makeSignedPreKey=l;g.signSenderKeyMessage=f;g.serializeSignedPreKeyForPrivateStorage=m;g.deserializeSignedPreKey=n;g.convertPublicKeyHexToUint8Array=o;g.convertPublicKeyToSerializedPubKey=p;g.generateSignedPreKey=q}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={ratchetKey:[1,(d=d("WAProtoConst")).TYPES.BYTES],counter:[2,d.TYPES.UINT32],previousCounter:[3,d.TYPES.UINT32],ciphertext:[4,d.TYPES.BYTES]};b.internalSpec={registrationId:[5,d.TYPES.UINT32],preKeyId:[1,d.TYPES.UINT32],signedPreKeyId:[6,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],identityKey:[3,d.TYPES.BYTES],message:[4,d.TYPES.BYTES]};c.internalSpec={id:[1,d.TYPES.UINT32],baseKey:[2,d.TYPES.BYTES],ratchetKey:[3,d.TYPES.BYTES],identityKey:[4,d.TYPES.BYTES],baseKeySignature:[5,d.TYPES.BYTES]};e.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],ciphertext:[3,d.TYPES.BYTES]};f.internalSpec={id:[1,d.TYPES.UINT32],iteration:[2,d.TYPES.UINT32],chainKey:[3,d.TYPES.BYTES],signingKey:[4,d.TYPES.BYTES]};h.internalSpec={generation:[1,d.TYPES.UINT32],signature:[2,d.TYPES.BYTES]};g.SignalMessageSpec=a;g.PreKeySignalMessageSpec=b;g.KeyExchangeMessageSpec=c;g.SenderKeyMessageSpec=e;g.SenderKeyDistributionMessageSpec=f;g.DeviceConsistencyCodeMessageSpec=h}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(a,b,c,d,e,f,g){"use strict";var h=5,i=3;function j(a){var b=d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey"),c=d("WASignalSessions").definedOrThrow(a.senderMessageKeys,"senderMessageKeys"),e=d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey");return{senderSigningKeyPublic:r(b["public"],"public"),senderSigningKeyPrivate:b["private"]?d("WASignalSessions").bytesOrThrow(b["private"],32,"private"):void 0,senderKeyId:d("WASignalSessions").definedOrThrow(a.senderKeyId,"senderKeyId"),unusedMsgKeys:c.map(function(a){return k(d("WASignalSessions").definedOrThrow(a.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(a.seed,50,"seed"))}),senderKeyChainKey:l(d("WASignalSessions").definedOrThrow(e.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(e.seed,32,"seed"))}}function a(a,b,c,d,e){return{senderSigningKeyPublic:a,senderSigningKeyPrivate:b,senderKeyChainKey:c,senderKeyId:d,unusedMsgKeys:e==null?[]:e}}function b(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b.senderKeyId});return{senderKeyStates:a.senderKeyStates.map(function(a,d){return d===c?b:a})}}function c(a,b){a=a.senderKeyStates.slice(a.senderKeyStates.length>h-1?1:0);a.push(b);return{senderKeyStates:a}}function e(a){return{senderKeyStates:[a]}}function k(a,b){return{iteration:a,seed:b}}function l(a,b){return{nextMsgIndex:a,chainKey:b}}function f(a){a=d("WASignalSessions").definedOrThrow(a.senderKeyStates,"senderKeyStates");return m(a)}function m(a){return n(a)}function n(a){a=a.map(function(a){return j(a)});return{senderKeyStates:a}}function o(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b});return c===-1?void 0:a.senderKeyStates[c]}function p(a){return{senderKeyStates:a.senderKeyStates.map(function(a){return q(a)})}}function q(a){return{senderKeyId:a.senderKeyId,senderChainKey:{iteration:a.senderKeyChainKey.nextMsgIndex,seed:a.senderKeyChainKey.chainKey},senderSigningKey:{"public":a.senderSigningKeyPublic,"private":a.senderSigningKeyPrivate},senderMessageKeys:a.unusedMsgKeys.map(function(a){var b=a.iteration;a=a.seed;return{iteration:b,seed:a}})}}function r(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(d("WASignalSessions").definedOrThrow(a,b)))}function s(a){return a}g.FORMAT_VERSION=i;g.makeSenderKeyState=a;g.updateSessionWithUpdatedSenderKeyState=b;g.updateSessionWithNewSenderKeyState=c;g.makeNewSenderKeySession=e;g.makeSenderKeyMsgKey=k;g.makeSenderKeyChainKey=l;g.parseSessionFromRecord=f;g._parseSession=m;g.makeSenderKeySessionFromRecord=n;g.findSenderKeyState=o;g.serializeSession=p;g.serializeSenderKeyState=q;g.convertFromRawToSenderKeyState=s}),98);
__d("WASignalWhitepaper",["Promise","WABinary","WACryptoDependencies","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Uint8Array(32);i.fill(255);var j=new Uint8Array([1]),k=new Uint8Array([2]);function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e,f=a.regId;a=a.staticKeyPair;var g=b.identity,h=b.signedKey.publicKey,j=c.privateKey,k=a.privateKey;e=(e=b.oneTimeKey)==null?void 0:e.publicKey;k=d("WABinary").Binary.build(i,v(k,h),v(j,g),v(j,h),e&&v(j,e)).readByteArrayView();h=(yield t(k,"WhisperText"));j=h[0];e=h[1];k=b.ratchetKey;h=d("WASignalSessions").makeFreshRecvChain(k,e);e=d("WASignalKeys").makeSerializedKeyPair();j=(yield r(j,e,k));k=d("WASignalSessions").makeInitialExchangeInfo(b.oneTimeKey==null?null:b.oneTimeKey.id,b.signedKey.id,d("WASignalKeys").serializePubKey(c));return d("WASignalSessions").makeFreshSession({regId:f,pubKey:d("WASignalKeys").serializePubKey(a)},{regId:b.regId,pubKey:g},j.rootKey,[h],d("WASignalSessions").makeFreshSendChain(e,j.chainKey),k,d("WASignalKeys").serializePubKey(c))});return l.apply(this,arguments)}function c(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f,g=a.regId;a=a.staticKeyPair;var h=a.privateKey,j=e.signed.privateKey,k=c,l=b.pubKey;f=(f=e.oneTime)==null?void 0:f.privateKey;l=d("WABinary").Binary.build(i,w(l,j),w(k,h),w(k,j),f&&w(k,f)).readByteArrayView();h=(yield t(l,"WhisperText"));j=h[0];k=h[1];f=e.ratchet;l=d("WASignalSessions").makeFreshSendChain(f,k);return d("WASignalSessions").makeSession({regId:g,pubKey:d("WASignalKeys").serializePubKey(a)},b,j,[],l,null,0,[],c)});return m.apply(this,arguments)}function e(a){a=d("WASignalGroupSession").makeSenderKeyState(d("WASignalKeys").serializePubKey(a),a.privateKey,d("WASignalGroupSession").makeSenderKeyChainKey(0,d("WASignalKeys").makeRawSenderKey()),d("WASignalOther").makeSenderKeyId(),[]);return(h||(h=b("Promise"))).resolve(d("WASignalGroupSession").makeNewSenderKeySession(a))}function f(a,c,e,f,g){e=d("WASignalGroupSession").makeSenderKeyState(e,void 0,d("WASignalGroupSession").makeSenderKeyChainKey(c,f),a,[]);c=null;g?c=d("WASignalGroupSession").updateSessionWithNewSenderKeyState(g,e):c=d("WASignalGroupSession").makeNewSenderKeySession(e);return(h||(h=b("Promise"))).resolve(c)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));c=function(a){return d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};var f=c(j).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperMessageKeys",80)}).then(function(b){return d("WASignalSessions").splitMsgKey(a,b)});c=c(k).then(function(a){return d("WASignalOther").toBytes(a,32)});return(h||(h=b("Promise"))).all([c,f])});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));c=function(a){return d("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},e,a)};var f=c(j).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperGroup",50)}).then(function(b){return d("WASignalGroupSession").makeSenderKeyMsgKey(a,b)});c=c(k).then(function(a){return d("WASignalOther").toBytes(a,32)});return(h||(h=b("Promise"))).all([c,f])});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=b.privateKey;c=c;b=d("WASignalKeys").ecdh(b,c);c=(yield t(new Uint8Array(b),"WhisperRatchet",a));b=c[0];a=c[1];return{rootKey:b,chainKey:a}});return s.apply(this,arguments)}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=null);a=(yield d("WASignalOther").hkdf(a,c,b,64));return[d("WASignalOther").sliceBytes(a,0,32),d("WASignalOther").sliceBytes(a,32,32)]});return u.apply(this,arguments)}function v(a,b){return new Uint8Array(d("WASignalKeys").ecdh(a,b))}function w(a,b){return v(b,a)}g.initiateSessionOutgoing=a;g.initiateSessionIncoming=c;g.initiateSenderKeySessionOutgoing=e;g.initiateSenderKeySessionIncoming=f;g.deriveMsgKey=n;g.deriveSenderKeyMsgKey=p;g.calculateRatchet=r}),98);
__d("WASignalCipher",["Promise","WABinary","WACryptoDependencies","WACryptoLibraryConfig","WACryptoUtils","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=40,m=8,n=2e3;function a(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.sendChain,e=(yield d("WASignalWhitepaper").deriveMsgKey(c.nextMsgIndex,c.chainKey)),f=e[0];e=e[1];var g=(yield B(e)),h=g.cipherKey;g=g.macKey;h=(yield d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:e.iv},h,b));b=new(d("WABinary").Binary)();b.writeByteArray(a.local.pubKey);b.writeByteArray(a.remote.pubKey);var i=b.size();b.writeUint8(y(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:c.ratchetKey.serializedPubKey,counter:e.index,previousCounter:a.prevSendChainHighestIndex,ciphertext:h},b);h=b.readByteArrayView();b=(yield A(g,h));g=h.subarray(i);h=d("WABinary").Binary.build(g,new Uint8Array(b,0,m)).readByteArrayView();i=a.initialExchangeInfo;if(i!=null){g=new(d("WABinary").Binary)();g.writeUint8(y(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:a.local.regId,preKeyId:(b=i.remoteOneTimeId)!=null?b:void 0,signedPreKeyId:i.remoteSignedId,baseKey:i.localOneTimePubKey,identityKey:a.local.pubKey,message:h},g);b="pkmsg";i=g.readByteArrayView()}else b="msg",i=h;g=d("WASignalSessions").makeSendChain(c.ratchetKey,e.index+1,f);h=d("WASignalSessions").updateChains(a,a.recvChains,g);return[h,{type:b,ciphertext:i}]});return o.apply(this,arguments)}function c(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)return d("WAResultOrError").makeError("errSignalNoSession");var c=(yield t(a,b));if(c.success){var e=c.value,f=e[0];e=e[1];return d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:f,plaintext:e})}else{f=a.prevSessions;e=c;for(c=0;!e.success&&c<f.length;c++){var g=d("WASignalSessions").maybeClearPendingPreKey(d("WASignalSessions").parseSession(f[c])),h=(yield t(g,b));if(h.success){h=h.value;var i=h[0];h=h[1];i=d("WASignalSessions").setPrevSessions(i,[d("WASignalSessions").detachSession(a)].concat(f.slice(0,c),f.slice(c+1)));var j=!a||!d("WACryptoUtils").serializedPubKeysEqual(i.remote.pubKey,a.remote.pubKey)?i.remote.pubKey:null;e=d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:j,baseSession:g,usedPreKey:null},updatedSession:i,plaintext:h})}}return e}});return p.apply(this,arguments)}function e(a,b){if(a==null)return d("WAResultOrError").makeResult(null);a=a;if(C(a,b))return d("WAResultOrError").makeResult(a);var c=a.prevSessions;for(var e=0;e<c.length;e++){var f=d("WASignalSessions").parseSession(c[e]);if(C(f,b))return d("WACryptoLibraryConfig").getCryptoLibraryConfig().S508658PreventOldSessionLookupAndPromote===!0?d("WAResultOrError").makeError("errSignalInvalidMsg"):d("WAResultOrError").makeResult(d("WASignalSessions").setPrevSessions(f,[d("WASignalSessions").detachSession(a)].concat(c.slice(0,e),c.slice(e+1))))}return d("WAResultOrError").makeResult(null)}function f(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=e.localSignedPreKey;if(f==null)return d("WAResultOrError").makeError("errSignalInvalidSignedPreKey");f=d("WASignalSignatures").deserializeSignedPreKey(f);if(f==null)return d("WAResultOrError").makeError("errSignalSignedPreKeyDeserialization");if(f.id!==c.localSignedPreKeyId)return d("WAResultOrError").makeError("errSignalSignedPreKeyIdMismatch");var g=null;if(c.localOneTimeKeyId!=null){e=e.localOneTimeKey;if(e==null)return d("WAResultOrError").makeError("errSignalInvalidOneTimeKey");g=d("WASignalKeys").deserializePreKey(e);if(g==null)return d("WAResultOrError").makeError("errSignalOneTimeKeyDeserialization");if(g.id!==c.localOneTimeKeyId)return d("WAResultOrError").makeError("errSignalOneTimeKeyMismatch")}a=(yield d("WASignalWhitepaper").initiateSessionIncoming(a,c.remote,c.sessionBaseKey,{signed:f.keyPair,oneTime:(e=g)==null?void 0:e.keyPair,ratchet:d("WASignalKeys").toSerializedKeyPair(f.keyPair)}));g=a.remote.pubKey;e=!b||!d("WACryptoUtils").serializedPubKeysEqual(g,b.remote.pubKey)?g:null;b&&!e&&(a=d("WASignalSessions").setPrevSessions(a,[d("WASignalSessions").detachSession(b)].concat(b.prevSessions.slice(0,l-1))));f=(yield t(a,c));if(!f.success)return f;g=f.value;b=g[0];c=g[1];return d("WAResultOrError").makeResult({newIdentity:e,baseSession:a,updatedSession:b,plaintext:c})});return q.apply(this,arguments)}function r(a){var b,c,e=null;try{var f=x(a,d("WASignalSessions").FORMAT_VERSION,m);if(!f.success)return f;f=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,f.value);var g=f.ratchetKey;e=f.counter;c=f.ciphertext;if(g==null||e==null||c==null)return d("WAResultOrError").makeError("errSignalDeserializeInvalidProtoFormat");b=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(g))}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializeMsg error ",""])),a);return d("WAResultOrError").makeError("errSignalDeserializeRatchetKeyBadFormat")}f={ratchetPubKey:b,counter:e,ciphertext:new Uint8Array(c),versionContentMac:a};return d("WAResultOrError").makeResult(f)}function s(a){a=x(a,d("WASignalSessions").FORMAT_VERSION,0);if(!a.success)return a;var b,c,e,f,g;try{a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,a.value);var h=a.registrationId,j=a.preKeyId,k=a.signedPreKeyId,l=a.baseKey,m=a.identityKey;a=a.message;if(h==null||k==null||l==null||m==null||a==null)return d("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");f=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(l));b={regId:d("WASignalOther").castRegistrationId(h),pubKey:d("WASignalKeys").castToSerializedPubKey(new Uint8Array(m))};e=j!=null?d("WASignalKeys").castToPreKeyId(j):null;c=d("WASignalKeys").castToSignedPreKeyId(k);g=new Uint8Array(a)}catch(a){d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["deserializePkMsg error ",""])),a);return d("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}l=r(g);return!l.success?l:d("WAResultOrError").makeResult(babelHelpers["extends"]({},l.value,{remote:b,sessionBaseKey:f,localSignedPreKeyId:c,localOneTimeKeyId:e}))}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.ratchetPubKey,e=b.counter,f=b.ciphertext;b=b.versionContentMac;var g=a.recvChains,h=a.recvChains.findIndex(function(a){return d("WACryptoUtils").serializedPubKeysEqual(a.ratchetPubKey,c)});if(h===-1){var i=(yield d("WASignalWhitepaper").calculateRatchet(a.rootKey,a.sendChain.ratchetKey,c)),k=d("WASignalSessions").makeFreshRecvChain(c,i.chainKey);k=(yield v(k,e));if(!k.success)return k;k=k.value;var l=d("WASignalKeys").makeSerializedKeyPair();i=(yield d("WASignalWhitepaper").calculateRatchet(i.rootKey,l,c));var n=g.slice(-4);n.push(k.updatedChain);k=k.msgKey;n=d("WASignalSessions").ratchetSession(a,n,d("WASignalSessions").makeFreshSendChain(l,i.chainKey),i.rootKey)}else{l=(yield v(g[h],e));if(!l.success)return l;i=l.value;e=g.slice();e[h]=i.updatedChain;k=i.msgKey;n=d("WASignalSessions").updateChains(a,e,a.sendChain)}l=(yield B(k));g=l.cipherKey;i=l.macKey;e=d("WABinary").Binary.build(a.remote.pubKey,a.local.pubKey,b.subarray(0,-m)).readByteArrayView();l=(yield A(i,e));a=b.subarray(-m);i=!d("WACryptoUtils").uint8ArraysEqual(new Uint8Array(l,0,m),a);e=null;try{e=(yield d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:k.iv},g,f))}catch(a){d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["decryptMsgFromSession error ",""])),a)}if(i&&e==null)return h===-1?d("WAResultOrError").makeError("errInvalidMacInvalidCipherKeyNewChain"):d("WAResultOrError").makeError("errInvalidMacInvalidCipherKey");if(i)return d("WAResultOrError").makeError("errInvalidMacWithDecryptedPlaintext");return e==null?d("WAResultOrError").makeError("errUnknownInvalidCipherKey"):d("WAResultOrError").makeResult([n,e])});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b-a.nextMsgIndex,e=d("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(c>e)return d("WAResultOrError").makeError("errSignalTooManyMessagesInFuture");e=a.unusedMsgKeys;if(c<0){var f=e.findIndex(function(a){return a.index===b});return f===-1?d("WAResultOrError").makeError("errDuplicateMsg"):d("WAResultOrError").makeResult({msgKey:e[f],updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,a.nextMsgIndex,a.chainKey,z(e,f))})}f=a.nextMsgIndex;var g=(yield d("WASignalWhitepaper").deriveMsgKey(f,a.chainKey)),h=g[0];g=g[1];var i=null;if(c>0){c=c+e.length-n;c>0?(i=e.slice(c),c-=e.length):i=e.slice();for(f=f+1;f<=b;f++){c>0?c--:i.push(g);var j=(yield d("WASignalWhitepaper").deriveMsgKey(f,h));h=j[0];g=j[1]}}return d("WAResultOrError").makeResult({msgKey:g,updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,b+1,h,i||e)})});return w.apply(this,arguments)}function x(a,b,c){if(a.length<1)return d("WAResultOrError").makeError("errSignalEmptyVersionContentSuffix");var e=a[0]>>>4;if(e!==b)return e<b?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");e=a.length-c;return e<1?d("WAResultOrError").makeError("errSignalContentExceededExpectedLength"):d("WAResultOrError").makeResult(a.subarray(1,e))}function y(a,b){return(a<<4|b)&255}function z(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}function A(a,b){return d("WACryptoDependencies").getCrypto().subtle.sign(d("WASignalOther").HMAC_SHA256,a,b)}function B(a){return(k||(k=b("Promise"))).all([d("WASignalOther").makeCryptoKey(a.cipherKey,"aes-cbc"),d("WASignalOther").makeCryptoKey(a.macKey,"hmac-sha256")]).then(function(a){var b=a[0];a=a[1];return{cipherKey:b,macKey:a}})}function C(a,b){a=a.aliceBaseKey;return!a?!1:d("WACryptoUtils").serializedPubKeysEqual(a,b)}g.MAX_UNUSED_KEYS=n;g.encryptMsg=a;g.decryptMsg=c;g.findMatchingSession=e;g.decryptPkMsgWithNewSession=f;g.deserializeMsg=r;g.deserializePkMsg=s;g.decryptMsgFromSession=t;g.readContent=x;g.versionByte=y}),98);
__d("WASignalGroupCipher",["WABinary","WACryptoDependencies","WACryptoLibraryConfig","WALogger","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=64;function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=n(a);if(!a.success)return a;a=a.value;var c=a.senderKeyId,e=a.iteration,f=a.signingKeyPublic;a=a.chainKey;c=(yield d("WASignalWhitepaper").initiateSenderKeySessionIncoming(c,e,f,a,b));return d("WAResultOrError").makeResult(c)});return k.apply(this,arguments)}function c(a){a=d("WASignalGroupSession").serializeSenderKeyState(a);var b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,{id:a.senderKeyId,iteration:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").iteration,chainKey:d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey").seed,signingKey:d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey")["public"]},b);return b.readByteArrayView()}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!a.senderKeyStates||a.senderKeyStates.length===0)return d("WAResultOrError").makeError("errSignalNoSession");var c=a.senderKeyStates[a.senderKeyStates.length-1],e=(yield d("WASignalWhitepaper").deriveSenderKeyMsgKey(c.senderKeyChainKey.nextMsgIndex,c.senderKeyChainKey.chainKey)),f=e[0];e=e[1];var g=(yield p(e.seed)),h=g[0];g=g[1];g=(yield d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:g},h,b));h=new(d("WABinary").Binary)();d("encodeProtobuf").encodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,{id:c.senderKeyId,iteration:e.iteration,ciphertext:g},h);b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));b.writeBinary(h);g=d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalSessions").definedOrThrow(c.senderSigningKeyPrivate,"senderSigningKeyPrivate"),c.senderSigningKeyPublic);g=d("WASignalSignatures").signSenderKeyMessage(g,b.readByteArrayView());b=new(d("WABinary").Binary)();b.writeUint8(d("WASignalCipher").versionByte(d("WASignalGroupSession").FORMAT_VERSION,d("WASignalGroupSession").FORMAT_VERSION));b.writeBinary(h);b.writeByteArray(g);h=d("WASignalGroupSession").makeSenderKeyChainKey(e.iteration+1,f);g=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,d("WASignalGroupSession").makeSenderKeyState(c.senderSigningKeyPublic,c.senderSigningKeyPrivate,h,c.senderKeyId,c.unusedMsgKeys));return d("WAResultOrError").makeResult([g,b.readByteArrayView()])});return l.apply(this,arguments)}function f(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.senderKeyMessageId,e=b.iteration,f=b.ciphertext;b=b.versionContentMac;c=d("WASignalGroupSession").findSenderKeyState(a,c);if(c==null)return d("WAResultOrError").makeError("errSignalNoSession");var g=c.senderSigningKeyPublic;b=r(b,g);if(!b)return d("WAResultOrError").makeError("errSignalInvalidKey");g=(yield s(c,e));if(!g.success)return g;b=g.value;c=b.msgKey;e=d("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(a,b.updatedSenderKeyState);g=(yield p(c.seed));a=g[0];b=g[1];c=(yield d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:b},a,f));return d("WAResultOrError").makeResult([e,c])});return m.apply(this,arguments)}function n(a){var b,c,e,f;try{a=d("WASignalCipher").readContent(a,d("WASignalGroupSession").FORMAT_VERSION,0);if(!a.success)return a;a=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,a.value);b=a.id;c=a.iteration;var g=d("WASignalSessions").bytesOrThrow(a.signingKey,33,"signingKey");e=d("WASignalKeys").castToSerializedPubKey(g);f=d("WASignalSessions").bytesOrThrow(a.chainKey,32,"chainKey");if(b==null||c==null)return d("WAResultOrError").makeError("errSignalGrpInvalidProtoFormat")}catch(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["deserializeSenderKeyDistributionMsg error ",""])),a);return d("WAResultOrError").makeError("errSignalGrpInvalidKeyFormat")}return d("WAResultOrError").makeResult({senderKeyId:b,iteration:c,signingKeyPublic:e,chainKey:f})}function o(a){if(a.length<1)return d("WAResultOrError").makeError("errSignalGrpVersionContentEmpty");var b=a[0]>>>4;if(b!==d("WASignalGroupSession").FORMAT_VERSION)return b<d("WASignalGroupSession").FORMAT_VERSION?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");if(a.length<1+j)return d("WAResultOrError").makeError("errSignalGrpInvalidVersionContentLength");var c,e,f;try{b=a.subarray(1,-j);b=d("decodeProtobuf").decodeProtobuf(d("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,b);c=b.id;e=b.iteration;f=b.ciphertext;if(c==null||e==null||f==null)return d("WAResultOrError").makeError("errSignalGrpSenderKeyInvalidProtoFormat")}catch(a){d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Exception caught during SenderKeyMessageSpec Proto: ",""])),a);return d("WAResultOrError").makeError("errSignalGrpSenderKeyProtoError")}return d("WAResultOrError").makeResult({senderKeyMessageId:c,iteration:e,ciphertext:new Uint8Array(f),versionContentMac:a})}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=new(d("WABinary").Binary)(a);var b=d("WASignalOther").readBytes(a,16);a=d("WASignalOther").readBytes(a,32);return[yield d("WASignalOther").makeCryptoKey(a,"aes-cbc"),b]});return q.apply(this,arguments)}function r(a,b){var c=a.subarray(a.length-j);a=a.subarray(0,a.length-j);return d("WASignalSignatures").verifyMsgSignalVariant(b,a,d("WASignalOther").toBytes(d("WASignalOther").toBuffer(c),64))}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a,e=b-c.senderKeyChainKey.nextMsgIndex,f=d("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(e>f)return d("WAResultOrError").makeError("errSignalGrpTooManyMessagesInFuture");f=a.unusedMsgKeys||[];if(e<0){var g=f.findIndex(function(a){return a.iteration===b});return g===-1?d("WAResultOrError").makeError("errDuplicateMsg"):d("WAResultOrError").makeResult({msgKey:f[g],updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(c.senderSigningKeyPublic,c.senderSigningKeyPrivate,c.senderKeyChainKey,c.senderKeyId,u(f,g))})}g=c.senderKeyChainKey.nextMsgIndex;var h=(yield d("WASignalWhitepaper").deriveSenderKeyMsgKey(g,c.senderKeyChainKey.chainKey)),i=h[0];h=h[1];var j=null;if(e>0){e=e+f.length-d("WASignalCipher").MAX_UNUSED_KEYS;e>0?(j=f.slice(e),e-=f.length):j=f.slice();for(g=g+1;g<=b;g++){e>0?e--:j.push(h);var k=(yield d("WASignalWhitepaper").deriveSenderKeyMsgKey(g,i));i=k[0];h=k[1]}}return d("WAResultOrError").makeResult({msgKey:h,updatedSenderKeyState:d("WASignalGroupSession").makeSenderKeyState(c.senderSigningKeyPublic,c.senderSigningKeyPrivate,d("WASignalGroupSession").makeSenderKeyChainKey(b+1,i),a.senderKeyId,j||f)})});return t.apply(this,arguments)}function u(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}g.processSenderKeyDistributionMsg=a;g.createSenderKeyDistributionProto=c;g.encryptSenderKeyMsgWithSession=e;g.decryptSenderKeyMsgFromSession=f;g.deserializeSenderKeyMsg=o}),98);
__d("WACryptoLibrary",["WACryptoUtils","WAJids","WALockMap","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("WALockMap").makeLockMap(60*1e3),k=[],l=300;function m(a){k.push(a),k.length>=l&&k.shift()}function a(a){a(k),k=[]}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){m("createOutgoingSession");b=y(b);var c=b.signedKey;c=(yield d("WASignalSignatures").verifyMsgSignalVariant(b.identity,c.publicKey,c.signature));d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["getSessionForRecipient pkmsg signature verification result: ",""])),c);if(!c){m("createOutgoingSession: errSignalInvalidKey");return d("WAResultOrError").makeError("errSignalInvalidKey")}c=(yield d("WASignalWhitepaper").initiateSessionOutgoing(a,b,d("WASignalKeys").makeKeyPair()));return d("WAResultOrError").makeResult(c)});return o.apply(this,arguments)}function c(a,b,c,d,e){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){a=a.handleNewSession;m("establishOutgoingSession");b=(yield n(b,d));if(!b.success)return b;d=b.value;return a(c,d,d.remote.pubKey,null,e)});return p.apply(this,arguments)}function e(a,c,e,f){var g=a.loadSession,h=a.handleNewSession;m("encryptContent");return j.lock([d("WAJids").extractUserJid(c)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=null;do{var b=(yield g(c,"cryptoLibraryEncryptContent"));if(b==null){m("encryptContent: errSignalInvalidKey");return d("WAResultOrError").makeError("errSignalInvalidKey")}if(f!=null&&!d("WACryptoUtils").uint8ArraysEqual(f,b.remote.pubKey)){m("encryptContent: identity-mismatch");return d("WAResultOrError").makeError("identity-mismatch")}b=(yield d("WASignalCipher").encryptMsg(b,e));var i=b[0];b=b[1];var j=(yield h(c,i,i.remote.pubKey));j.success?a=d("WAResultOrError").makeResult(babelHelpers["extends"]({},b,{baseKey:i.aliceBaseKey})):j.error}while(a==null);return a}))}function f(a,c,e,f,g){var h=a.loadSession,i=a.handleNewSession,k=a.loadSignedPreKey,l=a.loadOneTimePreKey;m("decryptContent");return j.lock([d("WAJids").extractUserJid(e)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=!1,b=(yield h(e,"decryptContent"));if(f.type==="pkmsg"){var j=d("WASignalCipher").deserializePkMsg(f.ciphertext);if(!j.success){m("decryptContent: errCryptoDeserialization");return d("WAResultOrError").makeError("errCryptoDeserialization")}j=j.value;j=(yield q({loadSignedPreKey:k,loadOneTimePreKey:l},c,j,b));if(!j.success)return j;j=j.value}else{f.type;var n=d("WASignalCipher").deserializeMsg(f.ciphertext);if(!n.success){m("decryptContent: errCryptoDeserialization");return d("WAResultOrError").makeError("errCryptoDeserialization")}n=n.value;b=(yield d("WASignalCipher").decryptMsg(b,n));if(!b.success)return b;j=b.value}n=j;b=n.newSessionInfo;b&&(b.newIdentity!=null||b.usedPreKey!=null)&&(yield i(e,b.baseSession,b.newIdentity,b.usedPreKey));if(!a){n=b==null?void 0:b.baseSession.remote.pubKey;yield g(new Uint8Array(j.plaintext),n);a=!0}yield i(e,j.updatedSession,j.updatedSession.remote.pubKey);return d("WAResultOrError").makeResult()}))}function q(a,b,c,d){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a.loadSignedPreKey;a=a.loadOneTimePreKey;m("decryptPkMsg");var g=d("WASignalCipher").findMatchingSession(e,c.sessionBaseKey);if(!g.success)return g;g=g.value;if(g){g=(yield d("WASignalCipher").decryptMsgFromSession(g,c));if(!g.success)return g;g=g.value;var h=g[0];g=g[1];return d("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:h,plaintext:g})}else{h=c.localOneTimeKeyId;g=(yield f(c.localSignedPreKeyId));f=h==null?null:yield a(h);a=(yield d("WASignalCipher").decryptPkMsgWithNewSession(b,e,c,{localSignedPreKey:g,localOneTimeKey:f}));if(!a.success)return a;b=a.value;e=b.newIdentity;c=b.baseSession;g=b.updatedSession;f=b.plaintext;return d("WAResultOrError").makeResult({newSessionInfo:{newIdentity:e,baseSession:c,usedPreKey:h},updatedSession:g,plaintext:f})}});return r.apply(this,arguments)}function s(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;m("encryptGroupContent");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){do{var b=(yield h(e,f));if(!b.success)return d("WAResultOrError").makeError(b.error);b=b.value;var c=(yield d("WASignalGroupCipher").encryptSenderKeyMsgWithSession(b,g));if(c.success){c=c.value;var i=c[0];c=c[1];yield a(e,f,i);i=b.senderKeyStates[b.senderKeyStates.length-1];b=d("WAResultOrError").makeResult({ciphertext:{ciphertext:c,type:"skmsg"},senderKeyId:i.senderKeyId,senderKeyDistributionProto:d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(i))})}else{m("encryptGroupContent: sender-key-no-session");return d("WAResultOrError").makeError("sender-key-no-session")}}while(b==null);return b}))}function t(c,e,f,g,i){var k=c.loadSenderKeySession,a=c.saveSenderKeySession;m("decryptGroupContent");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=!1,c=(yield k(e,f));if(!c.success){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[WACryptoLibrary] Unable to load sender key session for group during decryptGroupContent: ",", author: ",""])),e,f);return d("WAResultOrError").makeError(c.error)}var j=d("WASignalGroupCipher").deserializeSenderKeyMsg(g);if(!j.success){m("decryptGroupContent: errCryptoDeserialization");return d("WAResultOrError").makeError("errCryptoDeserialization")}c=c.value;c=(yield d("WASignalGroupCipher").decryptSenderKeyMsgFromSession(c,j.value));if(!c.success)return c;j=c.value;c=j[0];j=j[1];b||(yield i(new Uint8Array(j)),b=!0);yield a(e,f,c);return d("WAResultOrError").makeResult()}))}function u(c,e,f,g){var h=c.loadSenderKeySession,a=c.saveSenderKeySession;m("saveSenderKeySession");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=null;if(h){var c=(yield h(e,f));b=c.success?c.value:null}c=(yield d("WASignalGroupCipher").processSenderKeyDistributionMsg(g,b));if(!c.success)return c;b=c.value;yield a(e,f,b);return d("WAResultOrError").makeResult()}))}function v(c,e,f,g){var a=c.saveSenderKeySession;m("rotateGroupSenderKey");return j.lock([e,d("WAJids").extractUserJid(f)],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WASignalWhitepaper").initiateSenderKeySessionOutgoing(g)),c=b.senderKeyStates[0].senderKeyId;yield a(e,f,b);return{senderKeyId:c}}))}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.loadSenderKeySession;a=a.saveSenderKeySession;m("createSenderKeyDistributionMsg");var f=(yield e(b,c)),g=f.error;if(!f.success&&g==="errLoadSenderKeySession"){g=(yield d("WASignalKeys").makeKeyPair());yield v({saveSenderKeySession:a},b,c,g);f=(yield e(b,c))}if(f.success){a=f.value.senderKeyStates.slice(-1);if(a.length>0)return d("WAResultOrError").makeResult(d("WASignalGroupCipher").createSenderKeyDistributionProto(d("WASignalGroupSession").convertFromRawToSenderKeyState(a[0])))}m("createSenderKeyDistributionMsg: errGetSenderKeyProto");return d("WAResultOrError").makeError("errGetSenderKeyProto")});return x.apply(this,arguments)}function y(a){var b=a.regId,c=a.identity,e=a.signedKey;a=a.oneTimeKey;m("sanitizeInitialSessionInfo");var f=d("WASignalKeys").castToSerializedPubKey(e.publicKey);return{regId:d("WASignalOther").castRegistrationId(b),identity:d("WASignalKeys").castToSerializedPubKey(c),signedKey:{id:d("WASignalKeys").castToSignedPreKeyId(e.id),publicKey:f,signature:d("WASignalOther").ensureSize(e.signature,64)},oneTimeKey:a&&{id:d("WASignalKeys").castToPreKeyId(a.id),publicKey:d("WASignalKeys").castToSerializedPubKey(a.publicKey)},ratchetKey:f}}g.publishLogs=a;g.createOutgoingSession=n;g.establishOutgoingSession=c;g.encryptContent=e;g.decryptContent=f;g.encryptGroupContent=s;g.decryptGroupContent=t;g.saveSenderKeySession=u;g.rotateGroupSenderKey=v;g.createSenderKeyDistributionMsg=w}),98);
__d("WACryptoSha256",["WABase64","WACryptoDependencies"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return d("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-256"},a)}function i(a){return h(a).then(d("WABase64").encodeB64)}function a(a){return i(j(a))}function j(a){var b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(var d=0,e=a.length;d<e;d++)c[d]=a.charCodeAt(d);return b}g.sha256=h;g.sha256Base64=i;g.sha256Str=a}),98);
__d("WARandomHex",["WACryptoDependencies","WAHex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WAHex").toHex(a)}g.randomHex=a}),98);
__d("WADefaultJobNoQueue",["WAJobOrchestratorTypes","WARandomHex","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$2=!1}var e=a.prototype;e.init=function(a,b){if(this.$2)throw c("err")("DefaultNoQueue has already initialized");this.$1=b;this.$2=!0};e.updateConfig=function(a){};e.isInitialized=function(){return this.$2};e.clearQueue=function(){};e.clearQueueByPriority=function(a){};e.getSnapshot=function(){throw c("err")("getSnapshot is not implemented for DefaultNoQueue")};e.enqueue=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;e=(e=c==null?void 0:c.jobId)!=null?e:d("WARandomHex").randomHex(8).substr(0,64);this.$1.logJobCreated({jobId:e,jobName:a,jobPriority:(a=c==null?void 0:c.priority)!=null?a:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,pendingJobsCount:0});try{this.$1.logJobStarted(e);c=(yield b());this.$1.logJobCompleted(e);return c}catch(a){this.$1.logJobError(e);throw a}});function c(b,c,d){return a.apply(this,arguments)}return c}();return a}();g.WADefaultJobNoQueue=a}),98);
__d("WAParseIqResponse",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=a.content;if(e&&Array.isArray(e)&&e[0]){e=e[0];if(e.tag==="error"){var f=e.attrs||{},g;c&&(typeof c==="function"?g=c(a):g=c.parseOrThrow(e));c=g;return{success:!1,errorCode:parseInt(f.code,10),errorText:d("WAWap").decodeAsString(f.text)||"",errorType:d("WAWap").decodeAsString(f.type)||"",errorBackoff:parseInt(f.backoff,10),toString:h,customError:c}}}if(typeof b==="function")return{success:!0,result:b(a)};else return{success:!0,result:b.parseOrThrow(a)}}function h(){return"IqError "+this.errorCode+": "+this.errorText}g.parseIqResponse=a}),98);
__d("WADeprecatedSendIq",["Promise","WAAckParser","WAArrayUtils","WAComms","WALogger","WAParseIqResponse"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return d("WAComms")._sendIq(a,!1).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b)})}function c(a,b,c){return d("WAComms")._sendIq(a,!1).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b,c)})}function e(a,b,c){return d("WAComms")._sendIq(a,!1,c).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b)})}function f(a,b){return d("WAComms")._sendIq(a,!0).then(function(a){return d("WAParseIqResponse").parseIqResponse(a,b)})}function j(a,b){return k(a,b).then(function(){})}function k(a,c){return new(i||(i=b("Promise")))(function(e){var f=d("WAComms").singletonOrThrowIfUninitialized("deprecatedSendStanzaAndReturnAck"),g=function(a){var b=d("WAAckParser").AckParser.parse(a);return!b.error&&d("WAAckParser").ackMatchesTemplate(b.success,c)?a:null},j={type:"ack",parseAndTest:g,resolve:e,stanza:a,attachedToSocketId:d("WAComms").DEFAULT_SOCKET_ID,orderedId:d("WAComms").getAndIncrementNextOrderedId()};f.ackHandlers.push(j);if(!f.socket){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will send stanza when socket opens"])));return}f.callStanza(a)["catch"](function(a){var c=f.ackHandlers.indexOf(j);if(c===-1)return;d("WAArrayUtils").removeIndexWithoutPreservingOrder(f.ackHandlers,c);j.resolve((i||(i=b("Promise"))).reject(a))})})}function l(a,b){d("WAComms").castSmaxStanza(a,b)}g.deprecatedSendIq=a;g.deprecatedSendIqErrorParser=c;g.deprecatedSendIqIfConnectedWithin=e;g.deprecatedSendIqWithoutRetry=f;g.deprecatedSendStanzaAndWaitForAck=j;g.deprecatedSendStanzaAndReturnAck=k;g.deprecatedCastStanza=l}),98);
__d("WAExponentialIterator",[],(function(a,b,c,d,e,f){"use strict";function* a(a){var b=1;while(!0)yield b,b*=a}f["default"]=a}),66);
__d("WAExponentialBackoffIterator",["WAExponentialIterator"],(function(a,b,c,d,e,f,g){"use strict";var h={factor:2,jitter:0,maxTimeout:Infinity};function* a(a){a=babelHelpers["extends"]({},h,a);var b=a.factor,d=a.jitter,e=a.maxTimeout,f=a.minTimeout;a=a.retries;var g=0;for(b of c("WAExponentialIterator")(b)){g++;if(g>a)return;var i=1+(Math.random()*d*2-d);yield Math.min(f*b*i,e)}}g.defaults=h;g.exponentialBackoffIterator=a}),98);
__d("WAExponentialBackoff",["WABackoff","WAExponentialBackoffIterator"],(function(a,b,c,d,e,f,g){"use strict";var h=["signal","timeoutIncludesTaskDuration"],i=babelHelpers["extends"]({},d("WAExponentialBackoffIterator").defaults,d("WABackoff").defaults);function a(a,b){a=babelHelpers["extends"]({},i,a);var c=a.signal,e=a.timeoutIncludesTaskDuration;a=babelHelpers.objectWithoutPropertiesLoose(a,h);a=d("WAExponentialBackoffIterator").exponentialBackoffIterator(a);return d("WABackoff").backoff({signal:c,timeoutIterator:a,timeoutIncludesTaskDuration:e},b)}g.exponentialBackoff=a}),98);
__d("WAFtsV3IndexEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){return{id:a,chatId:b,timestamp:c,prefixes:d}}function b(a,b,c,d,e){return{ftsRowId:a,id:b,chatId:c,timestamp:d,prefixes:e}}f.buildEntry=a;f.buildDBEntry=b}),66);
__d("WAJobRequirement",["Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c=function(){function a(a){var c=this;this.$1=(i||(i=b("Promise"))).resolve();this.$2=!0;this.$3=null;this.$4=function(){var a=c.$3;if(a!=null){c.$3=null;return(i||(i=b("Promise"))).all(a).then(c.$4)}c.$2=!0};this.name=a}var c=a.prototype;c.addBlocker=function(a){var c=this;a=a["catch"](function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["JobRequirement[","] blocker errored ",""])),c.name,a).sendLogs("job-blocker-rejected")});if(this.$2)this.$2=!1,this.$1=(i||(i=b("Promise"))).all([this.$1,a]).then(this.$4);else{var e=this.$3;e!=null?e.push(a):this.$3=[a]}};c.waitUntilSatisfied=function(){return this.$1};c.isSatisfied=function(){return this.$2};c.isSatisfiable=function(){return!0};return a}();e=function(a){function c(c){c=a.call(this,c)||this;a.prototype.addBlocker.call(c,new(i||(i=b("Promise")))(function(){}));return c}babelHelpers.inheritsLoose(c,a);var d=c.prototype;d.addBlocker=function(){};d.isSatisfiable=function(){return!1};return c}(c);function a(a,c){var d=a.filter(function(a){return!a.isSatisfiable()});if(d.length>0){var e=d.map(function(a){return a.name});return function(a){c==null||c("unsatisfiable",e,a);return d[0].waitUntilSatisfied()}}var f=a.map(function(){return(i||(i=b("Promise"))).resolve()}),g=(i||(i=b("Promise"))).resolve(),h=null,j=function(){if(f.every(function(b,c){return b===a[c].waitUntilSatisfied()})){h=null;return}var c=[],d=a.map(function(a){var b=a.waitUntilSatisfied();a.isSatisfied()||(c.push(a.name),void b.then(function(){var b=c.indexOf(a.name);c.splice(b,1)}));return b});f=d;h=c;return(i||(i=b("Promise"))).all(d).then(j)};return function(a){if(h==null){var b=j();b!=null&&(g=g.then(function(){return b}))}c==null||c(h==null?"satisfied":"unsatisfied",h,a);return g}}g.JobRequirement=c;g.UnsatisfiableJobRequirement=e;g.joinRequirements=a}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){this.key=a,this.value=b,this.prev=null,this.next=null};a=function(){function a(a){var b=this,e;this.$2=new Map();this.purgeNow=function(){for(var a=b.$6.prev;b.$4>b.$3&&a!==b.$5;a=a?a.prev:null){if(a==null)throw c("err")("The linked list is not constructed properly.");var d=a,e=d.key;d=d.value;if(!b.$9(e,d))continue;b["delete"](e);b.$10&&b.$10(e,d)}b.$8&&b.$8(b.$2)};this.$3=a.sizeLimit;this.$7=a.getSize;this.$8=a.onPurge;this.$9=(e=a.shouldEvict)!=null?e:function(){return!0};this.$10=a.onEvict;this.$11=a.onAdd;this.$12=a.onDelete;this.$4=0;this.$5=new i("placeholder-head",null);this.$6=new i("placeholder-tail",null);this.$5.next=this.$6;this.$6.prev=this.$5;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){return b.purgeNow()})}var b=a.prototype;b.get=function(a){if(!this.$2.has(a))return null;a=this.$2.get(a);if(a==null)return null;var b=a.prev,d=a.next;b&&(b.next=d);d&&(d.prev=b);d=this.$5.next;if(d==null)throw c("err")("The linked list is not constructed properly.");this.$5.next=a;d.prev=a;a.prev=this.$5;a.next=d;return a.value};b.has=function(a){return this.$2.has(a)};b.touch=function(a){this.get(a)};b.put=function(a,b){if(this.$3===0)return;if(this.$7(b)>this.$3){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."])));return}this["delete"](a);this.$14(a,b);this.schedulePurge()};b.$14=function(a,b){var d=new i(a,b);this.$2.set(a,d);var e=this.$5.next;if(e==null)throw c("err")("The linked list is not constructed properly.");this.$5.next=d;e.prev=d;d.prev=this.$5;d.next=e;this.$4+=this.$7(b);this.$11&&this.$11(a,b)};b["delete"]=function(a){if(!this.$2.has(a))return;var b=this.$2.get(a);if(b==null)return;this.$4-=this.$7(b.value);var c=b.prev,d=b.next;c&&(c.next=d);d&&(d.prev=c);this.$2["delete"](a);this.$12&&this.$12(a,b.value)};b.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()};b.schedulePurge=function(){this.$1.onOrBefore(1e3)};b.getCurrentSize=function(){return this.$4};b.getPlaceholderHead=function(){return this.$5};b.forEach=function(a){if(this.$4===0)return;var b=this.$6.prev;if(b==null)throw c("err")("The linked list is not constructed properly.");while(b!=null&&b!==this.$5)a(b.value),b=b.prev};return a}();g.LruCache=a}),98);
__d("WAOnceWithReset",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){var b=g,c=function(){if(b===g){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];b=a.call.apply(a,[this].concat(d))}return b};c.reset=function(){b=g};return c}f["default"]=a}),66);
__d("WAPREList",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});f.PRE_METRIC=a}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;c=6e4;e=18e4;f=10*60*1e3;var k=0;function a(){var c=[];function e(a){c.push(a)}function b(){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),c.length=0}function a(a){c.length===0&&d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),a.name,a.stage),c.forEach(function(b){b(a)})}return{subscribe:e,notify:a,clear:b}}a=a();var l=a.notify,m=a.clear;a=a.subscribe;var n;"FinalizationRegistry"in self&&"WeakRef"in self&&(n=new FinalizationRegistry(function(a){var b=a.event;a=a.eventFlow;if(a.isActive())try{d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),b)}catch(a){}}));var o=new Set([d("WAPREList").PRE_METRIC.SEND_MESSAGE,d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function b(a,b,c,d){c==null&&k++;var e=c!=null?c:k,f="open";c==null?l({name:a,stage:"START",instanceKey:e,annotations:b,timeoutInMs:d}):l({name:a,stage:"RESUME",instanceKey:e,annotations:b});var g;function h(){if(g!=null){var a=g.deref();if(a!=null){var b;(b=n)==null||b.unregister(a)}}}d={addPoint:function(c,b){l({name:a,stage:"POINT",reason:c,instanceKey:e,annotations:b})},addAnnotations:function(b){l({name:a,stage:"ANNOTATE",instanceKey:e,annotations:b})},endSuccess:function(b){l({name:a,stage:"SUCCESS",instanceKey:e,annotations:b}),f="closed",h()},endCancel:function(b){l({name:a,stage:"CANCEL",instanceKey:e,annotations:b}),h()},endFail:function(c,b){l({name:a,stage:"FAIL",reason:c,instanceKey:e,annotations:b}),f="closed",h()},getFlowDetails:function(){return{name:a,instanceKey:e}},isActive:function(){return f==="open"}};n&&!o.has(a)&&c==null&&(n.register(d,{event:a,eventFlow:{endCancel:d.endCancel,isActive:d.isActive}}),g=new WeakRef(d));return d}g.QPL_DEFAULT_TIMEOUT_IN_MS=c;g.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=e;g.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=f;g.clear=m;g.subscribe=a;g.startMetric=b}),98);
__d("WAPersistedJobManager",["Promise","WAJobRequirement","WALogger","WAPromiseBackoffs","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=1,M=function(){function a(a){this.feature=a}var b=a.prototype;b.toString=function(){return"RequiresPage: "+this.feature};return a}(),N=function(){function a(a){this.backoffOptions=a}var b=a.prototype;b.toString=function(){return"RetryOnBackoff"};return a}();a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.toString=function(){return"NonRetryableError"};return b}(babelHelpers.wrapNativeSuper(Error));var O=function(a){this.result=a},P="$unstarted",Q="$finished";c=function(){function a(a){var c=this,e=a.isRestartAfterCrash,f=a.accessors,g=a.unfinishedJobEntries,j=new Map();g=g.then(function(a){var g=[],k=[];a.forEach(function(a){a.stepHardStartCountAfterTimeout>=5?g.push(a):k.push(a)});return(K||(K=b("Promise"))).all(g.map(function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["",": stuck on the step ",", aborting the job"])),S(a),a.step).devConsole(R(a)).sendLogs("job-stuck-"+a.type);return f.deletePersistedJob(a.jobId)})).then(function(){k.forEach(function(a){if(j.has(a.jobId))return;d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["",": restarting"])),R(a));j.set(a.jobId,c.$1(a,e))})})});this.implementationLoaders=new Map();this.implementations=new Map();this.stepBlockers=new WeakMap();this.accessors=f;this.activeJobs=j;this.initialJobsPromise=g;this.listeners=a.listeners;this.deprecatedJobs=a.deprecatedJobs}var c=a.prototype;c.loadAndRunJobFromId=function(a){var b=this.activeJobs.get(a);if(b!=null)return b;b=this.$2(a);this.activeJobs.set(a,b);return b};c.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.initialJobsPromise,c=this.accessors;yield b;b=(yield c.readPersistedJob(a));if(!b){d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["No entry for job ",""])),a);d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Persisted job missing for given ID"])));return null}return this.$1(b,!1)});function c(b){return a.apply(this,arguments)}return c}();c.$3=function(a){var b=this.implementations,c=this.implementationLoaders,d=b.get(a);if(d)return d;d=c.get(a);if(!d)return null;c=d();b.set(a,c);return c};c.$4=function(a,c){if(c==null||c.length===0)return(K||(K=b("Promise"))).resolve();var e=this.stepBlockers,f=e.get(c);f==null&&(f=d("WAJobRequirement").joinRequirements(c.map(function(a){return a()}),U),e.set(c,f));return f(a)};c.$5=function(a,b,c,e){var f=this;c===void 0&&(c=!1);var g=a.step,h=b.findIndex(function(a){return a.stepName===g}),i=b[h].info(a.current,a.original,V(a,c)),j=i.requirements,k=i.code;i=this.$4(a,j);e&&(i=i.then(e));return i.then(function(){d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["",": running step"])),T(a));return k(a.current,a.original,V(a,c))}).then(function(e){if(e instanceof O){d("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["",": InterruptJob"])),T(a));return e.result}var g=h+1;if(g>=b.length)return e;g=b[g];a.step=g.stepName;a.current=e;a.stepHardStartCountAfterTimeout=0;a.stepFirstStartTime=d("WATimeUtils").unixTime();a.stepUnexpectedErrorCount=0;a.waitUntil=null;a.backedOffCount=0;return f.accessors.updatePersistedJob(a).then(function(){return f.$5(a,b,c)})})};c.$1=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=this,f=this.accessors,g=this.activeJobs,h=this.deprecatedJobs,i=this.listeners,j=i.onJobFinished;i=i.onJobStarted;var k=(yield this.$3(a.type));h=h[a.type];if(!k){if(!h){d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",". Maybe it should have been put to the deprecated list?"])),a.type).sendLogs("missing-job-implementation");yield f.deletePersistedJob(a.jobId);return null}else if(h==="NOOP"){d("WALogger").WARN(o||(o=babelHelpers.taggedTemplateLiteralLoose(["No implementation for deprecated ",", job deleted"])),a.type);yield f.deletePersistedJob(a.jobId);return null}k=(yield h())}var l=k;h&&d("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Running deprecated job ",""])),a.type);var m=(h=a.stepFirstStartTime)!=null?h:d("WATimeUtils").unixTime();a.stepFirstStartTime=m;a.stepUnexpectedErrorCount=a.stepUnexpectedErrorCount||0;a.backedOffCount=a.backedOffCount||0;if(a.step===Q){h=a.waitUntil;var E=d("WATimeUtils").secondsUntil(m);h!=null&&d("WATimeUtils").isInFuture(h)&&E>0&&(d("WALogger").LOG(q||(q=babelHelpers.taggedTemplateLiteralLoose(["",": skew detected, adjusting accordingly"])),R(a)),h=d("WATimeUtils").castToUnixTime(h-E),d("WATimeUtils").isInFuture(h)&&(a.stepFirstStartTime=d("WATimeUtils").castToUnixTime(m-E),a.waitUntil=h,yield this.accessors.updatePersistedJob(a)));(h==null||!d("WATimeUtils").isInFuture(h))&&(d("WALogger").LOG(r||(r=babelHelpers.taggedTemplateLiteralLoose(["",": removing completed, expired job from db"])),R(a)),yield f.deletePersistedJob(a.jobId));g["delete"](a.jobId);return a.current}E=a.step!==P?k.find(function(b){return b.stepName===a.step}):k[0];if(!E){d("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",".",""])),a.type,a.step).sendLogs("missing-job-step");yield f.deletePersistedJob(a.jobId);return null}a.step=E.stepName;var F=function(){var f=a.waitUntil,g=(K||(K=b("Promise"))).resolve();if(f!=null){var h=d("WATimeUtils").futureUnixTime(d("WATimeUtils").DAY_SECONDS);f>h?(d("WALogger").LOG(t||(t=babelHelpers.taggedTemplateLiteralLoose(["",": trim wait from "," to ",""])),T(a),f,h),a.waitUntil=h,g=e.accessors.updatePersistedJob(a).then(function(){return d("WATimeUtils").delayUntil(h)})):(d("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["",": delaying until ",""])),T(a),f),g=d("WATimeUtils").delayUntil(f))}return g.then(function(){var f=function(){a.waitUntil=null;d("WATimeUtils").happenedWithin(m,d("WATimeUtils").DAY_SECONDS)||a.stepHardStartCountAfterTimeout++;return e.accessors.updatePersistedJob(a)};return e.$5(a,l,c,f)["catch"](function(c){if(c instanceof M){d("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["",": requires page"])),T(a));a.stepHardStartCountAfterTimeout>0&&(--a.stepHardStartCountAfterTimeout,e.accessors.updatePersistedJob(a));return new(K||(K=b("Promise")))(function(){})}else if(c instanceof N){d("WALogger").LOG(w||(w=babelHelpers.taggedTemplateLiteralLoose(["",": RetryOnBackoff"])),T(a));var f=d("WAPromiseBackoffs").getDelay(++a.backedOffCount,c.backoffOptions);a.waitUntil=d("WATimeUtils").futureUnixTime(Math.ceil(f/1e3));a.stepHardStartCountAfterTimeout>0&&--a.stepHardStartCountAfterTimeout;return e.accessors.updatePersistedJob(a).then(F)}else if(a.stepUnexpectedErrorCount<L){d("WALogger").WARN(x||(x=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception. Tried "," times"])),T(a),a.stepUnexpectedErrorCount);d("WALogger").WARN(y||(y=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception: ",""])),T(a),c);a.stepUnexpectedErrorCount++;return e.accessors.updatePersistedJob(a).then(F)}throw c})})},G=F();h=G.then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("WALogger").LOG(z||(z=babelHelpers.taggedTemplateLiteralLoose(["",": finished job"])),T(a));var c=null;try{c=j(a.jobId,a.type,a.original,b)}catch(b){d("WALogger").ERROR(A||(A=babelHelpers.taggedTemplateLiteralLoose(["onJobFinished for "," threw exception ",""])),a.type,b).sendLogs("onJobFinished-threw")}c!=null&&c>0?(a.waitUntil=d("WATimeUtils").futureUnixTime(Math.ceil(c/1e3)),a.step=Q,a.current=b,a.stepFirstStartTime=d("WATimeUtils").unixTime(),yield e.accessors.updatePersistedJob(a)):(yield f.deletePersistedJob(a.jobId),g["delete"](a.jobId))});return function(a){return c.apply(this,arguments)}}(),function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("WALogger").ERROR(B||(B=babelHelpers.taggedTemplateLiteralLoose([""," failed with error ",""])),a.type,b).sendLogs("job-threw-exception-"+a.type);b=l.find(function(b){return b.stepName===a.step});if(!b)d("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["",": "," step not found"])),a.type,a.step);else{b=b.info(a.current,a.original,V(a,c));b.stopRetryIf!=null&&(yield b.stopRetryIf.onStopRetry(a.current,a.original,V(a,c)))}yield f.deletePersistedJob(a.jobId);g["delete"](a.jobId)});return function(a){return e.apply(this,arguments)}}());try{i(a.jobId,a.type,a.original)}catch(b){d("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["onJobStarted for "," threw exception ",""])),a.type,b).sendLogs("onJobStarted-threw")}return h.then(function(){return G})});function c(b,c){return a.apply(this,arguments)}return c}();c.addPersistedJobImplementation=function(a,b){var c=this.implementationLoaders,e=this.deprecatedJobs;if(c.has(a)){d("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["addPersistedJobImplementation called twice for ",""])),a).sendLogs("repeat-job-loader");return}e&&e[a]&&d("WALogger").DEV(F||(F=babelHelpers.taggedTemplateLiteralLoose([""," has been loaded and is marked as deprecated"])),a);c.set(a,b)};c.fireAndForget=function(a){var b=this;this.accessors.maybeCreateJob(a).then(function(a){a=a.id;return b.loadAndRunJobFromId(a)})};c.waitUntilPersisted=function(a){var b=this;return this.accessors.maybeCreateJob(a).then(function(a){a=a.id;b.loadAndRunJobFromId(a)})};c.waitUntilCompleted=function(a){var b=this;return this.accessors.maybeCreateJob(a).then(function(a){a=a.id;return b.loadAndRunJobFromId(a)})};c.fireAndForgetNonPersisted=function(a){d("WALogger").LOG(G||(G=babelHelpers.taggedTemplateLiteralLoose(["fireAndForgetNonPersisted not implemented in PersistedJobManager"])))};c.waitUntilCompletedNonPersisted=function(a){return(K||(K=b("Promise"))).resolve(function(){return d("WALogger").LOG(H||(H=babelHelpers.taggedTemplateLiteralLoose(["waitUntilCompletedNonPersisted not implemented in PersistedJobManager"])))})};return a}();function R(a){return"Job["+a.jobId+"] ("+a.type+")"}function S(a){return"[Job "+a.type+"] "}function T(a){return"Job["+a.jobId+"] ("+a.type+"."+a.step+")"}function U(a,b,c){a==="unsatisfiable"?d("WALogger").LOG(I||(I=babelHelpers.taggedTemplateLiteralLoose([""," halting because of ",""])),T(c),b):a==="unsatisfied"?d("WALogger").LOG(J||(J=babelHelpers.taggedTemplateLiteralLoose([""," waiting on ",""])),T(c),b):a}function V(a,b){b===void 0&&(b=!1);return{jobStartTime:a.startTime,afterCrash:b,interruptJob:W}}function W(a){return new O(a)}g.RequiresPage=M;g.RetryOnBackoff=N;g.NonRetryableError=a;g.InterruptJob=O;g.UNSTARTED_JOB=P;g.FINISHED_JOB=Q;g.PersistedJobManager=c}),98);
__d("WAPromiseEach",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[];for(var d=0;d<a.length;d++)c.push(yield b(a[d],d));return c});return function(b,c){return a.apply(this,arguments)}}();f.promiseEach=a}),66);
__d("WAPromiseMap",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){return(g||(g=b("Promise"))).resolve(a).then(function(a){return(g||(g=b("Promise"))).all(a.map(function(a,b){return c(a,b)}))})}f.promiseMap=a}),66);
__d("WAProtobufsUserPassword.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,PBKDF2_HMAC_SHA512:1,PBKDF2_HMAC_SHA384:2});c=b("$InternalEnum")({UTF8:0,UTF8_BROKEN:1});e={};f={};b={};e.name="UserPassword";e.internalSpec={encoding:[1,(d=d("WAProtoConst")).TYPES.ENUM,c],transformer:[2,d.TYPES.ENUM,a],transformerArg:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],transformedData:[4,d.TYPES.BYTES]};f.name="UserPassword$TransformerArg";f.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,b]};b.name="UserPassword$TransformerArg$Value";b.internalSpec={asBlob:[1,d.TYPES.BYTES],asUnsignedInteger:[2,d.TYPES.UINT32],__oneofs__:{value:["asBlob","asUnsignedInteger"]}};g.UserPassword$Transformer=a;g.UserPassword$Encoding=c;g.UserPasswordSpec=e;g.UserPassword$TransformerArgSpec=f;g.UserPassword$TransformerArg$ValueSpec=b}),98);
__d("WAProtobufsChatLockSettings.pb",["WAProtoConst","WAProtobufsUserPassword.pb"],(function(a,b,c,d,e,f,g){a={};a.name="ChatLockSettings";a.internalSpec={hideLockedChats:[1,d("WAProtoConst").TYPES.BOOL],secretCode:[2,d("WAProtoConst").TYPES.MESSAGE,d("WAProtobufsUserPassword.pb").UserPasswordSpec]};g.ChatLockSettingsSpec=a}),98);
__d("WAProtobufsDeviceCapabilities.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({NONE:0,MINIMAL:1,FULL:2});c={};e={};f={};b={};c.name="DeviceCapabilities";c.internalSpec={chatLockSupportLevel:[1,(d=d("WAProtoConst")).TYPES.ENUM,a],lidMigration:[2,d.TYPES.MESSAGE,b],businessBroadcast:[3,d.TYPES.MESSAGE,f],userHasAvatar:[4,d.TYPES.MESSAGE,e]};e.name="DeviceCapabilities$UserHasAvatar";e.internalSpec={userHasAvatar:[1,d.TYPES.BOOL]};f.name="DeviceCapabilities$BusinessBroadcast";f.internalSpec={importListEnabled:[1,d.TYPES.BOOL]};b.name="DeviceCapabilities$LIDMigration";b.internalSpec={chatDbMigrationTimestamp:[1,d.TYPES.UINT64]};g.DeviceCapabilities$ChatLockSupportLevel=a;g.DeviceCapabilitiesSpec=c;g.DeviceCapabilities$UserHasAvatarSpec=e;g.DeviceCapabilities$BusinessBroadcastSpec=f;g.DeviceCapabilities$LIDMigrationSpec=b}),98);
__d("WAProtocol.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({UNKNOWN:0,CHAT_SETTING:1,BIZ_SUPPORTS_FB_HOSTING:2,UNKNOWN_GROUP:3});c={};e={};c.name="MessageKey";c.internalSpec={remoteJid:[1,(f=d("WAProtoConst")).TYPES.STRING],fromMe:[2,f.TYPES.BOOL],id:[3,f.TYPES.STRING],participant:[4,f.TYPES.STRING]};e.internalDefaults={trigger:a.UNKNOWN};e.name="LimitSharing";e.internalSpec={sharingLimited:[1,f.TYPES.BOOL],trigger:[2,f.TYPES.ENUM,a],limitSharingSettingTimestamp:[3,f.TYPES.INT64],initiatedByMe:[4,f.TYPES.BOOL]};g.LimitSharing$Trigger=a;g.MessageKeySpec=c;g.LimitSharingSpec=e}),98);
__d("WASemaphore",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){a===void 0&&(a=1),this.$1=0,this.$3=[],this.$2=a}var d=a.prototype;d.acquire=function(){var a=this;return new(h||(h=b("Promise")))(function(b,c){a.$4(b,c)})};d.availablePermits=function(){return this.$2-this.$1};d.$5=function(){this.$1--,this.$6()};d.$4=function(a,b){var d=this;if(this.$1<this.$2){this.$1++;var e=!1;a({release:function(){if(e)throw c("err")("Permit has already been released");e=!0;d.$5()}})}else this.$7(a,b)};d.$7=function(a,b){this.$3.push([a,b])};d.$6=function(){if(this.$3.length===0)return;var a=this.$3.shift(),b=a[0];a=a[1];this.$4(b,a)};return a}();g.Semaphore=a}),98);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({SET:0,REMOVE:1});c={};e={};f={};b={};var h={},i={},j={},k={},l={},m={},n={};c.name="SyncdVersion";c.internalSpec={version:[1,(d=d("WAProtoConst")).TYPES.UINT64]};e.name="ExitCode";e.internalSpec={code:[1,d.TYPES.UINT64],text:[2,d.TYPES.STRING]};f.name="SyncdIndex";f.internalSpec={blob:[1,d.TYPES.BYTES]};b.name="SyncdValue";b.internalSpec={blob:[1,d.TYPES.BYTES]};h.name="KeyId";h.internalSpec={id:[1,d.TYPES.BYTES]};i.name="SyncdRecord";i.internalSpec={index:[1,d.TYPES.MESSAGE,f],value:[2,d.TYPES.MESSAGE,b],keyId:[3,d.TYPES.MESSAGE,h]};j.name="ExternalBlobReference";j.internalSpec={mediaKey:[1,d.TYPES.BYTES],directPath:[2,d.TYPES.STRING],handle:[3,d.TYPES.STRING],fileSizeBytes:[4,d.TYPES.UINT64],fileSha256:[5,d.TYPES.BYTES],fileEncSha256:[6,d.TYPES.BYTES]};k.name="SyncdSnapshot";k.internalSpec={version:[1,d.TYPES.MESSAGE,c],records:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],mac:[3,d.TYPES.BYTES],keyId:[4,d.TYPES.MESSAGE,h]};l.name="SyncdMutations";l.internalSpec={mutations:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};m.name="SyncdMutation";m.internalSpec={operation:[1,d.TYPES.ENUM,a],record:[2,d.TYPES.MESSAGE,i]};n.name="SyncdPatch";n.internalSpec={version:[1,d.TYPES.MESSAGE,c],mutations:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m],externalMutations:[3,d.TYPES.MESSAGE,j],snapshotMac:[4,d.TYPES.BYTES],patchMac:[5,d.TYPES.BYTES],keyId:[6,d.TYPES.MESSAGE,h],exitCode:[7,d.TYPES.MESSAGE,e],deviceIndex:[8,d.TYPES.UINT32],clientDebugData:[9,d.TYPES.BYTES]};g.SyncdMutation$SyncdOperation=a;g.SyncdVersionSpec=c;g.ExitCodeSpec=e;g.SyncdIndexSpec=f;g.SyncdValueSpec=b;g.KeyIdSpec=h;g.SyncdRecordSpec=i;g.ExternalBlobReferenceSpec=j;g.SyncdSnapshotSpec=k;g.SyncdMutationsSpec=l;g.SyncdMutationSpec=m;g.SyncdPatchSpec=n}),98);
__d("WASmaxAttrs",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return d("WAWap").DROP_ATTR;else return a(b)}function b(a,b){if(b)return a;else return d("WAWap").DROP_ATTR}g.OPTIONAL=a;g.OPTIONAL_LITERAL=b}),98);
__d("WASmaxInBizAccessTokenIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBizAccessTokenIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizAccessTokenIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceErrors",["WAResultOrError","WASmaxInBizAccessTokenIQErrorBadRequestMixin","WASmaxInBizAccessTokenIQErrorForbiddenMixin","WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin","WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBizAccessTokenIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBizAccessTokenIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:c.value});var e=d("WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:e.value});var f=d("WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[b,c,e,f])}g.parseRequestSilentNonceErrors=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseError",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin","WASmaxInBizAccessTokenRequestSilentNonceErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBizAccessTokenRequestSilentNonceErrors").parseRequestSilentNonceErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestSilentNonceErrors:b.value}))}g.parseRequestSilentNonceResponseError=a}),98);
__d("WASmaxInBizAccessTokenIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBizAccessTokenIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizAccessTokenIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQResultResponseMixin=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"result");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"status","RecoveryRequired");if(!e.success)return e;c=d("WASmaxParseUtils").attrString(c.value,"email");if(!c.success)return c;a=d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({resultStatus:e.value,resultEmail:c.value},a.value))}g.parseRequestSilentNonceResponseRecoveryRequired=a}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"result");if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"status","Success");if(!c.success)return c;a=d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({resultStatus:c.value},a.value))}g.parseRequestSilentNonceResponseSuccess=a}),98);
__d("WASmaxOutBizAccessTokenBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBizAccessTokenBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqFrom;a=d("WASmaxOutBizAccessTokenBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{from:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),to:d("WAWap").S_WHATSAPP_NET}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHackBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizAccessTokenRequestSilentNonceRequest",["WASmaxJsx","WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin").mergeHackBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:d("WAWap").INT(118)}),a);return a}g.makeRequestSilentNonceRequest=a}),98);
__d("WASmaxParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(a){function b(b){var c;c=a.call(this,"SmaxParsingFailure: "+b)||this;c.name="SmaxParsingFailure";c.reason=b;return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.toString=function(){return"SmaxParsingFailure: "+this.reason};return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxParsingFailure=a}),66);
__d("WASmaxRpcUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Object.keys(b).map(function(a){var c=a==="Request"?"<request>":'<response name="'+a+'">';return"Tried "+c+", but failed with "+b[a].error+"."}).join(" ");return'Failed to parse incoming stanza of <rpc name="'+a+'">. '+c}f.errorMessageRpcParsing=a}),66);
__d("WASmaxBizAccessTokenRequestSilentNonceRPC",["WAComms","WASmaxInBizAccessTokenRequestSilentNonceResponseError","WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired","WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess","WASmaxOutBizAccessTokenRequestSilentNonceRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutBizAccessTokenRequestSilentNonceRequest").makeRequestSilentNonceRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess").parseRequestSilentNonceResponseSuccess(b,a);if(c.success)return{name:"RequestSilentNonceResponseSuccess",value:c.value};var e=d("WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired").parseRequestSilentNonceResponseRecoveryRequired(b,a);if(e.success)return{name:"RequestSilentNonceResponseRecoveryRequired",value:e.value};b=d("WASmaxInBizAccessTokenRequestSilentNonceResponseError").parseRequestSilentNonceResponseError(b,a);if(b.success)return{name:"RequestSilentNonceResponseError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RequestSilentNonce",{Success:c,RecoveryRequired:e,Error:b}))});return h.apply(this,arguments)}g.sendRequestSilentNonceRPC=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountCommonAdAccountErrors",["WAResultOrError","WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin","WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin","WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin","WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:c.value});var e=d("WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:e.value});var f=d("WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[b,c,e,f])}g.parseCommonAdAccountErrors=a}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBizCtwaAdAccountIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQErrorResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError",["WAResultOrError","WASmaxInBizCtwaAdAccountCommonAdAccountErrors","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBizCtwaAdAccountCommonAdAccountErrors").parseCommonAdAccountErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorCommonAdAccountErrors:b.value}))}g.parseGetAccessTokenAndSessionCookiesResponseError=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"code","432");if(!e.success)return e;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"text","INCORRECT_NONCE");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorCode:e.value,errorText:c.value},a.value))}g.parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce=a}),98);
__d("WASmaxInBizCtwaAdAccountIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBizCtwaAdAccountIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({to:c.value},a.value))}g.parseHackBaseIQResultResponseMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"access_token");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(a,"session_cookies");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(a,"business_person");if(!f.success)return f;c=d("WASmaxParseUtils").contentString(c.value);if(!c.success)return c;e=d("WASmaxParseUtils").contentString(e.value);if(!e.success)return e;f=d("WASmaxParseUtils").attrString(f.value,"id");if(!f.success)return f;a=d("WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({accessTokenElementValue:c.value,sessionCookiesElementValue:e.value,businessPersonId:f.value},a.value))}g.parseGetAccessTokenAndSessionCookiesResponseSuccess=a}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"code","431");if(!e.success)return e;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"text","TOO_MANY_ATTEMPTS");if(!c.success)return c;a=d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorCode:e.value,errorText:c.value},a.value))}g.parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts=a}),98);
__d("WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqFrom;a=d("WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{from:d("WASmaxAttrs").OPTIONAL(d("WAWap").USER_JID,a),to:d("WAWap").S_WHATSAPP_NET}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHackBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest",["WASmaxJsx","WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=a.codeElementValue;b=d("WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin").mergeHackBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:d("WAWap").INT(104)},d("WASmaxJsx").smax("parameters",null,d("WASmaxJsx").smax("code",null,b))),a);return b}g.makeGetAccessTokenAndSessionCookiesRequest=a}),98);
__d("WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC",["WAComms","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts","WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest").makeGetAccessTokenAndSessionCookiesRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess").parseGetAccessTokenAndSessionCookiesResponseSuccess(b,a);if(c.success)return{name:"GetAccessTokenAndSessionCookiesResponseSuccess",value:c.value};var e=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts").parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts(b,a);if(e.success)return{name:"GetAccessTokenAndSessionCookiesResponseTooManyAttempts",value:e.value};var f=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce").parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce(b,a);if(f.success)return{name:"GetAccessTokenAndSessionCookiesResponseIncorrectNonce",value:f.value};b=d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError").parseGetAccessTokenAndSessionCookiesResponseError(b,a);if(b.success)return{name:"GetAccessTokenAndSessionCookiesResponseError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetAccessTokenAndSessionCookies",{Success:c,TooManyAttempts:e,IncorrectNonce:f,Error:b}))});return h.apply(this,arguments)}g.sendGetAccessTokenAndSessionCookiesRPC=a}),98);
__d("WASmaxChildren",["WADeepEquals"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return null;else return a(b)}function b(a,b){if(b==null)return null;else if(b)return a()}function c(a,b){if(b)for(var c=1;c<b.length;c++)if(!d("WADeepEquals").deepEqual(b[c],b[0]))throw new Error("expected all homogeneous children to be equal, but they were not");c=h(a,b,0,Infinity);return c}function e(a,b){return i(a,b,0,Infinity)}function h(a,b,c,d){if(b==null){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}var e=b.length;if(e<c)throw new Error("expected at least "+c+" children, but found "+e);else if(e>d)throw new Error("expected at most "+d+" children, but found "+e);return b.map(function(b){return a(b)})}function i(a,b,c,d){if(b===0){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}if(b<c)throw new Error("expected at least "+c+" children, but found "+b);else if(b>d)throw new Error("expected at most "+d+" children, but found "+b);c=[];for(d=0;d<b;d++)c.push(a());return c}g.OPTIONAL_CHILD=a;g.HAS_OPTIONAL_CHILD=b;g.HOMOGENEOUS_CHILD=c;g.HOMOGENEOUS_CHILD_COUNT=e;g.REPEATED_CHILD=h;g.REPEATED_CHILD_COUNT=i}),98);
__d("WASmaxInGroupsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInGroupsIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorRateOverlimit"],[b,c])}g.parseBatchGetGroupInfoClientErrors=a}),98);
__d("WASmaxInGroupsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoResponseClientError",["WAResultOrError","WASmaxInGroupsBatchGetGroupInfoClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsBatchGetGroupInfoClientErrors").parseBatchGetGroupInfoClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorBatchGetGroupInfoClientErrors:b.value}))}g.parseBatchGetGroupInfoResponseClientError=a}),98);
__d("WASmaxInGroupsIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",500,599);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackServerMixin=a}),98);
__d("WASmaxInGroupsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInGroupsIQErrorPartialServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","partial-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",530);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorPartialServerErrorMixin=a}),98);
__d("WASmaxInGroupsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","service-unavailable");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",503);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorServiceUnavailableMixin=a}),98);
__d("WASmaxInGroupsServerErrors",["WAResultOrError","WASmaxInGroupsIQErrorFallbackServerMixin","WASmaxInGroupsIQErrorInternalServerErrorMixin","WASmaxInGroupsIQErrorPartialServerErrorMixin","WASmaxInGroupsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInGroupsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:c.value});var e=d("WASmaxInGroupsIQErrorPartialServerErrorMixin").parseIQErrorPartialServerErrorMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorPartialServerError",value:e.value});var f=d("WASmaxInGroupsIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorServiceUnavailable","IQErrorPartialServerError","IQErrorFallbackServer"],[b,c,e,f])}g.parseServerErrors=a}),98);
__d("WASmaxInGroupsBaseServerErrorMixin",["WAResultOrError","WASmaxInGroupsIQErrorResponseMixin","WASmaxInGroupsServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseBaseServerErrorMixin=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseBatchGetGroupInfoResponseServerError=a}),98);
__d("WASmaxInGroupsEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={304:"304",419:"419"};b={403:"403",404:"404",406:"406",419:"419"};c={404:"404",406:"406"};e={404:"404",419:"419"};f={406:"406",500:"500"};var h={accept:"accept",auto_add:"auto_add",default_sub_group_admin_add:"default_sub_group_admin_add",general_chat_auto_add:"general_chat_auto_add",invite:"invite",invite_auto_add:"invite_auto_add",linked_group_join:"linked_group_join",sub_group_suggestion_approved:"sub_group_suggestion_approved"},i={accept:"accept",auto_add:"auto_add",default_sub_group_promote:"default_sub_group_promote",invite:"invite",invite_auto_add:"invite_auto_add",linked_group_join:"linked_group_join"},j={admin:"admin",creator:"creator"},k={admin:"admin",superadmin:"superadmin"},l={approved:"approved",cancelled:"cancelled",rejected:"rejected"},m={deactivate_general_chat:"deactivate_general_chat",delete_capi:"delete_capi",delete_parent:"delete_parent",integrity_delete_parent:"integrity_delete_parent"},n={deactivate_group:"deactivate_group",delete_parent:"delete_parent",integrity_delete_parent:"integrity_delete_parent",unlink_group:"unlink_group"},o={e2ee_migration:"e2ee_migration",regular:"regular",rtc:"rtc"},p={"false":"false","true":"true"},q={group:"group",user:"user"},r={image:"image",preview:"preview"},s={invite_link:"invite_link",linked_group_join:"linked_group_join",non_admin_add:"non_admin_add"},t={lid:"lid",pn:"pn"},u={parent_group:"parent_group",sibling_group:"sibling_group",sub_group:"sub_group"};d={validators:[d("WAJids").validateDomainJid,d("WAJids").validateGroupJid],typeName:"DomainJid|GroupJid"};g.ENUM_304_419=a;g.ENUM_403_404_406_419=b;g.ENUM_404_406=c;g.ENUM_404_419=e;g.ENUM_406_500=f;g.ENUM_ACCEPT_AUTOADD_DEFAULTSUBGROUPADMINADD_GENERALCHATAUTOADD_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN_SUBGROUPSUGGESTIONAPPROVED=h;g.ENUM_ACCEPT_AUTOADD_DEFAULTSUBGROUPPROMOTE_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN=i;g.ENUM_ADMIN_CREATOR=j;g.ENUM_ADMIN_SUPERADMIN=k;g.ENUM_APPROVED_CANCELLED_REJECTED=l;g.ENUM_DEACTIVATEGENERALCHAT_DELETECAPI_DELETEPARENT_INTEGRITYDELETEPARENT=m;g.ENUM_DEACTIVATEGROUP_DELETEPARENT_INTEGRITYDELETEPARENT_UNLINKGROUP=n;g.ENUM_E2EEMIGRATION_REGULAR_RTC=o;g.ENUM_FALSE_TRUE=p;g.ENUM_GROUP_USER=q;g.ENUM_IMAGE_PREVIEW=r;g.ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD=s;g.ENUM_LID_PN=t;g.ENUM_PARENTGROUP_SIBLINGGROUP_SUBGROUP=u;g.DOMAINJID_GROUPJID=d}),98);
__d("WASmaxInGroupsDedupAttrsMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").attrString(a,"key");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"create_ctx",d("WASmaxInGroupsEnums").ENUM_E2EEMIGRATION_REGULAR_RTC);return!a.success?a:d("WAResultOrError").makeResult({key:b.value,createCtx:a.value})}g.parseDedupAttrsMixin=a}),98);
__d("WASmaxInGroupsGroupForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"error","403");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,error:a.value})}g.parseGroupForbiddenMixin=a}),98);
__d("WASmaxInGroupsGroupAddressingModeMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"addressing_mode",d("WASmaxInGroupsEnums").ENUM_LID_PN);return!a.success?a:d("WAResultOrError").makeResult({addressingMode:a.value})}g.parseGroupAddressingModeMixin=a}),98);
__d("WASmaxInGroupsGroupCreatorCountryCodeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"creator_country_code");return!a.success?a:d("WAResultOrError").makeResult({creatorCountryCode:a.value})}g.parseGroupCreatorCountryCodeMixin=a}),98);
__d("WASmaxInGroupsGroupCreatorPhoneNumberMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrUserJid(a,"creator_pn");return!a.success?a:d("WAResultOrError").makeResult({creatorPn:a.value})}g.parseGroupCreatorPhoneNumberMixin=a}),98);
__d("WASmaxInGroupsGroupCreatorUsernameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"creator_username");return!a.success?a:d("WAResultOrError").makeResult({creatorUsername:a.value})}g.parseGroupCreatorUsernameMixin=a}),98);
__d("WASmaxInGroupsGroupCreatorIdentityMixin",["WAResultOrError","WASmaxInGroupsGroupCreatorCountryCodeMixin","WASmaxInGroupsGroupCreatorPhoneNumberMixin","WASmaxInGroupsGroupCreatorUsernameMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupCreatorPhoneNumberMixin").parseGroupCreatorPhoneNumberMixin(a),c=d("WASmaxInGroupsGroupCreatorUsernameMixin").parseGroupCreatorUsernameMixin(a);a=d("WASmaxInGroupsGroupCreatorCountryCodeMixin").parseGroupCreatorCountryCodeMixin(a);return d("WAResultOrError").makeResult({groupCreatorPhoneNumberMixin:b.success?b.value:null,groupCreatorUsernameMixin:c.success?c.value:null,groupCreatorCountryCodeMixin:a.success?a.value:null})}g.parseGroupCreatorIdentityMixin=a}),98);
__d("WASmaxInGroupsNamedSubjectMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"subject");return!a.success?a:d("WAResultOrError").makeResult({subject:a.value})}g.parseNamedSubjectMixin=a}),98);
__d("WASmaxInGroupsUnnamedSubjectFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"subject");return!a.success?a:d("WAResultOrError").makeResult({subject:a.value})}g.parseUnnamedSubjectFallbackMixin=a}),98);
__d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup",["WAResultOrError","WASmaxInGroupsNamedSubjectMixin","WASmaxInGroupsUnnamedSubjectFallbackMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsNamedSubjectMixin").parseNamedSubjectMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NamedSubject",value:b.value});var c=d("WASmaxInGroupsUnnamedSubjectFallbackMixin").parseUnnamedSubjectFallbackMixin(a);return c.success?d("WAResultOrError").makeResult({name:"UnnamedSubjectFallback",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NamedSubject","UnnamedSubjectFallback"],[b,c])}g.parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup=a}),98);
__d("WASmaxInGroupsSubjectOwnerPhoneNumberMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrUserJid(a,"s_o_pn");return!a.success?a:d("WAResultOrError").makeResult({sOPn:a.value})}g.parseSubjectOwnerPhoneNumberMixin=a}),98);
__d("WASmaxInGroupsSubjectOwnerUsernameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"s_o_username");return!a.success?a:d("WAResultOrError").makeResult({sOUsername:a.value})}g.parseSubjectOwnerUsernameMixin=a}),98);
__d("WASmaxInGroupsSubjectOwnerIdentityMixin",["WAResultOrError","WASmaxInGroupsSubjectOwnerPhoneNumberMixin","WASmaxInGroupsSubjectOwnerUsernameMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsSubjectOwnerPhoneNumberMixin").parseSubjectOwnerPhoneNumberMixin(a);a=d("WASmaxInGroupsSubjectOwnerUsernameMixin").parseSubjectOwnerUsernameMixin(a);return d("WAResultOrError").makeResult({subjectOwnerPhoneNumberMixin:b.success?b.value:null,subjectOwnerUsernameMixin:a.success?a.value:null})}g.parseSubjectOwnerIdentityMixin=a}),98);
__d("WASmaxInGroupsGroupInfoAttributesMixin",["WAResultOrError","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsGroupCreatorIdentityMixin","WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup","WASmaxInGroupsSubjectOwnerIdentityMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChild(a,"missing_participant_identification");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"creator");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"creation",0,void 0);if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"p_v_id");if(!g.success)return g;var h=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"a_v_id");if(!h.success)return h;var i=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"s_t",0,void 0);if(!i.success)return i;var j=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"s_o");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"open_thread_id");if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"size",0,19999);if(!l.success)return l;var m=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a),n=d("WASmaxInGroupsSubjectOwnerIdentityMixin").parseSubjectOwnerIdentityMixin(a),o=d("WASmaxInGroupsGroupCreatorIdentityMixin").parseGroupCreatorIdentityMixin(a);a=d("WASmaxInGroupsNamedSubjectOrUnnamedSubjectFallbackMixinGroup").parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({id:c.value,creator:e.value,creation:f.value,pVId:g.value,aVId:h.value,sT:i.value,sO:j.value,openThreadId:k.value,size:l.value,groupAddressingModeMixin:m.success?m.value:null,subjectOwnerIdentityMixin:n.success?n.value:null,groupCreatorIdentityMixin:o.success?o.value:null,namedSubjectOrUnnamedSubjectFallbackMixinGroup:a.value,hasMissingParticipantIdentification:b.value!=null})}g.parseGroupInfoAttributesMixin=a}),98);
__d("WASmaxInGroupsParticipantPNMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrUserJid(a,"participant_pn");return!a.success?a:d("WAResultOrError").makeResult({participantPn:a.value})}g.parseParticipantPNMixin=a}),98);
__d("WASmaxInGroupsParticipantUsernameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"participant_username");return!a.success?a:d("WAResultOrError").makeResult({participantUsername:a.value})}g.parseParticipantUsernameMixin=a}),98);
__d("WASmaxInGroupsParticipantIdentityMixin",["WAResultOrError","WASmaxInGroupsParticipantPNMixin","WASmaxInGroupsParticipantUsernameMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParticipantPNMixin").parseParticipantPNMixin(a);a=d("WASmaxInGroupsParticipantUsernameMixin").parseParticipantUsernameMixin(a);return d("WAResultOrError").makeResult({participantPNMixin:b.success?b.value:null,participantUsernameMixin:a.success?a.value:null})}g.parseParticipantIdentityMixin=a}),98);
__d("WASmaxInGroupsGroupInfoDescriptionMixin",["WAResultOrError","WASmaxInGroupsParticipantIdentityMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"body");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!f.success)return f;b=d("WASmaxParseUtils").contentString(b.value);if(!b.success)return b;a=d("WASmaxInGroupsParticipantIdentityMixin").parseParticipantIdentityMixin(a);return d("WAResultOrError").makeResult({id:c.value,participant:e.value,t:f.value,bodyElementValue:b.value,participantIdentityMixin:a.success?a.value:null})}g.parseGroupInfoDescriptionMixin=a}),98);
__d("WASmaxInGroupsDisplayNameMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"display_name");return!a.success?a:d("WAResultOrError").makeResult({displayName:a.value})}g.parseDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}g.parseParticipantWithJidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsPhoneNumberMixin",["WAResultOrError","WASmaxParseJid"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseJid").attrUserJid(a,"phone_number");return!a.success?a:d("WAResultOrError").makeResult({phoneNumber:a.value})}g.parsePhoneNumberMixin=a}),98);
__d("WASmaxInGroupsUsernameAttMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrString(a,"username");return!a.success?a:d("WAResultOrError").makeResult({username:a.value})}g.parseUsernameAttMixin=a}),98);
__d("WASmaxInGroupsPhoneNumberAndUsernameAttMixin",["WAResultOrError","WASmaxInGroupsPhoneNumberMixin","WASmaxInGroupsUsernameAttMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsPhoneNumberMixin").parsePhoneNumberMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsUsernameAttMixin").parseUsernameAttMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parsePhoneNumberAndUsernameAttMixin=a}),98);
__d("WASmaxInGroupsIdentityTypes",["WAResultOrError","WASmaxInGroupsPhoneNumberAndUsernameAttMixin","WASmaxInGroupsPhoneNumberMixin","WASmaxInGroupsUsernameAttMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsPhoneNumberAndUsernameAttMixin").parsePhoneNumberAndUsernameAttMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"PhoneNumberAndUsernameAtt",value:b.value});var c=d("WASmaxInGroupsPhoneNumberMixin").parsePhoneNumberMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"PhoneNumber",value:c.value});var e=d("WASmaxInGroupsUsernameAttMixin").parseUsernameAttMixin(a);return e.success?d("WAResultOrError").makeResult({name:"UsernameAtt",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["PhoneNumberAndUsernameAtt","PhoneNumber","UsernameAtt"],[b,c,e])}g.parseIdentityTypes=a}),98);
__d("WASmaxInGroupsIdentityMixin",["WAResultOrError","WASmaxInGroupsIdentityTypes"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInGroupsIdentityTypes").parseIdentityTypes(a);return!a.success?a:d("WAResultOrError").makeResult({identityTypes:a.value})}g.parseIdentityMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndIdentityMixin",["WAResultOrError","WASmaxInGroupsIdentityMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsIdentityMixin").parseIdentityMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndIdentityMixin=a}),98);
__d("WASmaxInGroupsParticipantWithLidMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseJid").attrLidUserJid(a,"lid");return!b.success?b:d("WAResultOrError").makeResult({lid:b.value})}g.parseParticipantWithLidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidAndLidMixin",["WAResultOrError","WASmaxInGroupsParticipantWithJidMixin","WASmaxInGroupsParticipantWithLidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantWithLidMixin").parseParticipantWithLidMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidAndLidMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidIdentityAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxInGroupsParticipantWithJidAndIdentityMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidAndIdentityMixin").parseParticipantWithJidAndIdentityMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidIdentityAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin",["WAResultOrError","WASmaxInGroupsDisplayNameMixin","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsDisplayNameMixin").parseDisplayNameMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseParticipantWithJidLidAndDisplayNameMixin=a}),98);
__d("WASmaxInGroupsParticipantMixins",["WAResultOrError","WASmaxInGroupsParticipantWithJidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidAndIdentityMixin","WASmaxInGroupsParticipantWithJidAndLidMixin","WASmaxInGroupsParticipantWithJidIdentityAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin","WASmaxInGroupsParticipantWithJidMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsParticipantWithJidLidAndDisplayNameMixin").parseParticipantWithJidLidAndDisplayNameMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidLidAndDisplayName",value:b.value});var c=d("WASmaxInGroupsParticipantWithJidIdentityAndDisplayNameMixin").parseParticipantWithJidIdentityAndDisplayNameMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidIdentityAndDisplayName",value:c.value});var e=d("WASmaxInGroupsParticipantWithJidAndLidMixin").parseParticipantWithJidAndLidMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndLid",value:e.value});var f=d("WASmaxInGroupsParticipantWithJidAndIdentityMixin").parseParticipantWithJidAndIdentityMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndIdentity",value:f.value});var g=d("WASmaxInGroupsParticipantWithJidAndDisplayNameMixin").parseParticipantWithJidAndDisplayNameMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"ParticipantWithJidAndDisplayName",value:g.value});var h=d("WASmaxInGroupsParticipantWithJidMixin").parseParticipantWithJidMixin(a);return h.success?d("WAResultOrError").makeResult({name:"ParticipantWithJid",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidIdentityAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndIdentity","ParticipantWithJidAndDisplayName","ParticipantWithJid"],[b,c,e,f,g,h])}g.parseParticipantMixins=a}),98);
__d("WASmaxInGroupsParticipantMixin",["WAResultOrError","WASmaxInGroupsParticipantMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"participant_label");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"participant_label_mtime",0,void 0);if(!c.success)return c;a=d("WASmaxInGroupsParticipantMixins").parseParticipantMixins(a);return!a.success?a:d("WAResultOrError").makeResult({participantLabel:b.value,participantLabelMtime:c.value,participantMixins:a.value})}g.parseParticipantMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantAdminMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxInGroupsParticipantMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInGroupsEnums").ENUM_ADMIN_SUPERADMIN);if(!b.success)return b;a=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:b.value},a.value))}g.parseGroupInfoParticipantAdminMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantNonAdminMixin",["WASmaxInGroupsParticipantMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsParticipantMixin").parseParticipantMixin(a);return!b.success?b:b}g.parseGroupInfoParticipantNonAdminMixin=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantMixins",["WAResultOrError","WASmaxInGroupsGroupInfoParticipantAdminMixin","WASmaxInGroupsGroupInfoParticipantNonAdminMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoParticipantAdminMixin").parseGroupInfoParticipantAdminMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfoParticipantAdmin",value:b.value});var c=d("WASmaxInGroupsGroupInfoParticipantNonAdminMixin").parseGroupInfoParticipantNonAdminMixin(a);return c.success?d("WAResultOrError").makeResult({name:"GroupInfoParticipantNonAdmin",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfoParticipantAdmin","GroupInfoParticipantNonAdmin"],[b,c])}g.parseGroupInfoParticipantMixins=a}),98);
__d("WASmaxInGroupsGroupInfoParticipantMixin",["WAResultOrError","WASmaxInGroupsGroupInfoParticipantMixins","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixins").parseGroupInfoParticipantMixins(a);return!b.success?b:d("WAResultOrError").makeResult({groupInfoParticipantMixins:b.value})}g.parseGroupInfoParticipantMixin=a}),98);
__d("WASmaxInGroupsAdminAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"admin_add");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAdminAddModeMixin=a}),98);
__d("WASmaxInGroupsAllMembersAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"all_member_add");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAllMembersAddModeMixin=a}),98);
__d("WASmaxInGroupsUnknownAddModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_add_mode");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseUnknownAddModeMixin=a}),98);
__d("WASmaxInGroupsMemberAddModes",["WAResultOrError","WASmaxInGroupsAdminAddModeMixin","WASmaxInGroupsAllMembersAddModeMixin","WASmaxInGroupsUnknownAddModeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsAdminAddModeMixin").parseAdminAddModeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"AdminAddMode",value:b.value});var c=d("WASmaxInGroupsAllMembersAddModeMixin").parseAllMembersAddModeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"AllMembersAddMode",value:c.value});var e=d("WASmaxInGroupsUnknownAddModeMixin").parseUnknownAddModeMixin(a);return e.success?d("WAResultOrError").makeResult({name:"UnknownAddMode",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AdminAddMode","AllMembersAddMode","UnknownAddMode"],[b,c,e])}g.parseMemberAddModes=a}),98);
__d("WASmaxInGroupsGroupMemberAddModeMixin",["WAResultOrError","WASmaxInGroupsMemberAddModes","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"member_add_mode");if(!a.success)return a;a=d("WASmaxInGroupsMemberAddModes").parseMemberAddModes(a.value);return!a.success?a:d("WAResultOrError").makeResult({memberAddModeMemberAddModes:a.value})}g.parseGroupMemberAddModeMixin=a}),98);
__d("WASmaxInGroupsAdminLinkModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_link_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"admin_link");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAdminLinkModeMixin=a}),98);
__d("WASmaxInGroupsAllMembersLinkModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_link_mode");if(!b.success)return b;b=d("WASmaxParseUtils").literalContent(d("WASmaxParseUtils").contentString,a,"all_member_link");return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseAllMembersLinkModeMixin=a}),98);
__d("WASmaxInGroupsUnknownLinkModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"member_link_mode");if(!b.success)return b;b=d("WASmaxParseUtils").contentString(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parseUnknownLinkModeMixin=a}),98);
__d("WASmaxInGroupsMemberLinkModes",["WAResultOrError","WASmaxInGroupsAdminLinkModeMixin","WASmaxInGroupsAllMembersLinkModeMixin","WASmaxInGroupsUnknownLinkModeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsAdminLinkModeMixin").parseAdminLinkModeMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"AdminLinkMode",value:b.value});var c=d("WASmaxInGroupsAllMembersLinkModeMixin").parseAllMembersLinkModeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"AllMembersLinkMode",value:c.value});var e=d("WASmaxInGroupsUnknownLinkModeMixin").parseUnknownLinkModeMixin(a);return e.success?d("WAResultOrError").makeResult({name:"UnknownLinkMode",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AdminLinkMode","AllMembersLinkMode","UnknownLinkMode"],[b,c,e])}g.parseMemberLinkModes=a}),98);
__d("WASmaxInGroupsGroupMemberLinkModeMixin",["WAResultOrError","WASmaxInGroupsMemberLinkModes","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"member_link_mode");if(!a.success)return a;a=d("WASmaxInGroupsMemberLinkModes").parseMemberLinkModes(a.value);return!a.success?a:d("WAResultOrError").makeResult({memberLinkModeMemberLinkModes:a.value})}g.parseGroupMemberLinkModeMixin=a}),98);
__d("WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group_join");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"state","on");return!b.success?b:d("WAResultOrError").makeResult({state:b.value})}g.parseGroupJoinMembershipApprovalModeEnabledMixin=a}),98);
__d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin",["WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"group_join");if(!b.success)return b;a=d("WASmaxInGroupsGroupJoinMembershipApprovalModeEnabledMixin").parseGroupJoinMembershipApprovalModeEnabledMixin(b.value);return!a.success?a:a}g.parseMembershipApprovalGroupJoinModeEnabledMixin=a}),98);
__d("WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"default_membership_approval_mode","request_required");return!b.success?b:d("WAResultOrError").makeResult({defaultMembershipApprovalMode:b.value})}g.parseParentGroupDefaultMembershipApprovalModeMixin=a}),98);
__d("WASmaxInGroupsParticipantNotAddressableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"addressable","false");return!b.success?b:d("WAResultOrError").makeResult({addressable:b.value})}g.parseParticipantNotAddressableMixin=a}),98);
__d("WASmaxInGroupsGroupInfoMixin",["WAResultOrError","WASmaxInGroupsGroupInfoAttributesMixin","WASmaxInGroupsGroupInfoDescriptionMixin","WASmaxInGroupsGroupInfoParticipantMixin","WASmaxInGroupsGroupMemberAddModeMixin","WASmaxInGroupsGroupMemberLinkModeMixin","WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin","WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin","WASmaxInGroupsParticipantNotAddressableMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixin").parseGroupInfoParticipantMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsParticipantNotAddressableMixin").parseParticipantNotAddressableMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{participantNotAddressableMixin:a.success?a.value:null}))}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"description");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoDescriptionMixin").parseGroupInfoDescriptionMixin(a);return d("WAResultOrError").makeResult({groupInfoDescriptionMixin:b.success?b.value:null})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxInGroupsParentGroupDefaultMembershipApprovalModeMixin").parseParentGroupDefaultMembershipApprovalModeMixin(a);return d("WAResultOrError").makeResult({parentGroupDefaultMembershipApprovalModeMixin:b.success?b.value:null})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"ephemeral");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,2147483647);if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"trigger",0,20);return!a.success?a:d("WAResultOrError").makeResult({expiration:b.value,trigger:a.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"suspended");if(!b.success)return b;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"can_auto_file","true");return!b.success?b:d("WAResultOrError").makeResult({canAutoFile:b.value})}function m(a){var b=d("WASmaxParseUtils").assertTag(a,"growth_locked");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","invite");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,expiration:a.value})}function n(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin").parseMembershipApprovalGroupJoinModeEnabledMixin(a);return d("WAResultOrError").makeResult({membershipApprovalGroupJoinModeEnabledMixin:b.success?b.value:null})}function o(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_parent");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function p(a){var b=d("WASmaxParseUtils").assertTag(a,"evolution_version");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"value",0,100);return!b.success?b:d("WAResultOrError").makeResult({value:b.value})}function q(a){var b=d("WASmaxParseUtils").assertTag(a,"limit_sharing_enabled");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"trigger",0,20);return!b.success?b:d("WAResultOrError").makeResult({trigger:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"description",i);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChild(a,"locked");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChild(a,"announcement");if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChildWithTag(a,"parent",j);if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChild(a,"no_frequently_forwarded");if(!g.success)return g;var r=d("WASmaxParseUtils").optionalChild(a,"support");if(!r.success)return r;var s=d("WASmaxParseUtils").optionalChildWithTag(a,"ephemeral",k);if(!s.success)return s;var t=d("WASmaxParseUtils").optionalChildWithTag(a,"suspended",l);if(!t.success)return t;var u=d("WASmaxParseUtils").optionalChildWithTag(a,"growth_locked",m);if(!u.success)return u;var v=d("WASmaxParseUtils").optionalChild(a,"default_sub_group");if(!v.success)return v;var w=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_mode",n);if(!w.success)return w;var x=d("WASmaxParseUtils").optionalChild(a,"incognito");if(!x.success)return x;var y=d("WASmaxParseUtils").optionalChild(a,"allow_admin_reports");if(!y.success)return y;var z=d("WASmaxParseUtils").optionalChild(a,"allow_non_admin_sub_group_creation");if(!z.success)return z;var A=d("WASmaxParseUtils").optionalChild(a,"general_chat");if(!A.success)return A;var B=d("WASmaxParseUtils").optionalChild(a,"auto_add_disabled");if(!B.success)return B;var C=d("WASmaxParseUtils").optionalChild(a,"group_history");if(!C.success)return C;var D=d("WASmaxParseUtils").optionalChildWithTag(a,"linked_parent",o);if(!D.success)return D;var E=d("WASmaxParseUtils").optionalChild(a,"hidden_group");if(!E.success)return E;var F=d("WASmaxParseUtils").optionalChild(a,"capi");if(!F.success)return F;var G=d("WASmaxParseUtils").optionalChildWithTag(a,"evolution_version",p);if(!G.success)return G;var H=d("WASmaxParseUtils").optionalChild(a,"group_safety_check");if(!H.success)return H;var I=d("WASmaxParseUtils").optionalChild(a,"participant_label_enabled");if(!I.success)return I;var J=d("WASmaxParseUtils").optionalChildWithTag(a,"limit_sharing_enabled",q);if(!J.success)return J;var K=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"ack","false");if(!K.success)return K;var L=d("WASmaxInGroupsGroupInfoAttributesMixin").parseGroupInfoAttributesMixin(a);if(!L.success)return L;var M=d("WASmaxInGroupsGroupMemberAddModeMixin").parseGroupMemberAddModeMixin(a),N=d("WASmaxInGroupsGroupMemberLinkModeMixin").parseGroupMemberLinkModeMixin(a);a=d("WASmaxParseUtils").mapChildrenWithTag(a,"participant",0,19999,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({ack:K.value},L.value,{groupMemberAddModeMixin:M.success?M.value:null,groupMemberLinkModeMixin:N.success?N.value:null,description:b.value,hasLocked:c.value!=null,hasAnnouncement:e.value!=null,parent:f.value,hasNoFrequentlyForwarded:g.value!=null,hasSupport:r.value!=null,ephemeral:s.value,suspended:t.value,growthLocked:u.value,hasDefaultSubGroup:v.value!=null,membershipApprovalMode:w.value,hasIncognito:x.value!=null,hasAllowAdminReports:y.value!=null,hasAllowNonAdminSubGroupCreation:z.value!=null,hasGeneralChat:A.value!=null,hasAutoAddDisabled:B.value!=null,hasGroupHistory:C.value!=null,linkedParent:D.value,hasHiddenGroup:E.value!=null,hasCapi:F.value!=null,evolutionVersion:G.value,hasGroupSafetyCheck:H.value!=null,hasParticipantLabelEnabled:I.value!=null,limitSharingEnabled:J.value,participant:a.value}))}g.parseGroupInfoParticipant=h;g.parseGroupInfoDescription=i;g.parseGroupInfoParent=j;g.parseGroupInfoEphemeral=k;g.parseGroupInfoSuspended=l;g.parseGroupInfoGrowthLocked=m;g.parseGroupInfoMembershipApprovalMode=n;g.parseGroupInfoLinkedParent=o;g.parseGroupInfoEvolutionVersion=p;g.parseGroupInfoLimitSharingEnabled=q;g.parseGroupInfoMixin=a}),98);
__d("WASmaxInGroupsGroupNotExistMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"error","404");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,error:a.value})}g.parseGroupNotExistMixin=a}),98);
__d("WASmaxInGroupsTruncatedGroupInfoMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"truncated","true");if(!c.success)return c;a=d("WASmaxParseUtils").attrIntRange(a,"size",0,19999);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,truncated:c.value,size:a.value})}g.parseTruncatedGroupInfoMixin=a}),98);
__d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup",["WAResultOrError","WASmaxInGroupsGroupForbiddenMixin","WASmaxInGroupsGroupInfoMixin","WASmaxInGroupsGroupNotExistMixin","WASmaxInGroupsTruncatedGroupInfoMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoMixin").parseGroupInfoMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfo",value:b.value});var c=d("WASmaxInGroupsTruncatedGroupInfoMixin").parseTruncatedGroupInfoMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"TruncatedGroupInfo",value:c.value});var e=d("WASmaxInGroupsGroupForbiddenMixin").parseGroupForbiddenMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"GroupForbidden",value:e.value});var f=d("WASmaxInGroupsGroupNotExistMixin").parseGroupNotExistMixin(a);return f.success?d("WAResultOrError").makeResult({name:"GroupNotExist",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfo","TruncatedGroupInfo","GroupForbidden","GroupNotExist"],[b,c,e,f])}g.parseGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup=a}),98);
__d("WASmaxInGroupsBatchGetGroupInfoResponseSuccess",["WAResultOrError","WASmaxInGroupsDedupAttrsMixin","WASmaxInGroupsGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxInGroupsDedupAttrsMixin").parseDedupAttrsMixin(a);a=d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup").parseGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({dedupAttrsMixin:b.success?b.value:null,groupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"group",1,1e4,h);return!b.success?b:d("WAResultOrError").makeResult({type:e.value,groupsGroup:b.value})}g.parseBatchGetGroupInfoResponseSuccessGroupsGroup=h;g.parseBatchGetGroupInfoResponseSuccess=a}),98);
__d("WASmaxOutGroupsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutGroupsBaseGetServerMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutGroupsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").G_US,xmlns:"w:g2"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseGetServerMixin=a}),98);
__d("WASmaxOutGroupsBatchGetGroupInfoRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutGroupsBaseGetServerMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.groupJid;a=d("WASmaxJsx").smax("group",{jid:d("WAWap").GROUP_JID(a)});return a}function a(a){var b=a.groupArgs;a=a.queryContext;a=d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("query",{context:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)},d("WASmaxChildren").REPEATED_CHILD(h,b,1,1e4))));return a}g.makeBatchGetGroupInfoRequestQueryGroup=h;g.makeBatchGetGroupInfoRequest=a}),98);
__d("WASmaxGroupsBatchGetGroupInfoRPC",["WAComms","WASmaxInGroupsBatchGetGroupInfoResponseClientError","WASmaxInGroupsBatchGetGroupInfoResponseServerError","WASmaxInGroupsBatchGetGroupInfoResponseSuccess","WASmaxOutGroupsBatchGetGroupInfoRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutGroupsBatchGetGroupInfoRequest").makeBatchGetGroupInfoRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInGroupsBatchGetGroupInfoResponseSuccess").parseBatchGetGroupInfoResponseSuccess(b,a);if(c.success)return{name:"BatchGetGroupInfoResponseSuccess",value:c.value};var e=d("WASmaxInGroupsBatchGetGroupInfoResponseClientError").parseBatchGetGroupInfoResponseClientError(b,a);if(e.success)return{name:"BatchGetGroupInfoResponseClientError",value:e.value};b=d("WASmaxInGroupsBatchGetGroupInfoResponseServerError").parseBatchGetGroupInfoResponseServerError(b,a);if(b.success)return{name:"BatchGetGroupInfoResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("BatchGetGroupInfo",{Success:c,ClientError:e,ServerError:b}))});return h.apply(this,arguments)}g.sendBatchGetGroupInfoRPC=a}),98);
__d("WASmaxInGroupsIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"code",400,499);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFallbackClientMixin=a}),98);
__d("WASmaxInGroupsIQErrorGoneMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","gone");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",410);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorGoneMixin=a}),98);
__d("WASmaxInGroupsIQErrorGrowthLockedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"growth_locked");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","invite");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"expiration",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({type:b.value,expiration:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"growth_locked",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","growth-locked");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",436);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,growthLocked:b.value})}g.parseIQErrorGrowthLockedGrowthLocked=h;g.parseIQErrorGrowthLockedMixin=a}),98);
__d("WASmaxInGroupsIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","item-not-found");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",404);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorItemNotFoundMixin=a}),98);
__d("WASmaxInGroupsIQErrorLockedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","locked");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",423);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorLockedMixin=a}),98);
__d("WASmaxInGroupsIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"field");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"reason");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,reason:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"field",h);if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-acceptable");if(!c.success)return c;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",406);return!a.success?a:d("WAResultOrError").makeResult({text:c.value,code:a.value,field:b.value})}g.parseIQErrorNotAcceptableField=h;g.parseIQErrorNotAcceptableMixin=a}),98);
__d("WASmaxInGroupsIQErrorNotAuthorizedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-authorized");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",401);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAuthorizedMixin=a}),98);
__d("WASmaxInGroupsIQErrorParentGroupSuspendedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","parent-group-suspended");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",416);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorParentGroupSuspendedMixin=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorGoneMixin","WASmaxInGroupsIQErrorGrowthLockedMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorLockedMixin","WASmaxInGroupsIQErrorNotAcceptableMixin","WASmaxInGroupsIQErrorNotAuthorizedMixin","WASmaxInGroupsIQErrorParentGroupSuspendedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value});var e=d("WASmaxInGroupsIQErrorGoneMixin").parseIQErrorGoneMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorGone",value:e.value});var f=d("WASmaxInGroupsIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:f.value});var g=d("WASmaxInGroupsIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:g.value});var h=d("WASmaxInGroupsIQErrorLockedMixin").parseIQErrorLockedMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"IQErrorLocked",value:h.value});var i=d("WASmaxInGroupsIQErrorGrowthLockedMixin").parseIQErrorGrowthLockedMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"IQErrorGrowthLocked",value:i.value});var j=d("WASmaxInGroupsIQErrorParentGroupSuspendedMixin").parseIQErrorParentGroupSuspendedMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"IQErrorParentGroupSuspended",value:j.value});var k=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return k.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:k.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorGone","IQErrorNotAuthorized","IQErrorNotAcceptable","IQErrorLocked","IQErrorGrowthLocked","IQErrorParentGroupSuspended","IQErrorFallbackClient"],[b,c,e,f,g,h,i,j,k])}g.parseGetInviteGroupInfoClientErrors=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoResponseClientError",["WAResultOrError","WASmaxInGroupsGetInviteGroupInfoClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsGetInviteGroupInfoClientErrors").parseGetInviteGroupInfoClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorGetInviteGroupInfoClientErrors:b.value}))}g.parseGetInviteGroupInfoResponseClientError=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetInviteGroupInfoResponseServerError=a}),98);
__d("WASmaxInGroupsInviteLinkGroupInfoMixin",["WAResultOrError","WASmaxInGroupsGroupInfoAttributesMixin","WASmaxInGroupsGroupInfoDescriptionMixin","WASmaxInGroupsGroupInfoParticipantMixin","WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin","WASmaxInGroupsNamedSubjectMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"participant");if(!b.success)return b;b=d("WASmaxInGroupsGroupInfoParticipantMixin").parseGroupInfoParticipantMixin(a);return!b.success?b:b}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"parent");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"num_sub_groups",1,1e3);return!b.success?b:d("WAResultOrError").makeResult({numSubGroups:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"linked_parent");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");if(!b.success)return b;a=d("WASmaxInGroupsNamedSubjectMixin").parseNamedSubjectMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({jid:b.value},a.value))}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_mode");if(!b.success)return b;b=d("WASmaxInGroupsMembershipApprovalGroupJoinModeEnabledMixin").parseMembershipApprovalGroupJoinModeEnabledMixin(a);return!b.success?b:b}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_request");if(!b.success)return b;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"error","304");return!b.success?b:d("WAResultOrError").makeResult({error:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"description");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"parent",i);if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"linked_parent",j);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalChild(a,"hidden_group");if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChild(a,"default_sub_group");if(!g.success)return g;var m=d("WASmaxParseUtils").optionalChild(a,"general_chat");if(!m.success)return m;var n=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_mode",k);if(!n.success)return n;var o=d("WASmaxParseUtils").optionalChildWithTag(a,"membership_approval_request",l);if(!o.success)return o;var p=d("WASmaxParseUtils").optionalChild(a,"capi");if(!p.success)return p;var q=d("WASmaxParseUtils").attrIntRange(a,"size",0,19999);if(!q.success)return q;b=d("WASmaxInGroupsGroupInfoDescriptionMixin").parseGroupInfoDescriptionMixin(b.value);var r=d("WASmaxInGroupsGroupInfoAttributesMixin").parseGroupInfoAttributesMixin(a);if(!r.success)return r;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"participant",0,19999,h);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({size:q.value,descriptionGroupInfoDescriptionMixin:b.success?b.value:null},r.value,{parent:c.value,linkedParent:e.value,hasHiddenGroup:f.value!=null,hasDefaultSubGroup:g.value!=null,hasGeneralChat:m.value!=null,membershipApprovalMode:n.value,membershipApprovalRequest:o.value,hasCapi:p.value!=null,participant:a.value}))}g.parseInviteLinkGroupInfoParticipant=h;g.parseInviteLinkGroupInfoParent=i;g.parseInviteLinkGroupInfoLinkedParent=j;g.parseInviteLinkGroupInfoMembershipApprovalMode=k;g.parseInviteLinkGroupInfoMembershipApprovalRequest=l;g.parseInviteLinkGroupInfoMixin=a}),98);
__d("WASmaxInGroupsGetInviteGroupInfoResponseSuccess",["WAResultOrError","WASmaxInGroupsInviteLinkGroupInfoMixin","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"group");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(c.value,"size",0,19999);if(!b.success)return b;a=d("WASmaxInGroupsInviteLinkGroupInfoMixin").parseInviteLinkGroupInfoMixin(c.value);return!a.success?a:d("WAResultOrError").makeResult({type:e.value,groupSize:b.value,groupInviteLinkGroupInfoMixin:a.value})}g.parseGetInviteGroupInfoResponseSuccess=a}),98);
__d("WASmaxOutGroupsGetInviteGroupInfoRequest",["WASmaxJsx","WASmaxOutGroupsBaseGetServerMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.inviteCode;a=d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("invite",{code:d("WAWap").CUSTOM_STRING(a)})));return a}g.makeGetInviteGroupInfoRequest=a}),98);
__d("WASmaxGroupsGetInviteGroupInfoRPC",["WAComms","WASmaxInGroupsGetInviteGroupInfoResponseClientError","WASmaxInGroupsGetInviteGroupInfoResponseServerError","WASmaxInGroupsGetInviteGroupInfoResponseSuccess","WASmaxOutGroupsGetInviteGroupInfoRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutGroupsGetInviteGroupInfoRequest").makeGetInviteGroupInfoRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInGroupsGetInviteGroupInfoResponseSuccess").parseGetInviteGroupInfoResponseSuccess(b,a);if(c.success)return{name:"GetInviteGroupInfoResponseSuccess",value:c.value};var e=d("WASmaxInGroupsGetInviteGroupInfoResponseClientError").parseGetInviteGroupInfoResponseClientError(b,a);if(e.success)return{name:"GetInviteGroupInfoResponseClientError",value:e.value};b=d("WASmaxInGroupsGetInviteGroupInfoResponseServerError").parseGetInviteGroupInfoResponseServerError(b,a);if(b.success)return{name:"GetInviteGroupInfoResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetInviteGroupInfo",{Success:c,ClientError:e,ServerError:b}))});return h.apply(this,arguments)}g.sendGetInviteGroupInfoRPC=a}),98);
__d("WASmaxInGroupsIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsClientErrors",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorForbiddenMixin","WASmaxInGroupsIQErrorItemNotFoundMixin","WASmaxInGroupsIQErrorLockedMixin","WASmaxInGroupsIQErrorNotAuthorizedMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:c.value});var e=d("WASmaxInGroupsIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:e.value});var f=d("WASmaxInGroupsIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:f.value});var g=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:g.value});var h=d("WASmaxInGroupsIQErrorLockedMixin").parseIQErrorLockedMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"IQErrorLocked",value:h.value});var i=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return i.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:i.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorNotAuthorized","IQErrorForbidden","IQErrorRateOverlimit","IQErrorLocked","IQErrorFallbackClient"],[b,c,e,f,g,h,i])}g.parseGetMembershipApprovalRequestsClientErrors=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsResponseClientError",["WAResultOrError","WASmaxInGroupsGetMembershipApprovalRequestsClientErrors","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsGetMembershipApprovalRequestsClientErrors").parseGetMembershipApprovalRequestsClientErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorGetMembershipApprovalRequestsClientErrors:b.value}))}g.parseGetMembershipApprovalRequestsResponseClientError=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetMembershipApprovalRequestsResponseServerError=a}),98);
__d("WASmaxInGroupsMembershipRequestMethodAttributeMixin",["WAResultOrError","WASmaxInGroupsEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrStringEnum(a,"request_method",d("WASmaxInGroupsEnums").ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD);return!a.success?a:d("WAResultOrError").makeResult({requestMethod:a.value})}g.parseMembershipRequestMethodAttributeMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsMembershipApprovalRequestMixin",["WAResultOrError","WASmaxInGroupsMembershipRequestMethodAttributeMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_request");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"requestor");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"requestor_pn");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"requestor_username");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrGroupJid,a,"parent_group_jid");if(!g.success)return g;var h=d("WASmaxParseUtils").attrIntRange(a,"request_time",0,void 0);if(!h.success)return h;a=d("WASmaxInGroupsMembershipRequestMethodAttributeMixin").parseMembershipRequestMethodAttributeMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({jid:b.value,requestor:c.value,requestorPn:e.value,requestorUsername:f.value,parentGroupJid:g.value,requestTime:h.value},a.value))}g.parseGetMembershipApprovalRequestsMembershipApprovalRequestMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsRequestorFetchMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"requestor_fetch","true");return!a.success?a:d("WAResultOrError").makeResult({requestorFetch:a.value})}g.parseGetMembershipApprovalRequestsRequestorFetchMixin=a}),98);
__d("WASmaxInGroupsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInGroupsGetMembershipApprovalRequestsResponseSuccess",["WAResultOrError","WASmaxInGroupsGetMembershipApprovalRequestsMembershipApprovalRequestMixin","WASmaxInGroupsGetMembershipApprovalRequestsRequestorFetchMixin","WASmaxInGroupsGroupAddressingModeMixin","WASmaxInGroupsIQResultResponseMixin","WASmaxInGroupsIdentityMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"membership_approval_request");if(!b.success)return b;b=d("WASmaxInGroupsGetMembershipApprovalRequestsMembershipApprovalRequestMixin").parseGetMembershipApprovalRequestsMembershipApprovalRequestMixin(a);if(!b.success)return b;a=d("WASmaxInGroupsIdentityMixin").parseIdentityMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{identityMixin:a.success?a.value:null}))}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"membership_approval_requests");if(!c.success)return c;var e=d("WASmaxInGroupsGetMembershipApprovalRequestsRequestorFetchMixin").parseGetMembershipApprovalRequestsRequestorFetchMixin(c.value);b=d("WASmaxInGroupsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!b.success)return b;a=d("WASmaxInGroupsGroupAddressingModeMixin").parseGroupAddressingModeMixin(a);c=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"membership_approval_request",0,19999,h);return!c.success?c:d("WAResultOrError").makeResult(babelHelpers["extends"]({membershipApprovalRequestsGetMembershipApprovalRequestsRequestorFetchMixin:e.success?e.value:null},b.value,{groupAddressingModeMixin:a.success?a.value:null,membershipApprovalRequestsMembershipApprovalRequest:c.value}))}g.parseGetMembershipApprovalRequestsResponseSuccessMembershipApprovalRequestsMembershipApprovalRequest=h;g.parseGetMembershipApprovalRequestsResponseSuccess=a}),98);
__d("WASmaxOutGroupsBaseGetGroupMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.iqTo;a=d("WASmaxOutGroupsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").GROUP_JID(a),xmlns:"w:g2"}));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseGetGroupMixin=a}),98);
__d("WASmaxOutGroupsGetMembershipApprovalRequestsRequestorFetchMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("smax$any",{requestor_fetch:"true"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeGetMembershipApprovalRequestsRequestorFetchMixin=a}),98);
__d("WASmaxOutGroupsGetMembershipApprovalRequestsRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutGroupsBaseGetGroupMixin","WASmaxOutGroupsGetMembershipApprovalRequestsRequestorFetchMixin"],(function(a,b,c,d,e,f,g){function a(a){var b=a.hasGetMembershipApprovalRequestsRequestorFetch;b=d("WASmaxOutGroupsBaseGetGroupMixin").mergeBaseGetGroupMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxMixins").optionalMerge(d("WASmaxOutGroupsGetMembershipApprovalRequestsRequestorFetchMixin").mergeGetMembershipApprovalRequestsRequestorFetchMixin,d("WASmaxJsx").smax("membership_approval_requests",null),b)),a);return b}g.makeGetMembershipApprovalRequestsRequest=a}),98);
__d("WASmaxGroupsGetMembershipApprovalRequestsRPC",["WAComms","WASmaxInGroupsGetMembershipApprovalRequestsResponseClientError","WASmaxInGroupsGetMembershipApprovalRequestsResponseServerError","WASmaxInGroupsGetMembershipApprovalRequestsResponseSuccess","WASmaxOutGroupsGetMembershipApprovalRequestsRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutGroupsGetMembershipApprovalRequestsRequest").makeGetMembershipApprovalRequestsRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInGroupsGetMembershipApprovalRequestsResponseSuccess").parseGetMembershipApprovalRequestsResponseSuccess(b,a);if(c.success)return{name:"GetMembershipApprovalRequestsResponseSuccess",value:c.value};var e=d("WASmaxInGroupsGetMembershipApprovalRequestsResponseClientError").parseGetMembershipApprovalRequestsResponseClientError(b,a);if(e.success)return{name:"GetMembershipApprovalRequestsResponseClientError",value:e.value};b=d("WASmaxInGroupsGetMembershipApprovalRequestsResponseServerError").parseGetMembershipApprovalRequestsResponseServerError(b,a);if(b.success)return{name:"GetMembershipApprovalRequestsResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetMembershipApprovalRequests",{Success:c,ClientError:e,ServerError:b}))});return h.apply(this,arguments)}g.sendGetMembershipApprovalRequestsRPC=a}),98);
__d("WASmaxInGroupsIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestMixin","WASmaxInGroupsIQErrorFallbackClientMixin","WASmaxInGroupsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInGroupsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:c.value});var e=d("WASmaxInGroupsIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(a);return e.success?d("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorRateOverlimit","IQErrorFallbackClient"],[b,c,e])}g.parseIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup=a}),98);
__d("WASmaxInGroupsGetParticipatingGroupsResponseClientError",["WAResultOrError","WASmaxInGroupsIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup","WASmaxInGroupsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInGroupsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInGroupsIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup").parseIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup:b.value}))}g.parseGetParticipatingGroupsResponseClientError=a}),98);
__d("WASmaxInGroupsGetParticipatingGroupsResponseServerError",["WASmaxInGroupsBaseServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInGroupsBaseServerErrorMixin").parseBaseServerErrorMixin(a,b);return!c.success?c:c}g.parseGetParticipatingGroupsResponseServerError=a}),98);
__d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup",["WAResultOrError","WASmaxInGroupsGroupInfoMixin","WASmaxInGroupsTruncatedGroupInfoMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupInfoMixin").parseGroupInfoMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"GroupInfo",value:b.value});var c=d("WASmaxInGroupsTruncatedGroupInfoMixin").parseTruncatedGroupInfoMixin(a);return c.success?d("WAResultOrError").makeResult({name:"TruncatedGroupInfo",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["GroupInfo","TruncatedGroupInfo"],[b,c])}g.parseGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup=a}),98);
__d("WASmaxInGroupsGetParticipatingGroupsResponseSuccess",["WAResultOrError","WASmaxInGroupsDedupAttrsMixin","WASmaxInGroupsGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxInGroupsDedupAttrsMixin").parseDedupAttrsMixin(a);a=d("WASmaxInGroupsGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup").parseGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({dedupAttrsMixin:b.success?b.value:null,groupInfoOrTruncatedGroupInfoGroupInfoMixinGroup:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups");if(!c.success)return c;var e=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",e.value);if(!e.success)return e;e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"group",0,1e4,h);return!b.success?b:d("WAResultOrError").makeResult({type:e.value,groupsGroup:b.value})}g.parseGetParticipatingGroupsResponseSuccessGroupsGroup=h;g.parseGetParticipatingGroupsResponseSuccess=a}),98);
__d("WASmaxOutGroupsGetParticipatingGroupsRequest",["WASmaxChildren","WASmaxJsx","WASmaxOutGroupsBaseGetServerMixin"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("participants",null);return a}function i(){var a=d("WASmaxJsx").smax("description",null);return a}function a(a){var b=a.hasParticipants;a=a.hasDescription;b=d("WASmaxOutGroupsBaseGetServerMixin").mergeBaseGetServerMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("participating",null,d("WASmaxChildren").HAS_OPTIONAL_CHILD(h,b),d("WASmaxChildren").HAS_OPTIONAL_CHILD(i,a))));return b}g.makeGetParticipatingGroupsRequestParticipatingParticipants=h;g.makeGetParticipatingGroupsRequestParticipatingDescription=i;g.makeGetParticipatingGroupsRequest=a}),98);
__d("WASmaxGroupsGetParticipatingGroupsRPC",["WAComms","WASmaxInGroupsGetParticipatingGroupsResponseClientError","WASmaxInGroupsGetParticipatingGroupsResponseServerError","WASmaxInGroupsGetParticipatingGroupsResponseSuccess","WASmaxOutGroupsGetParticipatingGroupsRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WASmaxOutGroupsGetParticipatingGroupsRequest").makeGetParticipatingGroupsRequest(a);b=(yield d("WAComms").sendSmaxStanza(a,b));var c=d("WASmaxInGroupsGetParticipatingGroupsResponseSuccess").parseGetParticipatingGroupsResponseSuccess(b,a);if(c.success)return{name:"GetParticipatingGroupsResponseSuccess",value:c.value};var e=d("WASmaxInGroupsGetParticipatingGroupsResponseClientError").parseGetParticipatingGroupsResponseClientError(b,a);if(e.success)return{name:"GetParticipatingGroupsResponseClientError",value:e.value};b=d("WASmaxInGroupsGetParticipatingGroupsResponseServerError").parseGetParticipatingGroupsResponseServerError(b,a);if(b.success)return{name:"GetParticipatingGroupsResponseServerError",value:b.value};throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetParticipatingGroups",{Success:c,ClientError:e,ServerError:b}))});return h.apply(this,arguments)}g.sendGetParticipatingGroupsRPC=a}),98);
__d("WASyncAction.pb",["$InternalEnum","WAProtoConst","WAProtobufsChatLockSettings.pb","WAProtobufsDeviceCapabilities.pb","WAProtocol.pb"],(function(a,b,aa,c,ba,d,e){var f;aa=(a=b("$InternalEnum"))({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});ba=a({NONE:0,SCHEDULED:1,PRIVACY:2,LIGHTWEIGHT:3});d=a({CONNECTED:0,REJECTED:1,CANCELLED:2,ACCEPTEDELSEWHERE:3,MISSED:4,INVALID:5,UNAVAILABLE:6,UPCOMING:7,FAILED:8,ABANDONED:9,ONGOING:10});b=a({UPDATED:0,CREATED:1,DELETED:2});var ca=a({ENABLED:0,ENABLED_HAS_LEARNING:1,DISABLED:2}),da=a({BR_PAY_PRIVACY_POLICY:0}),ea=a({DEFAULT_ALL_MESSAGES:0,ALL_MESSAGES:1,HIGHLIGHTS:2,DEFAULT_HIGHLIGHTS:3}),fa=a({ACTIVE:0}),ga=a({ACTIVE:0,INACTIVE:1}),ha=a({LAUNCH:1}),ia=a({UNSTRUCTURED:1,STRUCTURED:2}),ja=a({ALLOW_LIST:0,DENY_LIST:1,CONTACTS:2}),ka=a({PERSONALIZED:0}),la=a({LID:1,PN:2}),ma=a({NONE:0,UNREAD:1,GROUPS:2,FAVORITES:3,PREDEFINED:4,CUSTOM:5,COMMUNITY:6,SERVER_ASSIGNED:7});a=a({ANDROID:0,SMBA:1,IPHONE:2,SMBI:3,WEB:4,UWP:5,DARWIN:6,IPAD:7,WEAROS:8,WASG:9,WEARM:10,CAPI:11});var g={},h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={},R={},S={},T={},U={},V={},W={},X={},Y={},Z={},na={},oa={},pa={},qa={},ra={},sa={},ta={},ua={},va={},$={},wa={},xa={},ya={},za={},Aa={},Ba={},Ca={},Da={},Ea={},Fa={},Ga={},Ha={},Ia={},Ja={},Ka={},La={},Ma={},Na={},Oa={};g.name="RecentEmojiWeight";g.internalSpec={emoji:[1,(f=c("WAProtoConst")).TYPES.STRING],weight:[2,f.TYPES.FLOAT]};h.name="CallLogRecord";h.internalSpec={callResult:[1,f.TYPES.ENUM,d],isDndMode:[2,f.TYPES.BOOL],silenceReason:[3,f.TYPES.ENUM,ba],duration:[4,f.TYPES.INT64],startTime:[5,f.TYPES.INT64],isIncoming:[6,f.TYPES.BOOL],isVideo:[7,f.TYPES.BOOL],isCallLink:[8,f.TYPES.BOOL],callLinkToken:[9,f.TYPES.STRING],scheduledCallId:[10,f.TYPES.STRING],callId:[11,f.TYPES.STRING],callCreatorJid:[12,f.TYPES.STRING],groupJid:[13,f.TYPES.STRING],participants:[14,f.FLAGS.REPEATED|f.TYPES.MESSAGE,i],callType:[15,f.TYPES.ENUM,aa]};i.name="CallLogRecord$ParticipantInfo";i.internalSpec={userJid:[1,f.TYPES.STRING],callResult:[2,f.TYPES.ENUM,d]};j.name="SyncActionValue";j.internalSpec={timestamp:[1,f.TYPES.INT64],starAction:[2,f.TYPES.MESSAGE,Ma],contactAction:[3,f.TYPES.MESSAGE,La],muteAction:[4,f.TYPES.MESSAGE,Ka],pinAction:[5,f.TYPES.MESSAGE,Ja],securityNotificationSetting:[6,f.TYPES.MESSAGE,Ia],pushNameSetting:[7,f.TYPES.MESSAGE,Ha],quickReplyAction:[8,f.TYPES.MESSAGE,Fa],recentEmojiWeightsAction:[11,f.TYPES.MESSAGE,Ca],labelEditAction:[14,f.TYPES.MESSAGE,Da],labelAssociationAction:[15,f.TYPES.MESSAGE,Ea],localeSetting:[16,f.TYPES.MESSAGE,Ga],archiveChatAction:[17,f.TYPES.MESSAGE,Ba],deleteMessageForMeAction:[18,f.TYPES.MESSAGE,Aa],keyExpiration:[19,f.TYPES.MESSAGE,ua],markChatAsReadAction:[20,f.TYPES.MESSAGE,za],clearChatAction:[21,f.TYPES.MESSAGE,ya],deleteChatAction:[22,f.TYPES.MESSAGE,xa],unarchiveChatsSetting:[23,f.TYPES.MESSAGE,wa],primaryFeature:[24,f.TYPES.MESSAGE,ta],androidUnsupportedActions:[26,f.TYPES.MESSAGE,sa],agentAction:[27,f.TYPES.MESSAGE,ra],subscriptionAction:[28,f.TYPES.MESSAGE,qa],userStatusMuteAction:[29,f.TYPES.MESSAGE,pa],timeFormatAction:[30,f.TYPES.MESSAGE,oa],nuxAction:[31,f.TYPES.MESSAGE,na],primaryVersionAction:[32,f.TYPES.MESSAGE,Z],stickerAction:[33,f.TYPES.MESSAGE,X],removeRecentStickerAction:[34,f.TYPES.MESSAGE,Y],chatAssignment:[35,f.TYPES.MESSAGE,W],chatAssignmentOpenedStatus:[36,f.TYPES.MESSAGE,V],pnForLidChatAction:[37,f.TYPES.MESSAGE,U],marketingMessageAction:[38,f.TYPES.MESSAGE,S],marketingMessageBroadcastAction:[39,f.TYPES.MESSAGE,R],externalWebBetaAction:[40,f.TYPES.MESSAGE,Q],privacySettingRelayAllCalls:[41,f.TYPES.MESSAGE,O],callLogAction:[42,f.TYPES.MESSAGE,N],statusPrivacy:[44,f.TYPES.MESSAGE,M],botWelcomeRequestAction:[45,f.TYPES.MESSAGE,K],deleteIndividualCallLog:[46,f.TYPES.MESSAGE,J],labelReorderingAction:[47,f.TYPES.MESSAGE,I],paymentInfoAction:[48,f.TYPES.MESSAGE,H],customPaymentMethodsAction:[49,f.TYPES.MESSAGE,E],lockChatAction:[50,f.TYPES.MESSAGE,D],chatLockSettings:[51,f.TYPES.MESSAGE,c("WAProtobufsChatLockSettings.pb").ChatLockSettingsSpec],wamoUserIdentifierAction:[52,f.TYPES.MESSAGE,C],privacySettingDisableLinkPreviewsAction:[53,f.TYPES.MESSAGE,B],deviceCapabilities:[54,f.TYPES.MESSAGE,c("WAProtobufsDeviceCapabilities.pb").DeviceCapabilitiesSpec],noteEditAction:[55,f.TYPES.MESSAGE,z],favoritesAction:[56,f.TYPES.MESSAGE,w],merchantPaymentPartnerAction:[57,f.TYPES.MESSAGE,v],waffleAccountLinkStateAction:[58,f.TYPES.MESSAGE,u],usernameChatStartMode:[59,f.TYPES.MESSAGE,T],notificationActivitySettingAction:[60,f.TYPES.MESSAGE,t],lidContactAction:[61,f.TYPES.MESSAGE,s],ctwaPerCustomerDataSharingAction:[62,f.TYPES.MESSAGE,r],paymentTosAction:[63,f.TYPES.MESSAGE,q],privacySettingChannelsPersonalisedRecommendationAction:[64,f.TYPES.MESSAGE,A],businessBroadcastAssociationAction:[65,f.TYPES.MESSAGE,p],detectedOutcomesStatusAction:[66,f.TYPES.MESSAGE,P],maibaAiFeaturesControlAction:[68,f.TYPES.MESSAGE,m],businessBroadcastListAction:[69,f.TYPES.MESSAGE,o],musicUserIdAction:[70,f.TYPES.MESSAGE,L],statusPostOptInNotificationPreferencesAction:[71,f.TYPES.MESSAGE,l],avatarUpdatedAction:[72,f.TYPES.MESSAGE,k],galaxyFlowAction:[73,f.TYPES.MESSAGE,y]};k.name="SyncActionValue$AvatarUpdatedAction";k.internalSpec={eventType:[1,f.TYPES.ENUM,b],recentAvatarStickers:[2,f.FLAGS.REPEATED|f.TYPES.MESSAGE,X]};l.name="SyncActionValue$StatusPostOptInNotificationPreferencesAction";l.internalSpec={enabled:[1,f.TYPES.BOOL]};m.name="SyncActionValue$MaibaAIFeaturesControlAction";m.internalSpec={aiFeatureStatus:[1,f.TYPES.ENUM,ca]};n.name="SyncActionValue$BroadcastListParticipant";n.internalSpec={lidJid:[1,f.FLAGS.REQUIRED|f.TYPES.STRING],pnJid:[2,f.TYPES.STRING]};o.name="SyncActionValue$BusinessBroadcastListAction";o.internalSpec={deleted:[1,f.TYPES.BOOL],participants:[2,f.FLAGS.REPEATED|f.TYPES.MESSAGE,n],listName:[3,f.TYPES.STRING]};p.name="SyncActionValue$BusinessBroadcastAssociationAction";p.internalSpec={deleted:[1,f.TYPES.BOOL]};q.name="SyncActionValue$PaymentTosAction";q.internalSpec={paymentNotice:[1,f.FLAGS.REQUIRED|f.TYPES.ENUM,da],accepted:[2,f.FLAGS.REQUIRED|f.TYPES.BOOL]};r.name="SyncActionValue$CtwaPerCustomerDataSharingAction";r.internalSpec={isCtwaPerCustomerDataSharingEnabled:[1,f.TYPES.BOOL]};s.name="SyncActionValue$LidContactAction";s.internalSpec={fullName:[1,f.TYPES.STRING],firstName:[2,f.TYPES.STRING],username:[3,f.TYPES.STRING],saveOnPrimaryAddressbook:[4,f.TYPES.BOOL]};t.name="SyncActionValue$NotificationActivitySettingAction";t.internalSpec={notificationActivitySetting:[1,f.TYPES.ENUM,ea]};u.name="SyncActionValue$WaffleAccountLinkStateAction";u.internalSpec={linkState:[2,f.TYPES.ENUM,fa]};v.name="SyncActionValue$MerchantPaymentPartnerAction";v.internalSpec={status:[1,f.FLAGS.REQUIRED|f.TYPES.ENUM,ga],country:[2,f.FLAGS.REQUIRED|f.TYPES.STRING],gatewayName:[3,f.TYPES.STRING],credentialId:[4,f.TYPES.STRING]};w.name="SyncActionValue$FavoritesAction";w.internalSpec={favorites:[1,f.FLAGS.REPEATED|f.TYPES.MESSAGE,x]};x.name="SyncActionValue$FavoritesAction$Favorite";x.internalSpec={id:[1,f.TYPES.STRING]};y.name="SyncActionValue$GalaxyFlowAction";y.internalSpec={type:[1,f.FLAGS.REQUIRED|f.TYPES.ENUM,ha]};z.name="SyncActionValue$NoteEditAction";z.internalSpec={type:[1,f.TYPES.ENUM,ia],chatJid:[2,f.TYPES.STRING],createdAt:[3,f.TYPES.INT64],deleted:[4,f.TYPES.BOOL],unstructuredContent:[5,f.TYPES.STRING]};A.name="SyncActionValue$PrivacySettingChannelsPersonalisedRecommendationAction";A.internalSpec={isUserOptedOut:[1,f.TYPES.BOOL]};B.name="SyncActionValue$PrivacySettingDisableLinkPreviewsAction";B.internalSpec={isPreviewsDisabled:[1,f.TYPES.BOOL]};C.name="SyncActionValue$WamoUserIdentifierAction";C.internalSpec={identifier:[1,f.TYPES.STRING]};D.name="SyncActionValue$LockChatAction";D.internalSpec={locked:[1,f.TYPES.BOOL]};E.name="SyncActionValue$CustomPaymentMethodsAction";E.internalSpec={customPaymentMethods:[1,f.FLAGS.REPEATED|f.TYPES.MESSAGE,F]};F.name="SyncActionValue$CustomPaymentMethod";F.internalSpec={credentialId:[1,f.FLAGS.REQUIRED|f.TYPES.STRING],country:[2,f.FLAGS.REQUIRED|f.TYPES.STRING],type:[3,f.FLAGS.REQUIRED|f.TYPES.STRING],metadata:[4,f.FLAGS.REPEATED|f.TYPES.MESSAGE,G]};G.name="SyncActionValue$CustomPaymentMethodMetadata";G.internalSpec={key:[1,f.FLAGS.REQUIRED|f.TYPES.STRING],value:[2,f.FLAGS.REQUIRED|f.TYPES.STRING]};H.name="SyncActionValue$PaymentInfoAction";H.internalSpec={cpi:[1,f.TYPES.STRING]};I.name="SyncActionValue$LabelReorderingAction";I.internalSpec={sortedLabelIds:[1,f.FLAGS.REPEATED|f.TYPES.INT32]};J.name="SyncActionValue$DeleteIndividualCallLogAction";J.internalSpec={peerJid:[1,f.TYPES.STRING],isIncoming:[2,f.TYPES.BOOL]};K.name="SyncActionValue$BotWelcomeRequestAction";K.internalSpec={isSent:[1,f.TYPES.BOOL]};L.name="SyncActionValue$MusicUserIdAction";L.internalSpec={musicUserId:[1,f.TYPES.STRING]};M.name="SyncActionValue$StatusPrivacyAction";M.internalSpec={mode:[1,f.TYPES.ENUM,ja],userJid:[2,f.FLAGS.REPEATED|f.TYPES.STRING]};N.name="SyncActionValue$CallLogAction";N.internalSpec={callLogRecord:[1,f.TYPES.MESSAGE,h]};O.name="SyncActionValue$PrivacySettingRelayAllCalls";O.internalSpec={isEnabled:[1,f.TYPES.BOOL]};P.name="SyncActionValue$DetectedOutcomesStatusAction";P.internalSpec={isEnabled:[1,f.TYPES.BOOL]};Q.name="SyncActionValue$ExternalWebBetaAction";Q.internalSpec={isOptIn:[1,f.TYPES.BOOL]};R.name="SyncActionValue$MarketingMessageBroadcastAction";R.internalSpec={repliedCount:[1,f.TYPES.INT32]};S.name="SyncActionValue$MarketingMessageAction";S.internalSpec={name:[1,f.TYPES.STRING],message:[2,f.TYPES.STRING],type:[3,f.TYPES.ENUM,ka],createdAt:[4,f.TYPES.INT64],lastSentAt:[5,f.TYPES.INT64],isDeleted:[6,f.TYPES.BOOL],mediaId:[7,f.TYPES.STRING]};T.name="SyncActionValue$UsernameChatStartModeAction";T.internalSpec={chatStartMode:[1,f.TYPES.ENUM,la]};U.name="SyncActionValue$PnForLidChatAction";U.internalSpec={pnJid:[1,f.TYPES.STRING]};V.name="SyncActionValue$ChatAssignmentOpenedStatusAction";V.internalSpec={chatOpened:[1,f.TYPES.BOOL]};W.name="SyncActionValue$ChatAssignmentAction";W.internalSpec={deviceAgentID:[1,f.TYPES.STRING]};X.name="SyncActionValue$StickerAction";X.internalSpec={url:[1,f.TYPES.STRING],fileEncSha256:[2,f.TYPES.BYTES],mediaKey:[3,f.TYPES.BYTES],mimetype:[4,f.TYPES.STRING],height:[5,f.TYPES.UINT32],width:[6,f.TYPES.UINT32],directPath:[7,f.TYPES.STRING],fileLength:[8,f.TYPES.UINT64],isFavorite:[9,f.TYPES.BOOL],deviceIdHint:[10,f.TYPES.UINT32],isLottie:[11,f.TYPES.BOOL],imageHash:[12,f.TYPES.STRING],isAvatarSticker:[13,f.TYPES.BOOL]};Y.name="SyncActionValue$RemoveRecentStickerAction";Y.internalSpec={lastStickerSentTs:[1,f.TYPES.INT64]};Z.name="SyncActionValue$PrimaryVersionAction";Z.internalSpec={version:[1,f.TYPES.STRING]};na.name="SyncActionValue$NuxAction";na.internalSpec={acknowledged:[1,f.TYPES.BOOL]};oa.name="SyncActionValue$TimeFormatAction";oa.internalSpec={isTwentyFourHourFormatEnabled:[1,f.TYPES.BOOL]};pa.name="SyncActionValue$UserStatusMuteAction";pa.internalSpec={muted:[1,f.TYPES.BOOL]};qa.name="SyncActionValue$SubscriptionAction";qa.internalSpec={isDeactivated:[1,f.TYPES.BOOL],isAutoRenewing:[2,f.TYPES.BOOL],expirationDate:[3,f.TYPES.INT64]};ra.name="SyncActionValue$AgentAction";ra.internalSpec={name:[1,f.TYPES.STRING],deviceID:[2,f.TYPES.INT32],isDeleted:[3,f.TYPES.BOOL]};sa.name="SyncActionValue$AndroidUnsupportedActions";sa.internalSpec={allowed:[1,f.TYPES.BOOL]};ta.name="SyncActionValue$PrimaryFeature";ta.internalSpec={flags:[1,f.FLAGS.REPEATED|f.TYPES.STRING]};ua.name="SyncActionValue$KeyExpiration";ua.internalSpec={expiredKeyEpoch:[1,f.TYPES.INT32]};va.name="SyncActionValue$SyncActionMessage";va.internalSpec={key:[1,f.TYPES.MESSAGE,c("WAProtocol.pb").MessageKeySpec],timestamp:[2,f.TYPES.INT64]};$.name="SyncActionValue$SyncActionMessageRange";$.internalSpec={lastMessageTimestamp:[1,f.TYPES.INT64],lastSystemMessageTimestamp:[2,f.TYPES.INT64],messages:[3,f.FLAGS.REPEATED|f.TYPES.MESSAGE,va]};wa.name="SyncActionValue$UnarchiveChatsSetting";wa.internalSpec={unarchiveChats:[1,f.TYPES.BOOL]};xa.name="SyncActionValue$DeleteChatAction";xa.internalSpec={messageRange:[1,f.TYPES.MESSAGE,$]};ya.name="SyncActionValue$ClearChatAction";ya.internalSpec={messageRange:[1,f.TYPES.MESSAGE,$]};za.name="SyncActionValue$MarkChatAsReadAction";za.internalSpec={read:[1,f.TYPES.BOOL],messageRange:[2,f.TYPES.MESSAGE,$]};Aa.name="SyncActionValue$DeleteMessageForMeAction";Aa.internalSpec={deleteMedia:[1,f.TYPES.BOOL],messageTimestamp:[2,f.TYPES.INT64]};Ba.name="SyncActionValue$ArchiveChatAction";Ba.internalSpec={archived:[1,f.TYPES.BOOL],messageRange:[2,f.TYPES.MESSAGE,$]};Ca.name="SyncActionValue$RecentEmojiWeightsAction";Ca.internalSpec={weights:[1,f.FLAGS.REPEATED|f.TYPES.MESSAGE,g]};Da.name="SyncActionValue$LabelEditAction";Da.internalSpec={name:[1,f.TYPES.STRING],color:[2,f.TYPES.INT32],predefinedId:[3,f.TYPES.INT32],deleted:[4,f.TYPES.BOOL],orderIndex:[5,f.TYPES.INT32],isActive:[6,f.TYPES.BOOL],type:[7,f.TYPES.ENUM,ma],isImmutable:[8,f.TYPES.BOOL]};Ea.name="SyncActionValue$LabelAssociationAction";Ea.internalSpec={labeled:[1,f.TYPES.BOOL]};Fa.name="SyncActionValue$QuickReplyAction";Fa.internalSpec={shortcut:[1,f.TYPES.STRING],message:[2,f.TYPES.STRING],keywords:[3,f.FLAGS.REPEATED|f.TYPES.STRING],count:[4,f.TYPES.INT32],deleted:[5,f.TYPES.BOOL]};Ga.name="SyncActionValue$LocaleSetting";Ga.internalSpec={locale:[1,f.TYPES.STRING]};Ha.name="SyncActionValue$PushNameSetting";Ha.internalSpec={name:[1,f.TYPES.STRING]};Ia.name="SyncActionValue$SecurityNotificationSetting";Ia.internalSpec={showNotification:[1,f.TYPES.BOOL]};Ja.name="SyncActionValue$PinAction";Ja.internalSpec={pinned:[1,f.TYPES.BOOL]};Ka.name="SyncActionValue$MuteAction";Ka.internalSpec={muted:[1,f.TYPES.BOOL],muteEndTimestamp:[2,f.TYPES.INT64],autoMuted:[3,f.TYPES.BOOL]};La.name="SyncActionValue$ContactAction";La.internalSpec={fullName:[1,f.TYPES.STRING],firstName:[2,f.TYPES.STRING],lidJid:[3,f.TYPES.STRING],saveOnPrimaryAddressbook:[4,f.TYPES.BOOL],pnJid:[5,f.TYPES.STRING],username:[6,f.TYPES.STRING]};Ma.name="SyncActionValue$StarAction";Ma.internalSpec={starred:[1,f.TYPES.BOOL]};Na.name="SyncActionData";Na.internalSpec={index:[1,f.TYPES.BYTES],value:[2,f.TYPES.MESSAGE,j],padding:[3,f.TYPES.BYTES],version:[4,f.TYPES.INT32]};Oa.name="PatchDebugData";Oa.internalSpec={currentLthash:[1,f.TYPES.BYTES],newLthash:[2,f.TYPES.BYTES],patchVersion:[3,f.TYPES.BYTES],collectionName:[4,f.TYPES.BYTES],firstFourBytesFromAHashOfSnapshotMacKey:[5,f.TYPES.BYTES],newLthashSubtract:[6,f.TYPES.BYTES],numberAdd:[7,f.TYPES.INT32],numberRemove:[8,f.TYPES.INT32],numberOverride:[9,f.TYPES.INT32],senderPlatform:[10,f.TYPES.ENUM,a],isSenderPrimary:[11,f.TYPES.BOOL]};e.CallLogRecord$CallType=aa;e.CallLogRecord$SilenceReason=ba;e.CallLogRecord$CallResult=d;e.SyncActionValue$AvatarUpdatedAction$AvatarEventType=b;e.SyncActionValue$MaibaAIFeaturesControlAction$MaibaAIFeatureStatus=ca;e.SyncActionValue$PaymentTosAction$PaymentNotice=da;e.SyncActionValue$NotificationActivitySettingAction$NotificationActivitySetting=ea;e.SyncActionValue$WaffleAccountLinkStateAction$AccountLinkState=fa;e.SyncActionValue$MerchantPaymentPartnerAction$Status=ga;e.SyncActionValue$GalaxyFlowAction$GalaxyFlowActionType=ha;e.SyncActionValue$NoteEditAction$NoteType=ia;e.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=ja;e.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=ka;e.SyncActionValue$UsernameChatStartModeAction$ChatStartMode=la;e.SyncActionValue$LabelEditAction$ListType=ma;e.PatchDebugData$Platform=a;e.RecentEmojiWeightSpec=g;e.CallLogRecordSpec=h;e.CallLogRecord$ParticipantInfoSpec=i;e.SyncActionValueSpec=j;e.SyncActionValue$AvatarUpdatedActionSpec=k;e.SyncActionValue$StatusPostOptInNotificationPreferencesActionSpec=l;e.SyncActionValue$MaibaAIFeaturesControlActionSpec=m;e.SyncActionValue$BroadcastListParticipantSpec=n;e.SyncActionValue$BusinessBroadcastListActionSpec=o;e.SyncActionValue$BusinessBroadcastAssociationActionSpec=p;e.SyncActionValue$PaymentTosActionSpec=q;e.SyncActionValue$CtwaPerCustomerDataSharingActionSpec=r;e.SyncActionValue$LidContactActionSpec=s;e.SyncActionValue$NotificationActivitySettingActionSpec=t;e.SyncActionValue$WaffleAccountLinkStateActionSpec=u;e.SyncActionValue$MerchantPaymentPartnerActionSpec=v;e.SyncActionValue$FavoritesActionSpec=w;e.SyncActionValue$FavoritesAction$FavoriteSpec=x;e.SyncActionValue$GalaxyFlowActionSpec=y;e.SyncActionValue$NoteEditActionSpec=z;e.SyncActionValue$PrivacySettingChannelsPersonalisedRecommendationActionSpec=A;e.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=B;e.SyncActionValue$WamoUserIdentifierActionSpec=C;e.SyncActionValue$LockChatActionSpec=D;e.SyncActionValue$CustomPaymentMethodsActionSpec=E;e.SyncActionValue$CustomPaymentMethodSpec=F;e.SyncActionValue$CustomPaymentMethodMetadataSpec=G;e.SyncActionValue$PaymentInfoActionSpec=H;e.SyncActionValue$LabelReorderingActionSpec=I;e.SyncActionValue$DeleteIndividualCallLogActionSpec=J;e.SyncActionValue$BotWelcomeRequestActionSpec=K;e.SyncActionValue$MusicUserIdActionSpec=L;e.SyncActionValue$StatusPrivacyActionSpec=M;e.SyncActionValue$CallLogActionSpec=N;e.SyncActionValue$PrivacySettingRelayAllCallsSpec=O;e.SyncActionValue$DetectedOutcomesStatusActionSpec=P;e.SyncActionValue$ExternalWebBetaActionSpec=Q;e.SyncActionValue$MarketingMessageBroadcastActionSpec=R;e.SyncActionValue$MarketingMessageActionSpec=S;e.SyncActionValue$UsernameChatStartModeActionSpec=T;e.SyncActionValue$PnForLidChatActionSpec=U;e.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=V;e.SyncActionValue$ChatAssignmentActionSpec=W;e.SyncActionValue$StickerActionSpec=X;e.SyncActionValue$RemoveRecentStickerActionSpec=Y;e.SyncActionValue$PrimaryVersionActionSpec=Z;e.SyncActionValue$NuxActionSpec=na;e.SyncActionValue$TimeFormatActionSpec=oa;e.SyncActionValue$UserStatusMuteActionSpec=pa;e.SyncActionValue$SubscriptionActionSpec=qa;e.SyncActionValue$AgentActionSpec=ra;e.SyncActionValue$AndroidUnsupportedActionsSpec=sa;e.SyncActionValue$PrimaryFeatureSpec=ta;e.SyncActionValue$KeyExpirationSpec=ua;e.SyncActionValue$SyncActionMessageSpec=va;e.SyncActionValue$SyncActionMessageRangeSpec=$;e.SyncActionValue$UnarchiveChatsSettingSpec=wa;e.SyncActionValue$DeleteChatActionSpec=xa;e.SyncActionValue$ClearChatActionSpec=ya;e.SyncActionValue$MarkChatAsReadActionSpec=za;e.SyncActionValue$DeleteMessageForMeActionSpec=Aa;e.SyncActionValue$ArchiveChatActionSpec=Ba;e.SyncActionValue$RecentEmojiWeightsActionSpec=Ca;e.SyncActionValue$LabelEditActionSpec=Da;e.SyncActionValue$LabelAssociationActionSpec=Ea;e.SyncActionValue$QuickReplyActionSpec=Fa;e.SyncActionValue$LocaleSettingSpec=Ga;e.SyncActionValue$PushNameSettingSpec=Ha;e.SyncActionValue$SecurityNotificationSettingSpec=Ia;e.SyncActionValue$PinActionSpec=Ja;e.SyncActionValue$MuteActionSpec=Ka;e.SyncActionValue$ContactActionSpec=La;e.SyncActionValue$StarActionSpec=Ma;e.SyncActionDataSpec=Na;e.PatchDebugDataSpec=Oa}),98);
__d("WASyncdKeyTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}f.toSyncKeyId=a;f.fromSyncKeyId=b;f.toSyncKeyData=c;f.fromSyncKeyData=d}),66);
__d("WATrie",["WANullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this._children={},this._indices=[],a&&(this._data=a)}a.fromBackwardsStrings=function(b,c){return b.reduce(function(a,b,c){return a.addBackwardsString(b,c)},new a(c))._optimize()};var b=a.prototype;b.addBackwardsString=function(b,c){var d=b.length-1,e=this;while(d>=0){var f=b.charAt(d);e._addIndex(c);e=e.get(f)||e.set(f,new a());d--}e._addIndex(c);return this};a.fromForwardsStrings=function(b,c){return b.reduce(function(a,b,c){return a.addForwardsString(b,c)},new a(c))._optimize()};b.addForwardsString=function(b,c){var d=0,e=this;while(d<b.length){var f=b.charAt(d);e._addIndex(c);e=e.get(f)||e.set(f,new a());d++}e._addIndex(c);return this};b.set=function(a,b){this._children[a]=b;return b};b.get=function(a){return this._children[a]};b.getChildren=function(){var a=this;return Object.keys(this._children).map(function(b){return{prefix:b,node:c("WANullthrows")(a.get(b))}})};b.hasChildren=function(){return!h(this._children)};b.search=function(a){var b=this._data;if(!b)return[];var c=this;for(var d=0;d<a.length;d++){if(!c)break;var e=a[d];c=c.get(e)}if(!c)return[];e=c.getIndices();return e.map(function(a){return b[a]})};b._addIndex=function(a){this._indices.push(a)};b.getIndices=function(){var a=this._indices,b=Object.keys(this._children);return b.length===1&&this._indices.length===0?this._children[b[0]].getIndices():a};b._optimize=function(){var a=this;if(!this.hasChildren())return this;var b=Object.keys(this._children),c=this._children[b[0]]._indices;b.forEach(function(b){a._children[b]._optimize()});b.length===1&&this._indices.length===c.length&&(this._indices=[]);return this};b.testOnlyGetChildrenProperty=function(){return this._children};b.testOnlyGetIndicesProperty=function(){return this._indices};return a}();function h(a){for(a in a)return!1;return!0}g["default"]=a}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(a,b,c,d,e,f,g){"use strict";c=b("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit"});var h=32;function a(a){var b=a.messageSecret,c=a.stanzaId,e=a.parentMsgOriginalSender,f=a.modificationSender;a=a.modificationType;c=d("WABinary").Binary.build(c,e,f,a).readBuffer();return d("WACryptoHkdf").extractAndExpand(b instanceof ArrayBuffer?new Uint8Array(b):b,c,h)}g.UseCaseSecretModificationType=c;g.createUseCaseSecret=a}),98);
__d("WAWebAccountLinkingSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("account-linking").version(d("WAWebModelStorageVersions").accountLinkingCreateTable(),[b("accountLinkKey"),c("linkState"),c("linkTimestamp"),c("nonce"),c("fbid"),c("accesstoken"),c("pingInterval"),c("fbCrosspostingDestinationId"),c("igCrosspostingDestinationId"),c("foAToWALinkEligibility"),c("accountLinkingOpaqueData")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("account-linking")}g.addTable=a;g.getTable=b}),98);
__d("WAWebWamEnumIqResponseType",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD_PARTICIPANT:1,REMOVE_PARTICIPANT:2,PROMOTE_PARTICIPANT:3,DEMOTE_PARTICIPANT:4});f.IQ_RESPONSE_TYPE=a}),66);
__d("WAWebAddressingModeMismatchWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumIqResponseType","WAWebWamEnumMismatchOriginType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({AddressingModeMismatch:[4750,{iqResponse:[1,d("WAWebWamEnumIqResponseType").IQ_RESPONSE_TYPE],localAddressingMode:[2,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],mismatchOrigin:[6,d("WAWebWamEnumMismatchOriginType").MISMATCH_ORIGIN_TYPE],notificationTag:[3,d("WAWebWamCodegenUtils").TYPES.STRING],serverAddressingMode:[5,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE]},[1,1,1],"regular"]},{AddressingModeMismatch:[]});g.AddressingModeMismatchWamEvent=a}),98);
__d("WAWebAnimatedEmojiGatingUtils",["WAWebABProps","gkx"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("animated_emojis_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("remove_single_emoji_bubble_background_enabled")}function e(){return d("WAWebABProps").getABPropConfigValue("animated_emoji_set_1_enabled")}function f(){return!c("gkx")("26258")&&d("WAWebABProps").getABPropConfigValue("animated_emoji_final_set_enabled")}function h(){return d("WAWebABProps").getABPropConfigValue("animated_race_mercedes_car_emoji_enabled")}g.isAnimatedEmojiEnabled=a;g.isStaticSingleEmojiUIEnabled=b;g.isAnimatedEmojiSet1Enabled=e;g.isAnimatedEmojiFinalSetEnabled=f;g.isAnimatedEmojiMercedesRacingEnabled=h}),98);
__d("WAWebSchemaMembershipApprovalRequest",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("pending-membership-approval-request").version(d("WAWebModelStorageVersions").membershipApprovalRequestCreateTable(),[e(["groupId","id"]),b("groupId"),c("t"),c("addedBy"),c("requestMethod"),c("parentGroupId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("pending-membership-approval-request")}g.addTable=a;g.getMembershipApprovalRequestTable=b}),98);
__d("WAWebApiMembershipApprovalRequestStore",["WAWebSchemaMembershipApprovalRequest","WAWebWidFactory"],(function(a,b,c,d,e,f,g){a=function(a){return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().equals(["groupId"],a.toString()).then(function(a){return a.map(function(a){var b=a.id,c=a.t,e=a.addedBy,f=a.requestMethod;a=a.parentGroupId;return{id:d("WAWebWidFactory").createWid(b),t:c,addedBy:d("WAWebWidFactory").createWid(e),requestMethod:f,parentGroupId:a!=null?d("WAWebWidFactory").createWid(a):void 0}})})};b=function(a,b){b=b.map(function(b){var c=b.id,d=b.t,e=b.addedBy,f=b.requestMethod;b=b.parentGroupId;return{groupId:a.toString(),id:c.toString(),t:d,addedBy:e.toString(),requestMethod:f,parentGroupId:b==null?void 0:b.toString()}});return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().bulkCreateOrReplace(b)};c=function(a,b){var c=a.toString();return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().bulkRemove(b.map(function(a){return[c,a.toString()]}))};e=function(a){return d("WAWebSchemaMembershipApprovalRequest").getMembershipApprovalRequestTable().bulkRemoveByIndex(["groupId"],[a.toString()])};g.getMembershipApprovalRequests=a;g.addMembershipApprovalRequests=b;g.removeMembershipApprovalRequests=c;g.removeAllMembershipApprovalRequests=e}),98);
__d("WAWebGroupConstants",[],(function(a,b,c,d,e,f){a={ANNOUNCEMENT:"announcement",RESTRICT:"restrict",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",EPHEMERAL:"ephemeral",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",REPORT_TO_ADMIN_MODE:"report_to_admin_mode",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",MEMBER_ADD_MODE:"member_add_mode",LIMIT_SHARING:"limit_sharing"};b=60;f.GROUP_SETTING_TYPE=a;f.PAST_PARTICIPANT_EXPIRATION_DAYS=b}),66);
__d("WAWebSchemaParticipant",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addArrayIndex;a.add("participant").version(d("WAWebModelStorageVersions").participantCreateTable(),[e("groupId"),c("senderKey"),c("participants"),c("pastParticipants"),c("admins"),c("rotateKey"),c("version"),b("participants"),c("deviceSyncComplete"),c("staleType"),c("superAdmins")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("participant")}g.addTable=a;g.getParticipantTable=b}),98);
__d("WAWebApiParticipantStore",["WALogger","WATimeUtils","WAWebApiContact","WAWebBackendApi","WAWebCurrentUser","WAWebGroupConstants","WAWebModelStorageUtils","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWamGroupMetricCache","WAWebWidFactory","asyncToGeneratorRuntime","gkx","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n=function(a){function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="GroupUnSyncedError",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.toString();b=(yield d("WAWebSchemaParticipant").getParticipantTable().get(b));return p(a,b)});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=[],f=[];if(!b)return{skDistribList:e,skList:f,rotateKey:!1};var g=b==null?void 0:b.participants,h=b.senderKey,i=b.rotateKey,j=0,n=new Set();h.forEach(function(a,b){if(b.includes("hosted"))return;n=n.add(b);var c=d("WAWebWidFactory").createWid(b),g=d("WAWebWidFactory").asUserWidOrThrow(c);g=(g=h.get(g.toString()))!=null?g:!1;a&&g?f.push(c):(e.push(c),c.isCompanion()&&a&&!g&&(d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["getGroupSenderKeyList: include "," because its primary doesn't have sender key"])),b),j++))});if(d("WAWebCurrentUser").isEmployee()){g=g.filter(function(a){return!n.has(a)});g.length>0&&d("WALogger").LOG(l||(l=babelHelpers.taggedTemplateLiteralLoose(["getGroupSenderKeyList: missing sender keys for "," participants: ",""])),g.length,g.join())}c("gkx")("26258")||j>0&&d("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["getGroupSenderKeyList: missed "," sender key(s) for primary devices"])),j).sendLogs("missing-sender-key-on-primary");yield s(a,h.size);d("WAWebWamGroupMetricCache").cacheGroupMetrics(b);return i?{skDistribList:[].concat(e,f),skList:[],rotateKey:i}:{skDistribList:e,skList:f,rotateKey:i}});return q.apply(this,arguments)}function e(a,c){var e=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(e));if(!b){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["markHasSenderKey: group participant info missing for group ",""])),e);return}yield a.createOrReplace(r(b,c,!0))});return function(b){return a.apply(this,arguments)}}())}function f(a,c){var e=a.toString();return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield a.get(e));if(!b){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["markForgetSenderKey: group participant info missing for group ",""])),e);return}yield a.createOrReplace(r(b,c,!1))});return function(b){return a.apply(this,arguments)}}())}function r(a,b,c){var e=new Map(a.senderKey),f=!1;b.forEach(function(a){if(d("WAWebUserPrefsMeUser").isMeDevice(a))return;var b=String(a);e.has(b)?e.set(b,c):a.isLid()||(f=!0)});return{groupId:a.groupId,senderKey:e,participants:a.participants,pastParticipants:a.pastParticipants,admins:a.admins,superAdmins:a.superAdmins,rotateKey:f,deviceSyncComplete:a.deviceSyncComplete}}function s(a,b){return d("WAWebBackendApi").frontendSendAndReceive("updateCachedDeviceCount",{groupWid:a,deviceCount:b})}function t(a,b,e){if(e!=="add")return b;var f=new Set(b.map(function(a){return a.id.toString()}));a.forEach(function(a){f.has(a)&&f["delete"](a);a=d("WAWebApiContact").getAlternateUserWid(d("WAWebWidFactory").createUserWidOrThrow(a));a=a==null?void 0:a.toString();!c("isStringNullOrEmpty")(a)&&f.has(a)&&f["delete"](a)});e=b.filter(function(a){return f.has(a.id.toString())});return e}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.map(function(a){return a.id.toString()}),e=(yield d("WAWebSchemaParticipant").getParticipantTable().bulkGet(c));c=a.map(function(a,c){c=e[c];if(!c)return a;var f=c.pastParticipants.map(function(a){var b=a.jid,c=a.leaveTs;a=a.leaveReason;return{id:d("WAWebWidFactory").createWid(b),leaveTs:c,leaveReason:a}});c=t(c.participants,f,b);return babelHelpers["extends"]({},a,{pastParticipants:c})});return c});return v.apply(this,arguments)}function w(){return d("WAWebModelStorageUtils").getStorage().lock(["participant"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a[0];var b=(yield d("WAWebSchemaParticipant").getParticipantTable().all()),c=[],e=d("WATimeUtils").DAY_SECONDS*d("WAWebGroupConstants").PAST_PARTICIPANT_EXPIRATION_DAYS;b.forEach(function(a){var b=a.pastParticipants.filter(function(a){a=d("WATimeUtils").castToUnixTime(a.leaveTs);a=d("WATimeUtils").happenedWithin(a,e);return a});if(b.length!==a.pastParticipants.length){a=babelHelpers["extends"]({},a,{pastParticipants:b});c.push(a)}});c.length>0&&d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["pruneExpiredPastParticipants: Pruning expired past participants from participant DB"])));return a.bulkCreateOrReplace(c)});return function(b){return a.apply(this,arguments)}}())}var x=new Map();function y(a,b){x.set(a,b)}function z(a){a!=null?x["delete"](a):x.clear()}function A(a){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=x.get(a);if(b==null){var c=(yield d("WAWebSchemaParticipant").getParticipantTable().get(a)),e=d("WAWebUserPrefsMeUser").getMePnUserOrThrow().toString(),f=d("WAWebUserPrefsMeUser").getMeLidUserOrThrow().toString();e=!!c&&((c==null?void 0:c.admins.includes(e))||(c==null?void 0:c.admins.includes(f)));x.set(a,e);return e}return b});return B.apply(this,arguments)}g.GroupUnSyncedError=n;g.getGroupSenderKeyList=a;g.getGroupSenderKeyListFromParticipantRecord=p;g.markHasSenderKey=e;g.markForgetSenderKey=f;g.injectPastParticipantsFromDB=u;g.pruneExpiredPastParticipants=w;g.setAdminshipCache=y;g.clearAdminshipCache=z;g.isCurrentUserGroupAdmin=A}),98);
__d("WAWebSchemaSubgroupSuggestionV2",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("subgroup-suggestion-v2").version(d("WAWebModelStorageVersions").subgroupSuggestionV2CreateTable(),[e(["parentGroupId","id","owner"]),b("parentGroupId"),c("subject"),c("desc"),c("t"),c("isExistingGroup"),c("participantCount"),c("hiddenSubgroup")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("subgroup-suggestion-v2")}g.addTable=a;g.getSubgroupSuggestionTable=b}),98);
__d("WAWebApiSubgroupSuggestionStore",["Promise","WABatcher","WALogger","WAWebSchemaSubgroupSuggestionV2","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;c=3e3;e=function(a){return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().equals(["parentGroupId"],a.toString()).then(function(a){return a.map(function(a){var b=a.id,c=a.parentGroupId,e=a.subject,f=a.desc,g=a.owner,h=a.t,i=a.isExistingGroup,j=a.participantCount;a=a.hiddenSubgroup;return{id:d("WAWebWidFactory").createWid(b),parentGroupId:d("WAWebWidFactory").createWid(c),subject:e,desc:f,owner:d("WAWebWidFactory").createWid(g),t:h,isExistingGroup:i,participantCount:j,hiddenSubgroup:a}})})};var j=function(a,b){b=b.map(function(b){var c=b.id,d=b.subject,e=b.desc,f=b.owner,g=b.t,h=b.isExistingGroup,i=b.participantCount;b=b.hiddenSubgroup;return{id:c.toString(),parentGroupId:a.toString(),subject:d,desc:e,owner:f.toString(),t:g,isExistingGroup:h,participantCount:i,hiddenSubgroup:b}});return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().bulkCreateOrReplace(b)};f=function(a,c,e,f){var g=function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield (i||(i=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().get([a.toString(),b.toString(),e.toString()]));return b});return function(a){return c.apply(this,arguments)}}())));g=g.filter(Boolean);var h=g.map(function(a){return babelHelpers["extends"]({},a,{owner:f,parentGroupId:d("WAWebWidFactory").createWid(a.parentGroupId),id:d("WAWebWidFactory").createWid(a.id)})});yield k(g.map(function(b){b=b.id;return{parentGroupId:a,id:d("WAWebWidFactory").createWid(b),owner:e}}));yield j(a,h)});return function(){return g.apply(this,arguments)}}();return g()};var k=function(a){return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().bulkRemove(a.map(function(a){var b=a.parentGroupId,c=a.id;a=a.owner;return[b.toString(),c.toString(),a.toString()]}))},l=function(a){return d("WAWebSchemaSubgroupSuggestionV2").getSubgroupSuggestionTable().bulkRemoveByIndex(["parentGroupId"],[a.toString()])},m=d("WABatcher").batch({delayMs:c},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["removeSubgroupSuggestionsBatched: aggregating "," changes"])),a.length).devConsole(a);a=a.reduce(function(a,b){a.push.apply(a,b.suggestionsRowKeys);return a},[]);yield k(a);return[]});return function(b){return a.apply(this,arguments)}}());function a(a){var b=a.subgroupSuggestions;a=a.isOffline;return a===!0?m({suggestionsRowKeys:b}):k(b)}g.getSubgroupSuggestions=e;g.addSubgroupSuggestions=j;g.updateOwnerInSubgroupSuggestions=f;g.removeSubgroupSuggestions=k;g.removeAllSubgroupSuggestions=l;g.removeSubgroupSuggestionsWithOfflineOption=a}),98);
__d("WAWebSchemaUnjoinedSubgroupMetadata",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("unjoined-subgroup-metadata").version(d("WAWebModelStorageVersions").unjoinedSubgroupMetadataCreateTable(),[e("id"),c("subject"),c("subjectTime"),c("defaultSubgroup"),c("generalSubgroup"),c("parentGroup"),c("membershipApprovalMode"),c("membershipApprovalRequest"),c("hiddenSubgroup"),c("size")]).version(d("WAWebModelStorageVersions").unjoinedSubgroupParentGroupIndex(),[b("parentGroup")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("unjoined-subgroup-metadata")}g.addTable=a;g.getUnjoinedSubgroupMetadataTable=b}),98);
__d("WAWebApiUnjoinedSubgroupMetadataStore",["WAWebSchemaUnjoinedSubgroupMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=["defaultSubgroup","generalSubgroup","parentGroupId"];function a(a){d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().remove(a.toString())}function i(a){var b={},c=a.defaultSubgroup,d=a.generalSubgroup,e=a.parentGroupId,f=babelHelpers.objectWithoutPropertiesLoose(a,h);c!=null&&(b.defaultSubgroup=c);d!=null&&(b.generalSubgroup=d);e!=null&&(b.parentGroup=e.toString());return babelHelpers["extends"]({},f,b,{id:a.id.toString(),hiddenSubgroup:(c=a.hiddenSubgroup)!=null?c:!1,membershipApprovalMode:(d=a.membershipApprovalMode)!=null?d:!1,membershipApprovalRequest:(e=a.membershipApprovalRequest)!=null?e:!1})}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.unjoinedSubgroups,c=a.parentGroupId;a=a.link;if(!a){yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkRemove(b.map(function(a){return a.id.toString()}));return}a=[];var e=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkGet(b.map(function(a){return a.id.toString()})));a=b.map(function(a,b){b=e[b];var d={subject:a.subject,subjectTime:a.subjectTime||0};if(b){var f=b.subjectTime||0;f>d.subjectTime&&(d={subject:b.subject,subjectTime:f})}return i(babelHelpers["extends"]({},a,d,{parentGroupId:c}))});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge(a)});return j.apply(this,arguments)}function e(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.unjoinedSubgroupIds;a=a.parentGroupId;a=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().equals(["parentGroup"],a.toString()));a=a.map(function(a){return a.id});var c=b.map(function(a){return a.toString()});b=a.filter(function(a){return!c.includes(a)});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkRemoveByIndex(["id"],b)});return k.apply(this,arguments)}function f(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().get(a.toString()));if(a!=null){a=babelHelpers["extends"]({},a,{membershipApprovalRequest:b});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge([a])}});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkGet(a.map(function(a){return a.id.toString()}))),c=[];a.forEach(function(a,d){d=b[d];d&&c.push(babelHelpers["extends"]({},d,{size:a.participantCount}))});yield d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge(c)});return n.apply(this,arguments)}g.removeUnjoinedSubgroupMetadataFromStorage=a;g.updateUnjoinedSubgroups=c;g.cleanUnjoinedSubgroups=e;g.updateMembershipApprovalRequestinDB=f;g.updateSizeInDB=m}),98);
__d("WAWebBizCartConstants",[],(function(a,b,c,d,e,f){a=99;f.CART_ITEM_MAX_QUANTITY=a}),66);
__d("WAWebBizCatalogManagementParseProductGraphql_product.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebBizCatalogManagementParseProductGraphql_product"};e.exports=a}),null);
__d("WAWebProductTypes.flow",["$InternalEnum"],(function(a,b,c,d,e,f){var g=b("$InternalEnum")({IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",AVAILABLE_FOR_ANOTHER_POSTCODE:"available for another postcode",UNKNOWN:"unknown"}),h=[g.OUT_OF_STOCK,g.AVAILABLE_FOR_ANOTHER_POSTCODE],i=6;b=b("$InternalEnum")({Default:"DEFAULT",CountryOriginExempt:"COUNTRY_ORIGIN_EXEMPT"});function a(a){if(a==="APPROVED"||a==="PENDING"||a==="REJECTED")return a}function c(a){if(a==null)return;switch(a){case"TRUE":return"ISHIDDEN_TRUE";case"FALSE":return"ISHIDDEN_FALSE";default:a;return a}}function d(a){if(a==null)return;switch(a){case"COUNTRY_ORIGIN_EXEMPT":return"COMPLIANCECATEGORY_COUNTRYORIGINEXEMPT";case"DEFAULT":return"COMPLIANCECATEGORY_DEFAULT";default:a;return a}}function e(a){if(a==null)return;switch(a){case"STATUS_APPROVED":return"APPROVED";case"STATUS_PENDING":return"PENDING";case"STATUS_REJECTED":return"REJECTED";default:a}}f.ProductAvailability=g;f.PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES=h;f.PRODUCT_PAGE_SIZE=i;f.ProductComplianceCategory=b;f.asProductReviewType=a;f.mapIsHiddenToWASchema=c;f.mapComplianceCategoryToWASchema=d;f.mapCollectionReviewStatusToWASchema=e}),66);
__d("WAWebSignedShimmedUrl",[],(function(a,b,c,d,e,f){function a(a){return a}f.asSignedShimmedUrl=a}),66);
__d("WAWebSyntheticCountryCode",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NotApplicable:"NOT_APPLICABLE"});f.SyntheticCountryCode=a}),66);
__d("WAWebBizCatalogParseProduct",["WAWap","WAWebBizCartConstants","WAWebProductTypes.flow","WAWebSignedShimmedUrl","WAWebSyntheticCountryCode"],(function(a,b,c,d,e,f,g){b=function(a){var b,c,e,f=a.child("id").contentString(),g=a.maybeChild("url"),h="";g&&g.hasContent()&&(h=g.contentString());g=a.child("name").contentString();b=(b=a.maybeAttrString("availability"))!=null?b:d("WAWebProductTypes.flow").ProductAvailability.UNKNOWN;var j=d("WAWebBizCartConstants").CART_ITEM_MAX_QUANTITY,l=a.maybeAttrString("max_available");l!=null&&(j=Number(l));l=a.maybeChild("max_available");l=l==null?void 0:l.contentString();l!=null&&(j=Number(l));l=a.maybeChild("description");l=l?l.contentString():"";var m=a.maybeChild("belongs_to");m=(m==null?void 0:m.contentString())==="true"||!1;var n=[],o=[],p=[],q=a.child("media"),r=!0;q.forEachChildWithTag("image",function(a){if(r)r=!1,n.push({key:"requested",value:a.child("request_image_url").contentString()}),n.push({key:"full",value:a.child("original_image_url").contentString()}),p.push(a.child("id").contentString());else{var b=[];b.push({key:"requested",value:a.child("request_image_url").contentString()});b.push({key:"full",value:a.child("original_image_url").contentString()});o.push(b);p.push(a.child("id").contentString())}});var s=[];q.forEachChildWithTag("video",function(a){var b=a.maybeChild("id"),c=a.child("original_video_url").contentString();a=a.maybeChild("thumbnail_url");b=(b==null?void 0:b.contentString())||"";a=(a==null?void 0:a.contentString())||"";s.push({id:b,original_video_url:c,thumbnail_url:a})});q=a.maybeChild("status_info");var t=(q==null?void 0:q.child("status").contentString())||"APPROVED";q=q==null||(c=q.maybeChild("can_appeal"))==null?void 0:c.contentString();t=[{key:"WHATSAPP",value:t}];var u=a.maybeChild("currency");u=u?u.contentString():void 0;var v=a.maybeChild("price");v=v==null?void 0:v.contentString();var w=a.maybeChild("retailer_id");w=w?w.contentString():"";var x=a.hasAttr("is_hidden")?a.attrString("is_hidden")==="true":!1,y=a.hasAttr("compliance_category")?d("WAWebProductTypes.flow").ProductComplianceCategory.cast(a.attrString("compliance_category")):d("WAWebProductTypes.flow").ProductComplianceCategory.Default,z=a.maybeChild("sale_price");e=z?babelHelpers["extends"]({sale_price:(e=z.maybeChild("price"))==null?void 0:e.contentString()},z.hasChild("start_date")&&z.hasChild("end_date")?{sale_start_date:z.child("start_date").contentString(),sale_end_date:z.child("end_date").contentString()}:null):null;z=a.maybeAttrString("is_sanctioned")==="true";f=babelHelpers["extends"]({id:f,is_hidden:x,is_sanctioned:z,url:h,name:g,description:l,availability:b,max_available:j,additional_image_cdn_urls:o,image_cdn_urls:n,capability_to_review_status:t,whatsapp_product_can_appeal:q==="true",image_hashes_for_whatsapp:p,currency:u,price:v,retailer_id:w,checkmark:m,videos:s,variant_info:null},e);x=a.maybeChild("compliance_info");y===d("WAWebProductTypes.flow").ProductComplianceCategory.CountryOriginExempt?f.compliance_info=k():x&&(f.compliance_info=i(x));z=a.maybeChild("shimmed_url");if(z!=null){h=z.contentString();h!==""&&(f.signedShimmedUrl=d("WAWebSignedShimmedUrl").asSignedShimmedUrl(h))}return f};function a(a){var b,c,e,f=a.id?d("WAWap").wap("id",null,a.id.toString()):void 0,g=a.description?d("WAWap").wap("description",null,a.description):void 0,i=a.url?d("WAWap").wap("url",null,a.url):void 0,j=a.retailerId?d("WAWap").wap("retailer_id",null,a.retailerId):void 0,k=a.priceAmount1000!=null?d("WAWap").wap("currency",null,a.currency):void 0,l=a.priceAmount1000!=null?d("WAWap").wap("price",null,a.priceAmount1000.toString()):void 0,m=a.salePriceAmount1000!=null?d("WAWap").wap("sale_price",null,a.salePriceAmount1000.toString()):void 0;b=[d("WAWap").wap("image",null,d("WAWap").wap("url",null,a.imageCdnUrl))].concat((b=a.additionalImageCdnUrl)==null?void 0:b.map(function(a){return d("WAWap").wap("image",null,d("WAWap").wap("url",null,a))}));c=(c=a.videos)==null?void 0:c.map(function(a){return d("WAWap").wap("video",null,d("WAWap").wap("url",null,a.original_video_url))});var n=h(a.complianceInfo),o;(((e=a.complianceInfo)==null?void 0:e.countryCodeOrigin)===String(d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable)||a.importerInformationExempt)&&(o=d("WAWebProductTypes.flow").ProductComplianceCategory.CountryOriginExempt);e=babelHelpers["extends"]({is_hidden:a.isHidden?"true":"false"},o?{compliance_category:o}:void 0);return d("WAWap").wap("product",e,f,d("WAWap").wap("name",null,a.name),g,i,j,d("WAWap").wap("media",null,b.concat(c)),l,m,k,n)}function h(a){var b,c,e,f,g,h,i=j(a),k=i.isExempt,l=i.hasCountryCodeOrigin,m=i.hasImporterName;i=i.hasImporterAddress;return!k&&(l||m||i)?d("WAWap").wap("compliance_info",null,l?d("WAWap").wap("country_code_origin",null,a==null?void 0:a.countryCodeOrigin):void 0,m?d("WAWap").wap("importer_name",null,a==null?void 0:a.importerName):void 0,i?d("WAWap").wap("importer_address",null,a!=null&&(b=a.importerAddress)!=null&&b.street1?d("WAWap").wap("street1",null,a.importerAddress.street1):void 0,a!=null&&(c=a.importerAddress)!=null&&c.street2?d("WAWap").wap("street2",null,a.importerAddress.street2):void 0,a!=null&&(e=a.importerAddress)!=null&&e.city?d("WAWap").wap("city",null,a.importerAddress.city):void 0,a!=null&&(f=a.importerAddress)!=null&&f.region?d("WAWap").wap("region",null,a.importerAddress.region):void 0,a!=null&&(g=a.importerAddress)!=null&&g.postalCode?d("WAWap").wap("postal_code",null,a.importerAddress.postalCode):void 0,a!=null&&(h=a.importerAddress)!=null&&h.countryCode?d("WAWap").wap("country_code",null,a.importerAddress.countryCode):void 0):void 0):void 0}function i(a){var b,c=a.child("country_code_origin").contentString();b=(b=a.maybeChild("importer_name"))==null?void 0:b.contentString();a=a.maybeChild("importer_address");c={country_code_origin:c,importer_name:b};if(a){c.importer_address={street1:a.child("street1").contentString(),street2:(b=a.maybeChild("street2"))==null?void 0:b.contentString(),postal_code:(b=a.maybeChild("postal_code"))==null?void 0:b.contentString(),city:a.child("city").contentString(),region:(b=a.maybeChild("region"))==null?void 0:b.contentString(),country_code:a.child("country_code").contentString()}}return c}function j(a){var b=(a==null?void 0:a.countryCodeOrigin)===String(d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable),c=!b&&(a==null?void 0:a.countryCodeOrigin)!==void 0,e=!b&&(a==null?void 0:a.importerName)!==void 0;a=!b&&(a==null?void 0:a.importerAddress)!==void 0&&[a.importerAddress.street1,a.importerAddress.street2,a.importerAddress.city,a.importerAddress.region,a.importerAddress.postalCode,a.importerAddress.countryCode].some(function(a){return a});return{isExempt:b,hasImporterAddress:a,hasImporterName:e,hasCountryCodeOrigin:c}}function k(){return{country_code_origin:String(d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable)}}g.parseProductNode=b;g.productModelToNode=a;g.scanComplianceInfoForMissingData=j}),98);
__d("WAWebParseMsgKeyString",["WALogger","WATypeUtils","err"],(function(a,b,c,d,e,f,g){var h;function a(a){if(!a||!d("WATypeUtils").isString(a))throw c("err")("MsgKey fromString error: str is null or not a string");var b=a.split("_"),e=void 0;b.length<3?d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["MsgKey error: cannot create MsgKey from ",""])),a):b.length===4?b[3]!=="out"&&b[3]!=="in"&&(e=b[3]):b.length===5&&(e=b[4]);return{fromMe:b[0]==="true",remote:b[1],id:b[2],participant:e}}g["default"]=a}),98);
__d("WAWebSchemaSelfAddonMessageTypeTable",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addAutoIncrementingPrimaryKey;b=b.addIndex;a.add("self-addon-message-type").version(d("WAWebModelStorageVersions").selfMessageTypeCreateTable(),[e("rowId"),c("msgId"),c("msgType"),b("msgId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("self-addon-message-type")}g.addTable=a;g.getSelfAddonMessageTypeTable=b}),98);
__d("WAWebCommentSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addEncryptedColumn;b=b.addIndex;a.add("comments").version(d("WAWebModelStorageVersions").commentCreateTable(),[e("msgKey"),c("parentMsgKey"),b("parentMsgKey"),c("t"),c("ack"),c("sender"),c("read"),f("msgRowOpaqueData",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("isOverwrittenByRevoke"),c("revokeTimestamp"),c("protocolMessageKey"),c("subtype"),c("isPlaceholder")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("comments")}g.addTable=a;g.getTable=b}),98);
__d("WAWebEventResponsesSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey,f=b.addEncryptedColumn;b=b.addIndex;a.add("event-responses").version(d("WAWebModelStorageVersions").eventsResponsesCreateTable(),[e(["parentMsgKey","sender"]),c("msgKey"),b("parentMsgKey"),c("t"),c("ack"),c("read"),c("senderTimestampMs"),f("eventResponse",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER)]).version(d("WAWebModelStorageVersions").eventResponsesAddMsgKeyIndex(),[b("msgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("event-responses")}g.addTable=a;g.getTable=b}),98);
__d("WAWebPinInChatSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("pinned-messages").version(d("WAWebModelStorageVersions").pinInChatCreateTable(),[e("parentMsgKey"),c("chatId"),c("msgKey"),c("senderTimestampMs"),c("ack"),c("t"),c("pinType"),c("pinExpiryDuration"),c("sender"),b("msgKey"),b("chatId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("pinned-messages")}g.addTable=a;g.getTable=b}),98);
__d("WAWebPollsVotesSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey,f=b.addEncryptedColumn;b=b.addIndex;a.add("poll-votes").version(d("WAWebModelStorageVersions").pollVotesCreateTable(),[e(["parentMsgKey","sender"]),c("msgKey"),b("parentMsgKey"),f("selectedOptionLocalIds",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("senderTimestampMs"),c("ack"),c("t"),c("read")]).version(d("WAWebModelStorageVersions").pollVotesAddMsgKeyIndex(),[b("msgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("poll-votes")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaReactions",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b("$InternalEnum").Mirrored(["ParentMsgPlaceholder","ParentMsgMissing","ParentMsgFutureproof"]);function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey,f=b.addCompositeIndex;b=b.addIndex;a.add("reactions").version(d("WAWebModelStorageVersions").reactionsCreateTable(),[e(["parentMsgKey","senderUserJid"]),c("msgKey"),c("reactionText"),c("timestamp"),c("orphan"),c("orphanReason"),c("read"),c("ack"),b("parentMsgKey"),b("orphan"),c("t")]).version(d("WAWebModelStorageVersions").addReactionTableOrphanIndex(),[f(["parentMsgKey","orphan"])]).version(d("WAWebModelStorageVersions").addReactionTableMsgKeyIndex(),[b("msgKey")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("reactions")}g.addTable=a;g.getReactionsTable=c}),98);
__d("WAWebSchemaUnifiedAddons",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("addons-unified").version(d("WAWebModelStorageVersions").createUnifiedAddonsTable(),[e("msgKey"),c("targetMsgKey"),b("targetMsgKey"),c("arbitraryIndex"),b("arbitraryIndex"),c("rowType"),b("rowType"),c("ack"),c("t"),c("read"),c("addonProps")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("addons-unified")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaMessage",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("message",function(a,b){var c=b.addColumn,e=b.addEncryptedColumn,f=b.addUserDefinedPrimaryKey,g=b.addIndex,h=b.addUniqueIndex,i=b.addCompositeIndex,j=b.addArrayIndex;b=b.removeColumn;return a.version((a=d("WAWebModelStorageVersions")).messageCreateTable(),[f("id"),c("internalId"),h("internalId"),c("rowId"),h("rowId"),c("type"),c("subtype"),c("t"),c("notifyName"),c("from"),c("to"),c("author"),c("local"),c("ack"),c("invis"),c("isStarred"),g("isStarred"),c("mentionedJidList"),c("groupMentions"),c("count"),c("devicesAdded"),c("devicesRemoved"),c("isThisDeviceAdded"),c("recipients"),c("protocolMessageKey"),c("protocolMessageRowId"),c("templateParams"),i(["internalId","isStarred"]),c("vcardWAids"),j("vcardWAids"),c("hasLink"),c("isMediaMsg"),c("isDocMsg"),c("isEventMsg"),i(["internalId","isMediaMsg"]),i(["internalId","isDocMsg"]),i(["internalId","hasLink"]),c("ephemeralStartTimestamp"),c("ephemeralDuration"),c("ephemeralSettingTimestamp"),c("ephemeralOutOfSync"),c("ephemeralSettingUser"),c("expiredTimestamp"),g("expiredTimestamp"),c("directPath"),c("mimetype"),c("duration"),c("filehash"),c("uploadhash"),c("size"),c("filename"),c("streamingSidecar"),c("mediaKey"),c("mediaKeyTimestamp"),c("pageCount"),c("isGif"),c("gifAttribution"),c("accessibilityLabel"),c("isViewOnce"),c("width"),c("height"),c("scanLengths"),c("scansSidecar"),c("interactiveAnnotations"),c("firstFrameLength"),c("firstFrameSidecar"),c("isAnimated"),c("isLottie"),c("thumbnail"),c("richPreviewType"),c("doNotPlayInline"),c("paymentLinkMetadata"),c("broadcast"),c("broadcastParticipants"),c("bclParticipants"),c("broadcastId"),c("quotedMsg"),c("quotedStanzaID"),c("quotedRemoteJid"),c("quotedParticipant"),c("footer"),c("hydratedButtons"),c("selectedId"),c("selectedIndex"),c("selectedCarouselCardIndex"),c("vcardFormattedName"),c("isVcardOverMmsDocument"),c("isCaptionByUser"),c("hsmTag"),c("hsmCategory"),c("templateId"),c("businessOwnerJid"),c("productId"),c("currencyCode"),c("priceAmount1000"),c("retailerId"),c("url"),c("productImageCount"),c("paymentCurrency"),c("paymentMessageReceiverJid"),c("paymentTransactionTimestamp"),c("paymentStatus"),c("paymentNoteMsg"),c("paymentRequestMessageKey"),c("paymentExpiryTimestamp"),c("message"),c("orderTitle"),c("itemCount"),c("orderId"),c("surface"),c("status"),c("token"),c("textColor"),c("backgroundColor"),c("font"),c("isForwarded"),c("forwardingScore"),c("ctwaContext"),c("messageRangeIndex"),g("messageRangeIndex"),c("vcardList"),c("totalAmount1000"),c("totalCurrencyCode"),c("list"),c("listResponse"),c("isDynamicReplyButtonsMsg"),c("dynamicReplyButtons"),c("selectedButtonId"),c("sellerJid"),c("deprecatedMms3Url"),c("encFilehash"),e("msgRowOpaqueData",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("thumbnailDirectPath"),c("thumbnailSha256"),c("thumbnailEncSha256"),c("thumbnailHeight"),c("thumbnailWidth"),c("revokeSender"),c("isQuestion"),c("questionReplyQuotedMessage"),c("pendingReadReceipt"),i(["from","pendingReadReceipt"]),c("inviteGrpType"),c("quotedGroupSubject"),c("quotedParentGroupJid"),c("quotedType"),c("reactionParentKey"),c("reactionTimestamp"),c("reactionText"),c("lastPlaybackProgress"),c("hasReaction"),c("kicKey"),c("kicState"),c("kicTimestampMs"),c("kicNotified"),c("keptMessageKey"),c("keepType"),c("keptCount"),c("agentId"),c("revokeTimestamp"),c("futureproofParams"),c("futureproofReparsed"),c("futureproofType"),c("futureproofSubtype"),c("botFeedbackKind"),c("botFeedbackText"),c("latestEditMsgKey"),c("latestEditSenderTimestampMs"),c("editMsgType"),c("bizSource"),c("invokedBotWid"),c("botEditType"),c("botTargetSenderJid"),c("bizBotType"),c("botPersonaId"),c("viewCount"),c("questionResponsesCount"),c("readQuestionResponsesCount"),c("forwardedNewsletterMessageInfo"),c("viewed"),c("disappearingModeTrigger"),c("disappearingModeInitiatedByMe"),c("botResponseTargetId"),c("botPluginType"),c("botPluginReferenceIndex"),c("botPluginSearchProvider"),c("botPluginSearchUrl"),c("botReelPluginThumbnailCdnUrl"),c("botPluginMaybeParent"),c("carouselCardsParsed"),c("botMsgBodyType"),c("botPluginSearchQuery"),c("botMessageDisclaimerText"),c("newsletterAdminInviteInfo"),c("newsletterFollowerInviteInfo"),c("bizContentPlaceholderType"),c("hostedBizEncStateMismatch"),c("placeholderCreatedWhenAccountIsHosted"),c("senderOrRecipientAccountTypeHosted"),c("eventInvalidated"),c("replyCount"),c("associationType"),c("parentMsgKey"),c("statusMentioned"),c("viewMode"),c("stickers"),c("stickerPackId"),c("stickerPackPublisher"),c("trayIconFileName"),c("stickerPackSize"),c("isSupportAIMessage"),c("shouldShowSupportAISystemMessage"),c("supportCitations"),c("isWamoSub"),c("callSilenceReason"),c("callOutcome"),c("isVideoCall"),c("callDuration"),c("callParticipants"),c("isCallLink"),c("callLinkToken"),c("finalCallOutcome"),c("richResponse"),c("limitSharing"),c("galaxyFlowWAMMessageId"),c("galaxyFlowQPLMessageId"),c("galaxyFlowDisabled"),c("isGroupStatus"),c("faviconMMSMetadata"),c("showMmDisclosure"),c("urlTrackingMapElements"),c("groupHistoryBundleMessageKey"),c("groupHistoryBundleMetadata"),c("internalThreadIDs")]).version(a.messageAddIsSendFailureProperties(),[c("isSendFailure")]).version(a.messageAddPaymentTxnStatus(),[c("paymentTxnStatus")]).version(a.messageAddProductListPreviewInfo(),[c("productListItemCount")]).version(a.messageAddPrivacyModeFields(),[c("privacyModeWhenSent"),c("bizPrivacyStatus")]).version(a.messageAddProductListPreviewHeaderImage(),[c("productHeaderImageRejected")]).version(a.messageAddDisappearingModeInitiator(),[c("disappearingModeInitiator")]).version(a.messageAddGroupInviteV4(),[c("inviteGrp"),c("inviteGrpName"),c("comment"),c("inviteCode"),c("inviteCodeExp")]).version(a.addSupportForHSMButtons(),[c("isFromTemplate")]).version(a.messageAddPaymentRequestNFMFields(),[c("nativeFlowButtons"),c("paymentRequestHeader")]).version(a.addWaveformToAudioMessages(),[c("waveform")]).version(a.messageRemovePaymentRequestHeaderField(),[b("paymentRequestHeader")]).version(a.messageAddNativeFlowNameField(),[c("nativeFlowName")]).version(a.addStaticURLToImageVideoMessages(),[c("staticUrl")]).version(a.addRequiresDirectConnection(),[c("requiresDirectConnection")]).version(a.messageAddPaymentInviteServiceType(),[c("paymentInviteServiceType")]).version(a.addStatusPSACampaignFields(),[c("campaignId"),c("campaignDuration")]).version(a.messageAddPaymentBackground(),[c("paymentBackground")]).version(a.messageAddInteractiveMessageFields(),[c("interactiveHeader"),c("interactiveType"),c("interactivePayload")]).version(a.messageAddActionLink(),[c("actionLink")]).version(a.messageAddHeaderType(),[c("headerType")]).version(a.messageStatusPSAReadTimestamp(),[c("statusPSAReadTimestamp")]).version(a.messageAddPollInvalidated(),[c("pollInvalidated")]).version(a.messageAddRcat(),[c("rcat")]).version(a.errorCodeColumn(),[c("errorCode")]).version(a.lastUpdateTimestampColumn(),[c("lastUpdateFromServerTs")]).version(a.paidMessagingCampaignIdColumn(),[c("pmCampaignId")]).version(a.messageAddEditIndex(),[g("latestEditMsgKey")]).version(a.messageAddIsCarouselIndex(),[c("isCarouselMsg"),i(["internalId","isCarouselMsg"])]).version(a.messageAddIsEventMsgIndex(),[i(["internalId","isEventMsg"])]).version(a.messageAddVoipCallLogIndex(),[c("isCallLogMsg"),g("isCallLogMsg"),i(["internalId","isCallLogMsg"])]).version(a.messageAddVoipCallOutcomeIndex(),[g("callOutcome"),c("callCreator")]).version(a.messageAddMediaRelatedIndex(),[c("typeFlag"),i(["typeFlag","t","internalId"])]).view(function(a){return a}).enablePropFilter(!0).useDbMsgEncKeyForEncryptedCol(!0).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message")}g.addTable=a;g.getMessageTable=b}),98);
__d("WAWebChatThreadLoggingBoolFlagFields",[],(function(a,b,c,d,e,f){b={isCartAddClicked:!1,isCtaOnPdpClicked:!1,isCommerceViewed:!1,viaContactlessChats:!1};var g=Object.freeze(b);c=Object.freeze(Object.keys(b));function a(a){if(!Object.prototype.hasOwnProperty.call(g,a))return null;a=a;return a}f.FLAG_FIELDS=g;f.FLAG_FIELD_NAMES=c;f.toMaybeBoolFlagActionType=a}),66);
__d("WAWebChatThreadLoggingCountFields",[],(function(a,b,c,d,e,f){b={profileViews:0,statusViews:0,statusReplies:0,groupMembershipReplies:0,groupPrivateReplies:0,profileReplies:0,chatOverflowClicks:0,pdpViews:0,ordersSent:0,repliesSent:0,commentsReceived:0};var g=Object.freeze(b);c=Object.freeze(Object.keys(b));function a(a){if(!Object.prototype.hasOwnProperty.call(g,a))return null;a=a;return a}f.COUNT_FIELDS=g;f.COUNT_FIELD_NAMES=c;f.toMaybeCountActionType=a}),66);
__d("WAWebSchemaChatThreadLoggingPendingEvents",["WAWebChatThreadLoggingBoolFlagFields","WAWebChatThreadLoggingCountFields","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="chat-thread-logging-pending-events";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add(h).version(d("WAWebModelStorageVersions").addChatThreadLoggingTable(),[e(["chatId","startTs"]),b("chatId"),b("startTs"),c("msgsSent"),c("msgsReceived"),c("msgsRead"),c("viewOnceMsgsSent"),c("viewOnceMsgsReceived"),c("viewOnceMessagesOpened"),c("callOffersSent"),c("callOffersReceived"),c("totalCallDuration"),c("commerceMsgsSent"),c("commerceMsgsReceived"),c("pdpInquiriesSent"),c("reactionsSent"),c("reactionsReceived"),c("forwardMessagesSent"),c("forwardMessagesReceived"),c("editedMsgsSent"),c("botMessagesSent"),c("botMessagesReceived"),c("botMessagesEdited"),c("eventCreationMessagesSent"),c("eventCreationMessagesReceived"),c("eventResponseMessagesSent"),c("eventResponseMessagesReceived"),c("eventGroupStatusReplyOthersToOwn"),c("eventGroupStatusReplyOthersToOthers"),c("eventGroupStatusReplyOwnToOthers"),c("eventGroupStatusReplyOwnToOwn"),c("eventGroupStatusLikeOthersToOwn"),c("eventGroupStatusLikeOthersToOthers")].concat([].concat(d("WAWebChatThreadLoggingCountFields").COUNT_FIELD_NAMES,d("WAWebChatThreadLoggingBoolFlagFields").FLAG_FIELD_NAMES).map(function(a){return c(a)}))).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table(h)}g.addTable=a;g.getChatThreadLoggingPendingEventsTable=b}),98);
__d("WAWebSchemaVerifiedBusinessName",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.removeColumn;a.add("verified-business-name").version(d("WAWebModelStorageVersions").verifiedBusinessNameCreateTable(),[e("id"),c("serial"),c("name"),c("isApi"),c("level"),c("actualActors"),c("hostStorage"),c("privacyModeTs")]).version(d("WAWebModelStorageVersions").verifiedBusinessNameAddPrivacyMode(),[c("privacyMode"),b("actualActors"),b("hostStorage"),b("privacyModeTs")]).version(d("WAWebModelStorageVersions").verifiedBusinessNameAddSmbColumn(),[c("isSmb")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("verified-business-name")}g.addTable=a;g.getVerifiedBusinessNameTable=b}),98);
__d("WAWebProtobufsMdStorageMsgRowOpaqueData.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({POLL:0,QUIZ:1});c=b("$InternalEnum")({UNKNOWN:0,TEXT:1,IMAGE:2});e={};f={};b={};var h={},i={},j={},k={};e.name="MsgRowOpaqueData";e.internalSpec={currentMsg:[1,(d=d("WAProtoConst")).TYPES.MESSAGE,b],quotedMsg:[2,d.TYPES.MESSAGE,b]};f.name="PollEncValue";f.internalSpec={encPayload:[1,d.TYPES.BYTES],encIv:[2,d.TYPES.BYTES]};b.name="MsgOpaqueData";b.internalSpec={body:[1,d.TYPES.STRING],caption:[3,d.TYPES.STRING],lng:[5,d.TYPES.DOUBLE],isLive:[6,d.TYPES.BOOL],lat:[7,d.TYPES.DOUBLE],paymentAmount1000:[8,d.TYPES.INT32],paymentNoteMsgBody:[9,d.TYPES.STRING],matchedText:[11,d.TYPES.STRING],title:[12,d.TYPES.STRING],description:[13,d.TYPES.STRING],futureproofBuffer:[14,d.TYPES.BYTES],clientUrl:[15,d.TYPES.STRING],loc:[16,d.TYPES.STRING],pollName:[17,d.TYPES.STRING],pollOptions:[18,d.FLAGS.REPEATED|d.TYPES.MESSAGE,k],pollSelectableOptionsCount:[20,d.TYPES.UINT32],messageSecret:[21,d.TYPES.BYTES],originalSelfAuthor:[51,d.TYPES.STRING],senderTimestampMs:[22,d.TYPES.INT64],pollUpdateParentKey:[23,d.TYPES.STRING],encPollVote:[24,d.TYPES.MESSAGE,f],isSentCagPollCreation:[28,d.TYPES.BOOL],pollContentType:[42,d.TYPES.ENUM,c],pollType:[46,d.TYPES.ENUM,a],pollVotesSnapshot:[41,d.TYPES.MESSAGE,i],encReactionTargetMessageKey:[25,d.TYPES.STRING],encReactionEncPayload:[26,d.TYPES.BYTES],encReactionEncIv:[27,d.TYPES.BYTES],botMessageSecret:[29,d.TYPES.BYTES],targetMessageKey:[30,d.TYPES.STRING],encPayload:[31,d.TYPES.BYTES],encIv:[32,d.TYPES.BYTES],eventName:[33,d.TYPES.STRING],isEventCanceled:[34,d.TYPES.BOOL],eventDescription:[35,d.TYPES.STRING],eventJoinLink:[36,d.TYPES.STRING],eventStartTime:[37,d.TYPES.INT64],eventLocation:[38,d.TYPES.MESSAGE,h],eventEndTime:[40,d.TYPES.INT64],eventIsScheduledCall:[44,d.TYPES.BOOL],eventExtraGuestsAllowed:[45,d.TYPES.BOOL],plainProtobufBytes:[43,d.TYPES.BYTES]};h.name="MsgOpaqueData$EventLocation";h.internalSpec={degreesLatitude:[1,d.TYPES.DOUBLE],degreesLongitude:[2,d.TYPES.DOUBLE],name:[3,d.TYPES.STRING],address:[4,d.TYPES.STRING],url:[5,d.TYPES.STRING],jpegThumbnail:[6,d.TYPES.BYTES]};i.name="MsgOpaqueData$PollVotesSnapshot";i.internalSpec={pollVotes:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,j]};j.name="MsgOpaqueData$PollVoteSnapshot";j.internalSpec={option:[1,d.TYPES.MESSAGE,k],optionVoteCount:[2,d.TYPES.INT32]};k.name="MsgOpaqueData$PollOption";k.internalSpec={name:[1,d.TYPES.STRING],hash:[2,d.TYPES.STRING]};g.MsgOpaqueData$PollType=a;g.MsgOpaqueData$PollContentType=c;g.MsgRowOpaqueDataSpec=e;g.PollEncValueSpec=f;g.MsgOpaqueDataSpec=b;g.MsgOpaqueData$EventLocationSpec=h;g.MsgOpaqueData$PollVotesSnapshotSpec=i;g.MsgOpaqueData$PollVoteSnapshotSpec=j;g.MsgOpaqueData$PollOptionSpec=k}),98);
__d("WAWebSchemaGroupMetadata",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum")({ADMIN_ADD:"admin_add",ALL_MEMBER_ADD:"all_member_add"});function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("group-metadata",function(a,b){var c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.removeColumn;return a.version((a=d("WAWebModelStorageVersions")).groupMetadataCreateTable(),[e("id"),c("subject"),c("subjectTime"),c("creation"),c("owner"),c("desc"),c("descId"),c("descTime"),c("descOwner"),c("restrict"),c("announce"),c("a_v_id"),c("noFrequentlyForwarded"),c("ephemeralDuration"),c("membershipApprovalMode"),c("size"),c("support"),c("suspended"),c("terminated"),c("notAddedByContact"),c("addedBy"),c("parentGroup"),c("subgroups"),c("isParentGroup"),c("isParentGroupClosed"),c("defaultSubgroup"),c("generalSubgroup"),c("growthLockExpiration"),c("growthLockType"),c("lastActivityTimestamp"),c("lastSeenActivityTimestamp"),c("isLidAddressingMode"),c("reportToAdminMode"),c("lastReportToAdminTimestamp"),c("allowNonAdminSubGroupCreation"),c("memberAddMode"),c("generalChatAutoAddDisabled"),c("unreadMentionMapDB"),c("pendingUnreadMentionCountDB"),c("disappearingModeTrigger"),c("disappearingModeInitiatedByMe"),c("hasCapi"),c("hiddenSubgroup"),c("groupSafetyCheck"),c("groupAdder"),c("lastCommunityPollTimestamp"),c("hasIncompleteParticipantInformation"),c("statusMute")]).version(a.migrateSubgroupsArray(),[b("subgroups"),c("unjoinedSubgroups")]).version(a.removeUnjoinedSubgroups(),[b("unjoinedSubgroups")]).version(a.removeSpamColumnsInGroupMetadata(),[b("notAddedByContact"),b("addedBy")]).version(a.addCommunityAdminPromotionColumns(),[c("displayCadminPromotion")]).version(a.renameCommunityAdminPromotionColumns(),[b("displayCadminPromotion"),c("acknowledgedCadminPromotion")]).version(a.removeCommunityAdminPromotionColumns(),[b("acknowledgedCadminPromotion")]).version(a.addIncognitoGroupMetadataColumn(),[c("incognito")]).version(a.groupMetadataAddParentIndex(),[f("parentGroup")]).version(a.addUnreadMentionMetadataColumn(),[c("unreadMentionMetadata")]).version(a.removeUnreadMentionMetadataColumn(),[b("unreadMentionMetadata")]).version(a.addEphemeralityIndexToGroupMetadataTable(),[f("ephemeralDuration")]).view(function(a){return a}).commit()})}function c(){return d("WAWebModelStorageUtils").getStorage().table("group-metadata")}g.MemberAddMode=e;g.addTable=a;g.getGroupMetadataTable=c}),98);
__d("WAWebWorkerSafeBackendApi",["WAWebBackendApi"],(function(a,b,c,d,e,f,g){function a(a,b){d("WAWebBackendApi").fireAndForgetInternalDoNotUse("workerSafeEvent",a,b)}function b(a,b){return d("WAWebBackendApi").sendAndReceiveInternalDoNotUse("workerSafeEvent",a,b)}g.workerSafeFireAndForget=a;g.workerSafeSendAndReceive=b}),98);
__d("strPretty",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a=a.valueOf().trim();var c=!0;for(var d=0;d<a.length;d++){var e=a.charAt(d),f=d<=a.length-2?a.charAt(d+1):null;if(/^[a-zA-Z]$/.test(e)){c?(b.push(e.toUpperCase()),c=!1):b.push(e.toLowerCase());if(f!=null&&!/^[_\s]$/.test(f)){var g=e.toUpperCase()===e,h=f.toUpperCase()===f&&/^[a-zA-Z]$/.test(f);!g&&h&&(c=!0,b.push(" "))}}else if(/^[0-9]$/.test(e))b.push(e);else if(/^[!.?]$/.test(e))b.push(e),c=!0;else{if(f!=null){g=f.toUpperCase()===f;(g||/^[_]$/.test(e))&&(c=!0)}b.push(" ")}}return b.join("")}f["default"]=a}),66);
__d("snakeCase",["strPretty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("strPretty")(a).replace(/\s/g,"_").toLowerCase()}g["default"]=a}),98);
__d("WAWebSchemaBusinessProfile",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("business-profile").version(d("WAWebModelStorageVersions").businessProfileCreateTable(),[b("id"),c("commandsDescription"),c("commands"),c("prompts"),c("automatedType"),c("welcomeMsgProtocolMode")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("business-profile")}g.addTable=a;g.getBusinessProfileTable=b}),98);
__d("WAWebInteractiveMessagesNativeFlowName",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({ORDER_DETAILS:"order_details",ORDER_STATUS:"order_status",PAYMENT_STATUS:"payment_status",PAYMENT_METHOD:"payment_method",MESSAGE_WITH_LINK:"message_with_link",MESSAGE_WITH_LINK_STATUS:"message_with_link_status",QUICK_REPLY:"quick_reply",CTA_CALL:"cta_call",CTA_URL:"cta_url",CTA_CATALOG:"cta_catalog",PAYMENT_INFO:"payment_info",CTA_COPY_CODE:"cta_copy",MIXED:"mixed",CTA_FLOW:"galaxy_message"});c=a;f["default"]=c}),66);
__d("WAWebSchemaMessageOrphans",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.removeIndex;a.add("message-orphans").version(d("WAWebModelStorageVersions").messageOrphansCreateTable(),[e("msgKey"),c("parentMsgKey"),f("parentMsgKey"),c("sender"),c("parsedMsgPayload"),c("senderTimestampMs"),f("senderTimestampMs")]).version(d("WAWebModelStorageVersions").messageOrphansAddColumns(),[c("t"),f("t"),c("type"),b("senderTimestampMs"),c("read"),c("reportingTokenInfo")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message-orphans")}g.addTable=a;g.getMessageOrphanTable=b}),98);
__d("WAWebSchemaChat",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){d("WAWebModelStorageUtils").getStorage().add_OPTIMIZED_EXPERIMENT("chat",function(a,b){var c=b.addColumn,e=b.addEncryptedColumn,f=b.addIndex,g=b.addUniqueIndex;b=b.addUserDefinedPrimaryKey;return a.version((a=d("WAWebModelStorageVersions")).chatCreateTable(),[b("id"),c("t"),c("unreadCount"),c("unreadDividerOffset"),c("archive"),c("isReadOnly"),c("isLocked"),c("isAnnounceGrpRestrict"),c("modifyTag"),c("muteExpiration"),c("isAutoMuted"),c("name"),c("notSpam"),c("pin"),c("changeNumberOldJid"),c("changeNumberNewJid"),c("ephemeralDuration"),c("ephemeralSettingTimestamp"),c("unreadMsgAnchorId"),c("endOfHistoryTransferType"),c("lastReactionPreview"),c("chatlistPreview"),c("unreadEditTimestampMs"),e("chatRowOpaqueData",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("ephemeralDisplayedExemptions"),c("disappearingModeTrigger"),c("disappearingModeInitiatedByMe"),c("hasOpened"),c("hasCreatedBotInvokeSystemMsg"),c("bizBotSystemMsgType"),c("lidOriginType"),c("hasRequestedWelcomeMsg"),c("wallpaper"),c("showDoodle"),c("capiThreadControl"),c("createdLocally"),c("limitSharing"),c("mmSignalSharingExpirationWindow"),c("toneId")]).version(a.chatAddDisappearingModeInitiator(),[c("disappearingModeInitiator")]).version(a.addUnreadMentionToChatTable(),[c("unreadMentionsOfMe")]).version(a.addUnreadMentionCountToChatTable(),[c("unreadMentionCount")]).version(a.addTcTokenToChatTable(),[e("tcToken",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER)]).version(a.addTcTokenTimestampToChatTable(),[c("tcTokenTimestamp"),f("tcTokenTimestamp")]).version(a.addArchiveAtMentionViewedInDrawer(),[c("archiveAtMentionViewedInDrawer")]).version(a.addTcTokenSenderTimestampToChatTable(),[c("tcTokenSenderTimestamp")]).version(a.addEphemeralityIndexToChatTable(),[f("ephemeralDuration")]).version(a.chatAddAccountLidIndex(),[c("accountLid"),g("accountLid")]).view(function(a){return a}).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("chat")}g.addTable=a;g.getChatTable=b}),98);
__d("WAWebSchemaMessageAssociation",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("message-association").version(d("WAWebModelStorageVersions").messageAssociationCreateTable(),[e(["msgKey","associationType"]),c("parentMsgKey"),c("msgKeyInternalId"),b("parentMsgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message-association")}g.addTable=a;g.getMessageAssociationTable=b}),98);
__d("WAWebPremiumMessageSchema",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addUserDefinedPrimaryKey;function a(){d("WAWebModelStorageUtils").getStorage().add("premium-message").version(d("WAWebModelStorageVersions").premiumMessageCreateTable(),[i("id"),h("name"),h("type"),h("message"),h("isDeleted"),h("mediaId"),h("sentMessageIds")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("premium-message")}g.addTable=a;g.getPremiumMessageTable=b}),98);
__d("WAWebSchemaACSTokens",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addIndex;b=b.addUserDefinedPrimaryKey;a.add("acs-tokens").version(d("WAWebModelStorageVersions").acsTokenCreateTable(),[b("tokenName"),c("project"),e("project"),c("creationTs"),c("redeemCount"),c("token")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("acs-tokens")}g.addTable=a;g.getACSTokensTable=b}),98);
__d("WAWebSchemaAbPropConfig",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("abpropConfigs").version(d("WAWebModelStorageVersions").abpropsConfigCreateTable(),[b("configCode"),c("configValue"),c("configExpoKey"),c("overriddenConfigValue")]).version(d("WAWebModelStorageVersions").addHasAccessedToAbpropsConfigTable(),[c("hasAccessed")]).view(function(a){return{configCode:a.configCode,configValue:a.configValue,configExpoKey:a.configExpoKey,hasAccessed:a.hasAccessed,overriddenConfigValue:a.overriddenConfigValue}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("abpropConfigs")}g.addTable=a;g.getAbpropConfigsTable=b}),98);
__d("WAWebSchemaAbPropEventSamplingConfig",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("abprop-event-sampling-configs").version(d("WAWebModelStorageVersions").abpropEventSamplingConfigCreateTable(),[b("eventCode"),c("samplingWeight")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("abprop-event-sampling-configs")}g.addTable=a;g.getAbpropEventSamplingConfigsTable=b}),98);
__d("WAWebSchemaActiveMessageRanges",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=Object.freeze({Unknown:"unknown",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChatKeepStarredKeepMedia:"clearChat_0_0",ClearChatKeepStarredDeleteMedia:"clearChat_0_1",ClearChatDeleteStarredKeepMedia:"clearChat_1_0",ClearChatDeleteStarredDeleteMedia:"clearChat_1_1",DeleteChatDeleteMedia:"deleteChat_1",DeleteChatKeepMedia:"deleteChat_0"});function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("active-message-ranges").version(d("WAWebModelStorageVersions").activeMessageRangesCreateTable(),[e(["chatId","action"]),b("chatId"),c("actionValue"),c("remainingMessages")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("active-message-ranges")}g.ActiveRangeAction=c;g.addTable=a;g.getActiveMessageRangesTable=b}),98);
__d("WAWebSchemaAgent",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("agent").version(d("WAWebModelStorageVersions").agentCreateTable(),[b("id"),c("deviceId"),c("name"),c("isDeleted")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("agent")}g.addTable=a;g.getAgentTable=b}),98);
__d("WAWebSchemaBlocklist",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("blocklist").version(d("WAWebModelStorageVersions").blocklistCreateTable(),[b("id")]).view(function(a){return{id:a.id}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("blocklist")}g.addTable=a;g.getBlocklistTable=b}),98);
__d("WAWebSchemaBotProfile",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("bot-profile").version(d("WAWebModelStorageVersions").botProfileCreateTable(),[b("id"),c("name"),c("attrs"),c("description"),c("category"),c("isDefault"),c("prompts"),c("personaId"),c("commands"),c("commandsDescription"),c("isMetaCreated"),c("creatorName"),c("creatorProfileUrl"),c("lastUpdateTs"),c("posingAsProfessional")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("bot-profile")}g.addTable=a;g.getBotProfileTable=b}),98);
__d("WAWebSchemaCTWASuggestion",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("ctwa-suggestion").version(d("WAWebModelStorageVersions").ctwaSuggestionsCreateTable(),[e("id"),c("type"),c("expiresAt"),b("expiresAt"),c("heading"),c("body"),c("highlight"),c("actionLink"),c("display"),c("ts")]).version(d("WAWebModelStorageVersions").ctwaSuggestionsAddTrackingData(),[c("nuxData"),c("coolOffData")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("ctwa-suggestion")}g.addTable=a;g.getCTWASuggestionTable=b}),98);
__d("WAWebSchemaCart",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("cart").version(d("WAWebModelStorageVersions").cartCreateTable(),[b("id"),c("products"),c("message"),c("total"),c("currency"),c("itemCount")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("cart")}g.addTable=a;g.getCartTable=b}),98);
__d("WAWebSchemaChatAssignment",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="chat-assignment";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add(h).version(d("WAWebModelStorageVersions").chatAssignmentCreateTable(),[b("id"),c("chatId"),c("agentId"),c("chatOpenedByAgent")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table(h)}g.addTable=a;g.getChatAssignmentTable=b}),98);
__d("WAWebSchemaCollectionVersion",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("collection-version").version(d("WAWebModelStorageVersions").collectionVersionCreateTable(),[b("collection"),c("version"),c("state"),c("finiteFailureStartTime"),c("ltHash"),c("isCollectionInMacMismatchFatal")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("collection-version")}g.addTable=a;g.getCollectionVersionTable=b}),98);
__d("WAWebSchemaDeviceList",["WAWebModelStorageUtils","WAWebModelStorageVersions"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("device-list",function(a,b){var c=b.addColumn;b=b.addUserDefinedPrimaryKey;return a.version(d("WAWebModelStorageVersions").deviceListCreateTable(),[b("id"),c("devices"),c("rawId"),c("timestamp"),c("validIndexes"),c("currentIndex")]).version(d("WAWebModelStorageVersions").deviceListAddDelete(),[c("deleted"),c("deletedChangedToHost")]).version(d("WAWebModelStorageVersions").deviceListAddV2Fields(),[c("expectedTs"),c("expectedTsLastDeviceJobTs"),c("expectedTsUpdateTs"),c("advAccountType")]).view(function(a){return a}).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("device-list")}g.addTable=a;g.getDeviceListTable=b}),98);
__d("WAWebSchemaDirectConnectionKeys",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("direct-connection-keys").version(d("WAWebModelStorageVersions").directConnectionKeysCreateTable(),[b("id"),c("certificateChain"),c("cypher"),c("cypherExpirationTimestamp")]).version(d("WAWebModelStorageVersions").directConnectionKeysAddPostcodeColumns(),[c("cypherType"),c("postcode"),c("postcodeSetByUser"),c("postcodeLocationName")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("direct-connection-keys")}g.addTable=a;g.getDirectConnectionKeysTable=b}),98);
__d("WAWebSchemaDownload3PDSignals",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addAutoIncrementingPrimaryKey,e=b.addColumn;b=b.addIndex;a.add("download-3pd-signals").version(d("WAWebModelStorageVersions").download3PDSignalsCreateTable(),[c("id"),e("clickId"),e("ctwa3pdConversionType"),e("ctwa3pdConversionSubtype"),e("ctwa3pdConversionMetadata"),e("timestamp"),b("timestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("download-3pd-signals")}g.addTable=a;g.getDownload3PDSignalsTable=b}),98);
__d("WAWebSchemaEncryptedMutations",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addAutoIncrementingPrimaryKey;a.add("encrypted-mutations").version(d("WAWebModelStorageVersions").encryptedMutationsCreateTable(),[b("id"),c("collectionName"),c("keyId"),c("indexMac"),c("operation"),c("indexAndValueCipherText")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaFavorite",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addUserDefinedPrimaryKey;b=b.addColumn;a.add("favorite").version(d("WAWebModelStorageVersions").favoriteCreateTable(),[c("id"),b("orderIndex")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("favorite")}g.addTable=a;g.getFavoriteTable=b}),98);
__d("WAWebSchemaFavoriteStickers",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("favorite-stickers").version(d("WAWebModelStorageVersions").favoriteStickersCreateTable(),[b("id"),c("timestamp"),c("sticker"),c("stickerHashWithoutMeta"),c("isFavorite"),c("deviceId")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("favorite-stickers")}g.addTable=a;g.getFavoriteStickersTable=b}),98);
__d("WAWebSchemaFtsIndexingQueue",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("fts-indexing-queue").version(d("WAWebModelStorageVersions").ftsIndexingQueueCreateTable(),[b("id")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("fts-indexing-queue")}g.addTable=a;g.getFtsIndexingQueueTable=b}),98);
__d("WAWebSchemaGroupInviteV4",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addCompositeIndex;a.add("group-invite-v4").version(d("WAWebModelStorageVersions").groupInviteV4CreateTable(),[e("id"),c("from"),c("to"),c("groupId"),c("expiration"),c("expired"),b(["from","to","groupId"])]).version(d("WAWebModelStorageVersions").addGroupFromKeyToGroupInviteV4(),[b(["from","groupId"])]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("group-invite-v4")}g.addTable=a;g.getGroupInviteV4Table=b}),98);
__d("WAWebSchemaHistorySyncNotification",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("history-sync-notification",function(a,b){var c=b.addColumn,e=b.addEncryptedColumn,f=b.addUserDefinedPrimaryKey,g=b.addIndex;b=b.addCompositeIndex;return a.version((a=d("WAWebModelStorageVersions")).historySyncNotificationsCreateTable(),[f("msgKey"),c("downloadOptions"),c("syncType"),e("chunkEncryptionKey",(f=d("WAWebStorageSchema")).EncryptedValueType.STRING),c("chunkOrder"),c("processed"),g("syncType"),g("chunkOrder"),g("processed"),c("isReupload"),c("historySyncStepStartedTs"),c("historySyncPayloadSize"),c("reuploadPending"),c("downloadedHistorySyncPayload")]).version(a.encryptHistorySyncDirectPath(),[e("directPath",f.EncryptedValueType.STRING)]).version(a.encryptHistorySyncFilehash(),[e("filehash",f.EncryptedValueType.STRING),e("encFilehash",f.EncryptedValueType.STRING)]).version(a.addInitialHistBootstrapInlinePayloadColumn(),[e("initialHistBootstrapInlinePayload",f.EncryptedValueType.ARRAY_BUFFER)]).version(a.addPeerDataRequestSessionIdColumn(),[c("peerDataRequestSessionId")]).version(a.addPeerDataRequestChatIdColumn(),[c("peerDataRequestChatId")]).version(a.addProgressColumn(),[c("progress")]).version(a.addProcessedAndSyncTypeCompositeIndex(),[b(["processed","syncType"]),e("encHandle",f.EncryptedValueType.STRING)]).view(function(a){return a}).useDbMsgEncKeyForEncryptedCol(!0).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("history-sync-notification")}g.addTable=a;g.getHistorySyncNotificationTable=b}),98);
__d("WAWebSchemaInAppBanner",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("in-app-banner").version(d("WAWebModelStorageVersions").inAppBannerCreateTable(),[b("id"),c("type"),c("surfaceId"),c("title"),c("text"),c("actionText"),c("actionLink"),c("iconDescription"),c("iconLight"),c("iconDark"),c("backgroundColor"),c("highlightColor"),c("pacing"),c("ts")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaInactiveReceipt_DEPRECATED",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("inactive-receipt").version(d("WAWebModelStorageVersions").inactiveReceiptCreateTable(),[b("msgId"),c("chatId"),c("participantId")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaLabel",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum")({NONE:0,UNREAD:1,GROUPS:2,FAVORITES:3,PREDEFINED:4,CUSTOM:5,COMMUNITY:6,SERVER_ASSIGNED:7});function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("label").version(d("WAWebModelStorageVersions").labelCreateTable(),[b("id"),c("name"),c("colorIndex"),c("predefinedId"),c("orderIndex"),c("isActive"),c("type"),c("isImmutable")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("label")}g.ListType=e;g.addTable=a;g.getLabelTable=c}),98);
__d("WAWebSchemaLabelAssociation",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b=b("$InternalEnum")({Jid:"jid",Message:"message"});function a(a){var b=a.labelId,c=a.associationId;a=a.type;return[b,c,a]}function c(a){return a[1]}function e(a){return a[2]}function f(a){return{labelId:a[0],associationId:a[1],type:a[2]}}function h(a,b){return[a[0],b,a[2]]}function i(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addCompositePrimaryKey,e=b.addIndex;b=b.addCompositeIndex;a.add("label-association").version(d("WAWebModelStorageVersions").labelAssociationCreateTable(),[c(["labelId","associationId","type"]),e("labelId"),b(["associationId","type"])]).view(function(a){return a})}function j(){return d("WAWebModelStorageUtils").getStorage().table("label-association")}g.LabelAssociationType=b;g.createLabelAssociationPrimaryKey=a;g.getAssociationIdFromPrimaryKey=c;g.getAssociationTypeFromPrimaryKey=e;g.createLabelAssociationRowFromPrimaryKey=f;g.replaceAssociationIdInPrimaryKey=h;g.addTable=i;g.getLabelAssociationTable=j}),98);
__d("WAWebSchemaLidChatState",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("lid-chat-state").version(d("WAWebModelStorageVersions").lidChatStateCreateTable(),[b("id"),c("shareOwnPn"),c("requestedPnTimestamp")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaLidDisplayNameMapping",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("lid-display-name-mapping").version(d("WAWebModelStorageVersions").lidDisplayNameMappingCreateTable(),[b("id"),c("displayName")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaLidPnMapping_DEPRECATED",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.removeColumn;a.add("lid-pn-mapping").version(d("WAWebModelStorageVersions").lidPnMappingCreateTable(),[e("id"),c("phoneNumber"),f("phoneNumber"),c("createdAtTimestamp"),c("displayName")]).version(d("WAWebModelStorageVersions").lidPnMappingRemoveDisplayName(),[b("displayName")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaMediaPlaybackEvent",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addAutoIncrementingPrimaryKey;a.add("media-playback-event").version(d("WAWebModelStorageVersions").mediaPlaybackEventCreateTable(),[b("id"),c("event")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("media-playback-event")}g.addTable=a;g.getMediaPlaybackEventTable=b}),98);
__d("WAWebSchemaMemberLabel",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="member-label";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add(h).version(d("WAWebModelStorageVersions").memberLabelCreateTable(),[b("chatId"),c("memberLabelMap")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table(h)}g.addTable=a;g.getMemberLabelTable=b}),98);
__d("WAWebSchemaMessageHistory",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("message-history").version(d("WAWebModelStorageVersions").messageHistoryCreateTable(),[e("msgKey"),c("parentMsgKey"),b("parentMsgKey")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaMessageInfo",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositePrimaryKey;b=b.addIndex;a.add("message-info").version(d("WAWebModelStorageVersions").messageInfoCreateTable(),[e(["msgKey","receiverUserJid"]),c("delivery"),c("read"),c("played"),c("deviceDelivered"),c("deviceNotDelivered"),b("msgKey")]).version(d("WAWebModelStorageVersions").messageInfoAddDeliveryPrivacyMode(),[c("deliveryPrivacyMode")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("message-info")}g.addTable=a;g.getMessageInfoTable=b}),98);
__d("WAWebSchemaMissingKeys",["WASyncdKeyTypes","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(a){var b=a.keyHex,c=a.keyId,e=a.timestamp;a=a.deviceResponses;return{keyHex:b,keyId:d("WASyncdKeyTypes").toSyncKeyId(c),timestamp:e,deviceResponses:a}}function b(a){var b=a.keyHex,c=a.keyId,e=a.timestamp;a=a.deviceResponses;return{keyHex:b,keyId:d("WASyncdKeyTypes").fromSyncKeyId(c),timestamp:e,deviceResponses:a}}function c(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("missing-keys").version(d("WAWebModelStorageVersions").missingKeysCreateTable(),[b("keyHex"),c("keyId"),c("timestamp"),c("deviceResponses")]).view(function(a){return a})}function e(){return d("WAWebModelStorageUtils").getStorage().table("missing-keys")}g.convertToMissingKeyFromRow=a;g.convertFromMissingKeyToRow=b;g.addTable=c;g.getMissingKeysTable=e}),98);
__d("WAWebSchemaNewsletterMetadata",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("newsletter-metadata").version(d("WAWebModelStorageVersions").newsletterMetadataCreateTable(),[b("id"),c("creationTime"),c("name"),c("nameUpdateTime"),c("description"),c("descriptionUpdateTime"),c("handle"),c("inviteCode"),c("size"),c("verified"),c("membershipType"),c("privacy"),c("website"),c("reactionCodesSetting"),c("suspended"),c("geosuspended"),c("terminated"),c("adminCount"),c("capabilities"),c("messageDeliveryUpdates"),c("geosuspendedCountries"),c("hasProfilePictureDeletionAlerts"),c("wamoSubPlanId"),c("wamoSubStatus")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-metadata")}g.addTable=a;g.getNewsletterMetadataTable=b}),98);
__d("WAWebSchemaNewsletterMyVotes",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addCompositePrimaryKey;a.add("newsletter-my-votes").version(d("WAWebModelStorageVersions").newsletterMyVotesCreateTable(),[b(["chatJid","msgServerId"]),c("serverTimestampMs"),c("votes"),c("ack"),c("t"),c("read"),c("msgKey")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-my-votes")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaNewsletterPollsVotes",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("newsletter-polls-votes").version(d("WAWebModelStorageVersions").newsletterPollsVotesCreateTable(),[b("parentMsgKey"),c("serverTimestamp"),c("votesMap")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-polls-votes")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaNewsletterReactions",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("newsletter-reactions").version(d("WAWebModelStorageVersions").newsletterReactionsCreateTable(),[b("parentMsgKey"),c("emojiCountMap"),c("serverTimestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("newsletter-reactions")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaNonMessageDataRequest",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum").Mirrored(["SEND_REQUEST","MEDIA_UPLOAD"]);function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("non-message-data-request").version(d("WAWebModelStorageVersions").nonMessageDataRequestCreateTable(),[b("id"),c("fileKey"),c("requestType"),c("operationType"),c("lastRequestTimeStampSec"),c("requestRetryCount"),c("responseError"),c("lastMediaUploadTimeStampSec"),c("lastMediaUploadSuccess"),c("mediaUploadFailureCount")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("non-message-data-request")}g.DataRequestUploadOperationType=e;g.addTable=a;g.getNonMessageDataRequestTable=c}),98);
__d("WAWebSchemaNote",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("note").version(d("WAWebModelStorageVersions").noteCreateTable(),[e("id"),c("type"),b("type"),c("chatJid"),b("chatJid"),c("content"),c("createdAt"),c("modifiedAt")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("note")}g.addTable=a;g.getNoteTable=b}),98);
__d("WAWebSchemaOptOutList",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("optoutlist").version(d("WAWebModelStorageVersions").optOutListCreateTable(),[b("id")]).view(function(a){return{id:a.id}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("optoutlist")}g.addTable=a;g.getOptOutListTable=b}),98);
__d("WAWebSchemaOrphanPaymentNotification",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-payment-notification").version(d("WAWebModelStorageVersions").orphanPaymentNotificationCreateTable(),[b("msgKey"),c("receiver"),c("currency"),c("amount1000"),c("type"),c("status"),c("ts")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-payment-notification")}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaOrphanReceipt",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-receipt").version(d("WAWebModelStorageVersions").orphanReceiptCreateTable(),[b("msgKey"),c("delivery"),c("read"),c("played")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-receipt")}g.addTable=a;g.getOrphanReceiptTable=b}),98);
__d("WAWebSchemaOrphanRevoke",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-revoke").version(d("WAWebModelStorageVersions").orphanRevokeCreateTable(),[b("msgKey"),c("sender"),c("timestamp"),c("subtype")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-revoke")}g.addTable=a;g.getOrphanRevokeTable=b}),98);
__d("WAWebSchemaOrphanTcToken",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addEncryptedColumn;b=b.addUserDefinedPrimaryKey;a.add("orphan-tc-token").version(d("WAWebModelStorageVersions").orphanTcTokenCreateTable(),[b("chatId"),e("tcToken",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("tcTokenTimestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("orphan-tc-token")}g.addTable=a;g.getOrphanTcTokenTable=b}),98);
__d("WAWebSchemaPeerMessage",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("peer-message").version(d("WAWebModelStorageVersions").peerMessageCreateTable(),[b("id"),c("to"),c("type"),c("subtype"),c("appStateSyncKeyShare"),c("appStateSyncKeyRequest"),c("appStateFatalExceptionNotification"),c("peerDataOperationRequestMessage"),c("peerDataOperationRequestResponseMessage")]).version(d("WAWebModelStorageVersions").paymentBackgroundsRemovedTablePlaceholder(),[]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("peer-message")}g.addTable=a;g.getPeerMessageTable=b}),98);
__d("WAWebSchemaPendingMutations",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(a){var b=a.id,c=a.collection,d=a.index,e=a.binarySyncAction,f=a.version,g=a.operation,h=a.timestamp;a=a.action;return{id:b,collection:c,index:d,binarySyncAction:e,version:f,operation:g,timestamp:h,action:a}}function b(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addAutoIncrementingPrimaryKey;b=b.addIndex;a.add("pending-mutations").version(d("WAWebModelStorageVersions").pendingMutationsCreateTable(),[e("id"),c("collection"),c("index"),b("index"),c("timestamp"),b("collection"),c("version"),c("operation"),c("binarySyncAction")]).version(d("WAWebModelStorageVersions").addActionToPendingMutations(),[c("action"),b("action")]).view(function(a){return a})}function c(){return d("WAWebModelStorageUtils").getStorage().table("pending-mutations")}g.convertToPendingMutationFromRow=a;g.addTable=b;g.getPendingMutationsTable=c}),98);
__d("WAWebSchemaPrivacyDisallowedList",["$InternalEnum","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){e=b("$InternalEnum")({About:"status",GroupAdd:"groupadd",LastSeen:"last",ProfilePicture:"profile"});function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("privacy-disallowed-list").version(d("WAWebModelStorageVersions").privacyDisallowedListCreateTable(),[b("id"),c("disallowedList")]).version(d("WAWebModelStorageVersions").privacyDisallowedListAddDhashField(),[c("dhash")]).view(function(a){return{id:a.id,disallowedList:a.disallowedList,dhash:a.dhash}})}function c(){return d("WAWebModelStorageUtils").getStorage().table("privacy-disallowed-list")}g.PrivacyDisallowedListType=e;g.addTable=a;g.getPrivacyDisallowedListTable=c}),98);
__d("WAWebSchemaProfilePicThumb",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("profile-pic-thumb").version(d("WAWebModelStorageVersions").profilePicThumbCreateTable(),[b("id"),c("tag"),c("eurl"),c("previewEurl"),c("timestamp"),c("previewDirectPath"),c("fullDirectPath"),c("filehash")]).view(function(a){return{id:a.id,tag:a.tag,eurl:a.eurl,previewEurl:a.previewEurl,timestamp:a.timestamp,previewDirectPath:a.previewDirectPath,fullDirectPath:a.fullDirectPath,filehash:a.filehash}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("profile-pic-thumb")}g.addTable=a;g.getProfilePicThumbTable=b}),98);
__d("WAWebSchemaQuickPromotions",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("quick-promotions").version(d("WAWebModelStorageVersions").quickPromotionsCreateTable(),[e("id"),c("surfaceId"),b("surfaceId"),c("ts"),c("data"),c("tracking"),c("locale")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("quick-promotions")}g.addTable=a;g.getQuickPromotionsTable=b}),98);
__d("WAWebSchemaQuickReply",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("quick-reply").version(d("WAWebModelStorageVersions").quickReplyCreateTable(),[b("id"),c("shortcut"),c("message"),c("count"),c("keywords")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("quick-reply")}g.addTable=a;g.getQuickReplyTable=b}),98);
__d("WAWebSchemaRecentStickers",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("recent-stickers").version(d("WAWebModelStorageVersions").recentStickersCreateTable(),[b("id"),c("timestamp"),c("sticker"),c("msgId"),c("weight"),c("isNewSticker")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("recent-stickers")}g.addTable=a;g.getRecentStickersTable=b}),98);
__d("WAWebSchemaReportingInfo",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addCompositeIndex,f=b.addIndex,g=b.addAutoIncrementingPrimaryKey;b=b.addEncryptedColumn;a.add("reporting-info").version(d("WAWebModelStorageVersions").reportingInfoTable(),[g("id"),c("msgKey"),c("stanzaId"),c("reportingTag"),c("reportingToken"),b("reportingTokenContentOpaqueData",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("version"),c("msgTs"),c("receivedTs"),c("reportingTokenKey"),e(["msgKey","msgTs"]),f("receivedTs")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("reporting-info")}g.addTable=a;g.getReportingInfoTable=b}),98);
__d("WAWebSchemaReportingToken",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addIndex;b=b.addUserDefinedPrimaryKey;a.add("reporting-token").version(d("WAWebModelStorageVersions").reportingTokenTable(),[b("id"),c("reportingTag"),c("reportingTokenContent"),c("version")]).version(d("WAWebModelStorageVersions").reportingTokenTableTsIndex(),[c("ts"),e("ts")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("reporting-token")}g.addTable=a;g.getReportingTokenTable=b}),98);
__d("WAWebSchemaStickerDownload",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("sticker-download").version(d("WAWebModelStorageVersions").stickerDownloadCreateTable(),[b("id"),c("timestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("sticker-download")}g.addTable=a;g.getStickerDownloadTable=b}),98);
__d("WAWebSchemaSubgroupSuggestion",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("subgroup-suggestion").version(d("WAWebModelStorageVersions").subgroupSuggestionCreateTable(),[e("id"),c("parentGroupId"),b("parentGroupId"),c("subject"),c("desc"),c("owner"),c("t")]).view(function(a){return a})}g.addTable=a}),98);
__d("WAWebSchemaSubscription",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("subscription").version(d("WAWebModelStorageVersions").subscriptionCreateTable(),[b("id"),c("isDeactivated"),c("isAutoRenewing"),c("expirationDate")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("subscription")}g.addTable=a;g.getSubscriptionTable=b}),98);
__d("WAWebSyncdCollectionHandlerTypesConverter",["WAServerSync.pb","WASyncAction.pb","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a);return d("encodeProtobuf").encodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,{value:a}).readBuffer()}function a(a,b){return a.map(function(a){var c=h(a.binarySyncAction);return{index:a.index,action:a.action,binarySyncData:c,actionState:b,version:a.version,keyId:a.keyId,indexMac:a.indexMac,valueMac:a.valueMac,collection:a.collection,timestamp:a.timestamp}})}function b(a,b,c,d,e){return{index:a.index,binarySyncData:a.binarySyncData,version:a.version,keyId:a.keyId,indexMac:a.indexMac,valueMac:a.valueMac,collection:a.collection,timestamp:a.timestamp,action:c,actionState:b,modelId:d,modelType:e!=null?e:void 0}}function c(a){return a.map(function(a){return{collection:a.collection,index:a.index,action:a.action,indexMac:a.indexMac,keyId:a.keyId,operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,binarySyncData:a.binarySyncData,valueMac:a.valueMac,version:a.version}})}g.syncActionToSyncData=h;g.encryptedUploadMutationsToSyncActions=a;g.setMutationToSyncAction=b;g.syncActionsToDecryptedMutation=c}),98);
__d("WAWebSchemaSyncActions",["WALogger","WASyncdKeyTypes","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebSyncdCollectionHandlerTypesConverter","err"],(function(a,b,c,d,e,f,g){var h;function i(a){var b=a.index,e=a.binarySyncAction,f=a.actionState,g=a.version,i=a.keyId,j=a.modelId,k=a.modelType,l=a.indexMac,m=a.valueMac,n=a.collection,o=a.timestamp,p=a.action;a=a.binarySyncData;if(a==null){if(e==null){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["syncd: binarySyncAction should not be null when binarySyncData is null"]))).tags("syncd").sendLogs("syncd: syncd binarySyncAction should not be null when binarySyncData is null");throw c("err")("syncd: binarySyncAction should not be null when binarySyncData is null")}a=d("WAWebSyncdCollectionHandlerTypesConverter").syncActionToSyncData(e)}return{index:b,binarySyncData:a,actionState:f,version:g,keyId:i,modelId:j,modelType:k,indexMac:l,valueMac:m,collection:n,timestamp:o,action:p}}function a(a){var b=a.keyId;return babelHelpers["extends"]({},a,{keyId:d("WASyncdKeyTypes").toSyncKeyId(b)})}function b(a){a=babelHelpers["extends"]({},a);a.keyId!=null&&(a.keyId=d("WASyncdKeyTypes").fromSyncKeyId(a.keyId));return a}function e(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey,f=b.addIndex;b=b.addCompositeIndex;a.add("sync-actions").version(d("WAWebModelStorageVersions").syncActionsCreateTable(),[e("index"),c("keyId"),c("version"),c("actionState"),f("actionState"),c("modelId"),c("modelType"),b(["modelId","modelType","actionState"]),c("valueMac"),c("indexMac"),f("indexMac"),c("collection"),f("collection"),c("timestamp"),c("action"),f("action"),c("binarySyncAction"),c("binarySyncData")]).view(i)}function f(){return d("WAWebModelStorageUtils").getStorage().table("sync-actions")}g.convertToSyncActionFromRow=a;g.convertFromSyncActionToRow=b;g.addTable=e;g.getSyncActionsTable=f}),98);
__d("WAWebSchemaSyncKeys",["WASyncdKeyTypes","WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder","WAWebStorageSchema"],(function(a,b,c,d,e,f,g){function a(a){var b=a.keyId,c=a.keyData;return babelHelpers["extends"]({},a,{keyId:d("WASyncdKeyTypes").toSyncKeyId(b.buffer),keyData:d("WASyncdKeyTypes").toSyncKeyData(c)})}function b(a){var b=a.keyId,c=a.keyData;return babelHelpers["extends"]({},a,{keyId:new Uint8Array(d("WASyncdKeyTypes").fromSyncKeyId(b)),keyData:d("WASyncdKeyTypes").fromSyncKeyData(c)})}function c(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addEncryptedColumn,f=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add("sync-keys").version(d("WAWebModelStorageVersions").syncKeysCreateTable(),[f("keyId"),c("timestamp"),c("fingerprint"),e("keyData",d("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),c("keyEpoch"),b("keyEpoch")]).view(function(a){return a})}function e(){return d("WAWebModelStorageUtils").getStorage().table("sync-keys")}g.convertToSyncKeyFromRow=a;g.convertFromSyncKeyToRow=b;g.addTable=c;g.getSyncKeysTable=e}),98);
__d("WAWebSchemaTasksScheduledTime",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("tasks-scheduled-time").version(d("WAWebModelStorageVersions").tasksScheduledTimeCreateTable(),[b("taskName"),c("time")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("tasks-scheduled-time")}g.addTable=a;g.getTasksScheduledTimeTable=b}),98);
__d("WAWebSchemaThreadsMetadata",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="thread-metadata";function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;a.add(h).version(d("WAWebModelStorageVersions").threadsMetadataCreateTable(),[e("id"),c("aiThreadInfo")]).version(d("WAWebModelStorageVersions").addThreadsMetadataTableInternalIdIndex(),[c("internalId"),b("internalId"),c("creationTimestamp"),c("lastMessageTimestamp"),c("pinThreadTimestamp")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table(h)}g.addTable=a;g.getThreadsMetadataTable=b}),98);
__d("WAWebUserPrefsDBSettings",["WAWebUserPrefsCacheStorage","WAWebUserPrefsKeys","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a!=null?yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.setItemToCacheStorage(d("WAWebUserPrefsKeys").MD_KEYS.COLUMN_PACKING_ENABLED,a):yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.removeItemFromCacheStorage(d("WAWebUserPrefsKeys").MD_KEYS.COLUMN_PACKING_ENABLED)});return h.apply(this,arguments)}function c(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsCacheStorage").userPrefsCacheStorage.getItemFromCacheStorage(d("WAWebUserPrefsKeys").MD_KEYS.COLUMN_PACKING_ENABLED));return a});return i.apply(this,arguments)}g.setColumnPackingValueToStorage=a;g.getColumnPackingValueFromStorage=c}),98);
__d("WAWebStorageGatingUtils",["WALogger","WAWebModelStorageUtils","WAWebUserPrefsDBSettings","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebModelStorageUtils").storageExists());if(b){b=(yield d("WAWebUserPrefsDBSettings").getColumnPackingValueFromStorage());if(b==null){yield d("WAWebUserPrefsDBSettings").setColumnPackingValueToStorage(!1);return!1}return b}if(!c("gkx")("26258")&&URLSearchParams){b=new URLSearchParams(window.location.search);b=b.get("pack");if(b!=null){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[column-serialization] enabled from url request"])));yield d("WAWebUserPrefsDBSettings").setColumnPackingValueToStorage(b==="true"||b==="1");return!0}}yield d("WAWebUserPrefsDBSettings").setColumnPackingValueToStorage(a);return a});return i.apply(this,arguments)}g.columnPackingEnabled=a}),98);
__d("WAWebModelStorageInitialize",["WALogger","WAWeb-dexie","WAWebAccountLinkingSchema","WAWebCommentSchema","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebEventResponsesSchema","WAWebModelStorageUtils","WAWebPinInChatSchema","WAWebPollsVotesSchema","WAWebPremiumMessageSchema","WAWebSchemaACSTokens","WAWebSchemaAbPropConfig","WAWebSchemaAbPropEventSamplingConfig","WAWebSchemaActiveMessageRanges","WAWebSchemaAgent","WAWebSchemaBlocklist","WAWebSchemaBotProfile","WAWebSchemaBusinessProfile","WAWebSchemaCTWASuggestion","WAWebSchemaCart","WAWebSchemaChat","WAWebSchemaChatAssignment","WAWebSchemaChatThreadLoggingPendingEvents","WAWebSchemaCollectionVersion","WAWebSchemaContact_DO_NOT_USE_DIRECTLY","WAWebSchemaDeviceList","WAWebSchemaDirectConnectionKeys","WAWebSchemaDownload3PDSignals","WAWebSchemaEncryptedMutations","WAWebSchemaFavorite","WAWebSchemaFavoriteStickers","WAWebSchemaFtsIndexingQueue","WAWebSchemaGroupInviteV4","WAWebSchemaGroupMetadata","WAWebSchemaHistorySyncNotification","WAWebSchemaInAppBanner","WAWebSchemaInactiveReceipt_DEPRECATED","WAWebSchemaLabel","WAWebSchemaLabelAssociation","WAWebSchemaLidChatState","WAWebSchemaLidDisplayNameMapping","WAWebSchemaLidPnMapping_DEPRECATED","WAWebSchemaMediaPlaybackEvent","WAWebSchemaMemberLabel","WAWebSchemaMembershipApprovalRequest","WAWebSchemaMessage","WAWebSchemaMessageAssociation","WAWebSchemaMessageHistory","WAWebSchemaMessageInfo","WAWebSchemaMessageOrphans","WAWebSchemaMissingKeys","WAWebSchemaNewsletterMetadata","WAWebSchemaNewsletterMyVotes","WAWebSchemaNewsletterPollsVotes","WAWebSchemaNewsletterReactions","WAWebSchemaNonMessageDataRequest","WAWebSchemaNote","WAWebSchemaOptOutList","WAWebSchemaOrphanPaymentNotification","WAWebSchemaOrphanReceipt","WAWebSchemaOrphanRevoke","WAWebSchemaOrphanTcToken","WAWebSchemaParticipant","WAWebSchemaPeerMessage","WAWebSchemaPendingMutations","WAWebSchemaPrivacyDisallowedList","WAWebSchemaProfilePicThumb","WAWebSchemaQuickPromotions","WAWebSchemaQuickReply","WAWebSchemaReactions","WAWebSchemaRecentStickers","WAWebSchemaReportingInfo","WAWebSchemaReportingToken","WAWebSchemaSelfAddonMessageTypeTable","WAWebSchemaStickerDownload","WAWebSchemaSubgroupSuggestion","WAWebSchemaSubgroupSuggestionV2","WAWebSchemaSubscription","WAWebSchemaSyncActions","WAWebSchemaSyncKeys","WAWebSchemaSyncdLogs","WAWebSchemaTasksScheduledTime","WAWebSchemaThreadsMetadata","WAWebSchemaUnifiedAddons","WAWebSchemaUnjoinedSubgroupMetadata","WAWebSchemaUserPrefs","WAWebSchemaVerifiedBusinessName","WAWebStorage","WAWebStorageGatingUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(i==null){yield d("WAWebDbRolloutUtil").loadSchemaVersions();a=(yield d("WAWebStorageGatingUtils").columnPackingEnabled(!!(a!=null&&a.canPackColumns)));d("WAWebModelStorageUtils").createStorage({packColumns:a});d("WAWebSchemaAbPropConfig").addTable();d("WAWebSchemaAbPropEventSamplingConfig").addTable();d("WAWebSchemaActiveMessageRanges").addTable();d("WAWebSchemaAgent").addTable();d("WAWebSchemaBlocklist").addTable();d("WAWebSchemaOptOutList").addTable();d("WAWebSchemaBotProfile").addTable();d("WAWebSchemaCart").addTable();d("WAWebSchemaChat").addTable();d("WAWebSchemaChatAssignment").addTable();d("WAWebSchemaChatThreadLoggingPendingEvents").addTable();d("WAWebSchemaCollectionVersion").addTable();d("WAWebSchemaContact_DO_NOT_USE_DIRECTLY").addTable();d("WAWebSchemaDeviceList").addTable();d("WAWebSchemaDirectConnectionKeys").addTable();d("WAWebSchemaEncryptedMutations").addTable();d("WAWebSchemaFavorite").addTable();d("WAWebSchemaFavoriteStickers").addTable();d("WAWebSchemaFtsIndexingQueue").addTable();d("WAWebSchemaGroupInviteV4").addTable();d("WAWebSchemaGroupMetadata").addTable();d("WAWebSchemaHistorySyncNotification").addTable();d("WAWebSchemaInactiveReceipt_DEPRECATED").addTable();d("WAWebSchemaLabelAssociation").addTable();d("WAWebSchemaLabel").addTable();d("WAWebSchemaLidDisplayNameMapping").addTable();d("WAWebSchemaLidPnMapping_DEPRECATED").addTable();d("WAWebSchemaLidChatState").addTable();d("WAWebSchemaMessage").addTable();d("WAWebSchemaMessageHistory").addTable();d("WAWebSchemaMissingKeys").addTable();d("WAWebSchemaMessageInfo").addTable();d("WAWebSchemaOrphanPaymentNotification").addTable();d("WAWebSchemaOrphanReceipt").addTable();d("WAWebSchemaOrphanRevoke").addTable();d("WAWebSchemaOrphanTcToken").addTable();d("WAWebSchemaParticipant").addTable();d("WAWebSchemaPeerMessage").addTable();d("WAWebSchemaPendingMutations").addTable();d("WAWebPollsVotesSchema").addTable();d("WAWebSchemaPrivacyDisallowedList").addTable();d("WAWebSchemaProfilePicThumb").addTable();d("WAWebSchemaQuickReply").addTable();d("WAWebSchemaReactions").addTable();d("WAWebSchemaRecentStickers").addTable();d("WAWebSchemaSubscription").addTable();d("WAWebSchemaSyncActions").addTable();d("WAWebSchemaSyncKeys").addTable();d("WAWebSchemaTasksScheduledTime").addTable();d("WAWebSchemaUnjoinedSubgroupMetadata").addTable();d("WAWebSchemaUserPrefs").addTable();d("WAWebSchemaVerifiedBusinessName").addTable();d("WAWebSchemaMessageOrphans").addTable();d("WAWebSchemaMembershipApprovalRequest").addTable();d("WAWebSchemaNonMessageDataRequest").addTable();d("WAWebSchemaCTWASuggestion").addTable();d("WAWebPinInChatSchema").addTable();d("WAWebSchemaInAppBanner").addTable();d("WAWebSchemaNewsletterMetadata").addTable();d("WAWebPremiumMessageSchema").addTable();d("WAWebSchemaQuickPromotions").addTable();d("WAWebSchemaSubgroupSuggestion").addTable();d("WAWebSchemaNewsletterReactions").addTable();d("WAWebSchemaSelfAddonMessageTypeTable").addTable();d("WAWebSchemaSubgroupSuggestionV2").addTable();d("WAWebSchemaSyncdLogs").addTable();d("WAWebCommentSchema").addTable();d("WAWebSchemaBusinessProfile").addTable();d("WAWebSchemaNewsletterMyVotes").addTable();d("WAWebSchemaNewsletterPollsVotes").addTable();d("WAWebSchemaReportingToken").addTable();d("WAWebEventResponsesSchema").addTable();d("WAWebSchemaNote").addTable();d("WAWebSchemaUnifiedAddons").addTable();d("WAWebSchemaReportingInfo").addTable();d("WAWebSchemaMessageAssociation").addTable();d("WAWebSchemaStickerDownload").addTable();d("WAWebSchemaACSTokens").addTable();d("WAWebSchemaMediaPlaybackEvent").addTable();d("WAWebSchemaDownload3PDSignals").addTable();d("WAWebAccountLinkingSchema").addTable();d("WAWebSchemaMemberLabel").addTable();d("WAWebSchemaThreadsMetadata").addTable();i=d("WAWebModelStorageUtils").getStorage().initialize()["catch"](function(a){var b="Unknown error";a instanceof d("WAWebStorage").AlreadyInitializedError||a instanceof d("WAWebStorage").NoSuchDatabaseError?b=a.toString():a instanceof c("WAWeb-dexie").DexieError&&(b="Unknown DexieError");d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to initialize model storage: ",""])),b).verbose().devConsole(a).sendLogs("failed-to-initialize-model-storage",{sendLogsType:d("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD});throw a})}return i});return j.apply(this,arguments)}function e(){return d("WAWebModelStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebModelStorageUtils").DATABASE_NAME)["delete"]())})["finally"](function(){i=null})}function f(){i=null}g.initializeWithoutGKs=a;g.destroy=e;g.clearInitializePromise=f}),98);
__d("isPlainObject",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Object.prototype.toString.call(a)==="[object Object]"}f["default"]=a}),66);
__d("WAWebModernizr",[],(function(a,b,c,d,e,f){function a(){return self.Modernizr}f.getModernizr=a}),66);
__d("WAWebMexEventV2WamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MexEventV2:[4336,{mexEventV2DurationMs:[1,a.TYPES.TIMER],mexEventV2EndTime:[2,a.TYPES.INTEGER],mexEventV2ErrorCodes:[3,a.TYPES.STRING],mexEventV2Errors:[4,a.TYPES.STRING],mexEventV2ExperimentFlag:[12,a.TYPES.INTEGER],mexEventV2HasData:[5,a.TYPES.BOOLEAN],mexEventV2IsArgoPayload:[10,a.TYPES.BOOLEAN],mexEventV2IsMex:[6,a.TYPES.BOOLEAN],mexEventV2OperationName:[7,a.TYPES.STRING],mexEventV2QueryId:[8,a.TYPES.STRING],mexEventV2StartTime:[9,a.TYPES.INTEGER],mexFbUserType:[11,a.TYPES.STRING]},[1,1,1],"regular"]},{MexEventV2:[]});g.MexEventV2WamEvent=b}),98);
__d("WAWebMexLogging",["WALogger","WAWebMexEventV2WamEvent"],(function(a,b,c,d,e,f,g){var h;c=function(){function a(a){this.$1=!1,this.$2="",this.$3="",this.$4=-1,this.$5=-1,this.$6=-1,this.$7=!1,this.$8="",this.$9="",this.$1=a}var b=a.prototype;b.start=function(){this.$4=Date.now()};b.stop=function(){this.$5=Date.now(),this.$6=this.$5-this.$4};b.setQueryId=function(a){a!=null&&(this.$3=a)};b.setOperationName=function(a){a!=null&&(this.$2=a)};b.setHasData=function(a){this.$7=a};b.setErrors=function(a){if(a!=null){a=this.parseErrorsAndCodes(a);this.$8=a.errors;this.$9=a.errorCodes}};b.setExtensionErrors=function(a){if(a!=null){a=a.filter(function(a){return((a=a.extensions)==null?void 0:a.error_code)!=null}).map(function(a){return i(a.extensions.error_code,a.message)});this.setErrors(a)}};b.logEvent=function(){var a={mexEventV2DurationMs:this.$6,mexEventV2EndTime:this.$5,mexEventV2ErrorCodes:this.$9,mexEventV2Errors:this.$8,mexEventV2HasData:this.$7,mexEventV2IsMex:this.$1,mexEventV2OperationName:this.$2,mexEventV2QueryId:this.$3,mexEventV2StartTime:this.$4};d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[MEX][MexPerfTracker] Logging event:"]))).tags("GQL","MEX").devConsole(a);new(d("WAWebMexEventV2WamEvent").MexEventV2WamEvent)(a).commit()};b.parseErrorsAndCodes=function(a){var b=a.map(function(a){return a.code});return{errors:JSON.stringify(a),errorCodes:JSON.stringify(b)}};return a}();function i(a,b){return{code:a,detail:b,type:"EXTENSION"}}function a(a,b){return{code:a,detail:b,type:"CLIENT"}}function b(a,b){return{code:a,detail:b,type:"TRANSPORT"}}g.MexPerfTracker=c;g.createLoggingClientError=a;g.createLoggingTransportError=b}),98);
__d("WAWebMexRelayEnvironment",["WABinary","WADeprecatedSendIq","WADeprecatedWapParser","WANullthrows","WAWap","WAWebMexLogging","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){var e;b!=null&&(e={query_id:d("WAWap").CUSTOM_STRING(b)});return d("WADeprecatedSendIq").deprecatedSendIq(d("WAWap").wap("iq",{id:d("WAWap").generateId(),to:d("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"w:mex"},new(d("WAWap").WapNode)("query",e,d("WABinary").Binary.build(JSON.stringify(a)).readByteArrayView())),new(c("WADeprecatedWapParser"))("mexParser",function(a){return new TextDecoder("utf-8").decode(a.child("result").contentBytes())}))}var i=function(a){function b(b,c){var d;d=a.call(this)||this;d.name="MexIqError";d.code=b;d.message=c;return d}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error)),j=function(a){function b(b){var c;c=a.call(this)||this;c.name="MexPayloadParsingError";c.error=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error)),k=function(a){function b(b){var c;c=a.call(this)||this;c.name="MexFatalExtensionError";c.error=b;return c}babelHelpers.inheritsLoose(b,a);return b}(babelHelpers.wrapNativeSuper(Error));function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e=(e=e.metadata)==null?void 0:e.mexPerfTracker;e=e instanceof d("WAWebMexLogging").MexPerfTracker?e:null;e!=null&&(e.setQueryId(a.id),e.setOperationName(a.name));b={variables:b};b=(yield n(b,c("WANullthrows")(a.id),e));if(!b.success){e!=null&&(e.setHasData(!1),e.setErrors([d("WAWebMexLogging").createLoggingTransportError(b.errorCode,b.errorText)]));throw new i(b.errorCode,b.errorText)}a={};try{a=JSON.parse(b.result)}catch(a){e!=null&&(e.setHasData(!1),e.setErrors([d("WAWebMexLogging").createLoggingClientError(472,a.message)]));throw new j(a)}b=a;e!=null&&(e.setHasData(b.data!=null),e.setExtensionErrors(b.errors));e=m(b.errors);if(e!=null)throw new k(e);return a});return l.apply(this,arguments)}function m(a){var b;if(a==null||a.length===0)return null;b=(b=a.find(function(a){return((a=a.extensions)==null?void 0:a.is_summary)===!0}))!=null?b:a.find(function(a){return((a=a.extensions)==null?void 0:a.error_code)!=null});if(b==null){a=a[0];a.extensions.error_code=500;return a}return b}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){try{return yield h(a,b)}catch(a){c!=null&&(c.setHasData(!1),c.setErrors([d("WAWebMexLogging").createLoggingClientError(471,a.message)]));throw new i(500,a.message)}});return o.apply(this,arguments)}g.sendMexIq=h;g.MexIqError=i;g.MexPayloadParsingError=j;g.MexFatalExtensionError=k;g.fetchFunc=a;g.parseFatalExtensionError=m}),98);
__d("WAWebJobOrchestratorHelper",[],(function(a,b,c,d,e,f){function g(a,b){return b instanceof Map||b instanceof Set?Array.from(b):b}function a(a,b){var c;if(a.maxConcurrency!==b.maxConcurrency)return!0;if(((c=a.jobPrioritiesQuota)==null?void 0:c.size)!==((c=b.jobPrioritiesQuota)==null?void 0:c.size))return!0;return Object.keys((c=a.maxConcurrencyPerJob)!=null?c:{}).length!==Object.keys((c=b.maxConcurrencyPerJob)!=null?c:{}).length?!0:JSON.stringify(a,g)!==JSON.stringify(b,g)}f.hasConfigChanged=a}),66);
__d("WAWebOrchestratorJobInfoEvent",[],(function(a,b,c,d,e,f){a=function(){function a(a,b,c,d){this.jobName=a,this.scenario=d,this.pendingJobsCount=c,this.jobPriority=b}var b=a.prototype;b.logJobAdded=function(){this.webcJobAddedT=Date.now()};b.logJobStarted=function(){this.webcJobStartedT=Date.now()};b.logJobCompleted=function(a){this.webcJobCompletedT=Date.now(),this.jobResultType=a};return a}();f.JobInfoEvent=a}),66);
__d("WAWebWamEnumWebcJobResultTypeCode",[],(function(a,b,c,d,e,f){a=Object.freeze({COMPLETED:0,ERROR:1,TIMEOUT:2,ABORTED:3});f.WEBC_JOB_RESULT_TYPE_CODE=a}),66);
__d("WAWebWebcJobInfoWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcJobResultTypeCode","WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcJobInfo:[3054,{jobName:[1,a.TYPES.STRING],jobPriority:[2,a.TYPES.STRING],jobResultType:[5,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE],pendingJobsCount:[4,a.TYPES.INTEGER],scenario:[3,d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE],webcJobAddedT:[6,a.TYPES.INTEGER],webcJobCompletedT:[8,a.TYPES.INTEGER],webcJobStartedT:[7,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcJobInfo:[]});g.WebcJobInfoWamEvent=b}),98);
__d("WAWebOrchestratorJobStatsLogger",["WALogger","WAWebBrokerGlobalAppState","WAWebOrchestratorJobInfoEvent","WAWebWamEnumWebcJobResultTypeCode","WAWebWamEnumWebcScenarioType","WAWebWebcJobInfoWamEvent","cr:4324","gkx"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(){this.$1=new Map()}var e=a.prototype;e.logJobCreated=function(a){if(c("gkx")("26258"))return;var b=a.jobName,e=a.jobId,f=a.jobPriority;a=a.pendingJobsCount;var g=c("WAWebBrokerGlobalAppState").getCurrentScenario();b=new(d("WAWebOrchestratorJobInfoEvent").JobInfoEvent)(b,f,a,g);b.logJobAdded();this.$1.set(e,b)};e.logJobStarted=function(a){if(c("gkx")("26258"))return;a=this.$1.get(a);a==null||a.logJobStarted()};e.logJobCompleted=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.COMPLETED)};e.logJobError=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.ERROR)};e.logJobTimeout=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.TIMEOUT)};e.logJobAborted=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.ABORTED)};e.$2=function(a,b){if(c("gkx")("26258"))return;var d=this.$1.get(a);d==null||d.logJobCompleted(b);this.$3(d);this.$1["delete"](a)};e.$3=function(a){if(!a)return;var c=a.jobName,e=a.webcJobCompletedT,f=a.webcJobStartedT,g=a.webcJobAddedT,i=a.jobResultType;e=e-f;f=f-g;g=i===d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.COMPLETED;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestrator] "," execution time: "," ms, waiting time: "," ms, success: ",""])),c,e,f,g);i=new(d("WAWebWebcJobInfoWamEvent").WebcJobInfoWamEvent)({jobName:a.jobName,jobPriority:a.jobPriority,jobResultType:a.jobResultType,pendingJobsCount:a.pendingJobsCount,scenario:a.scenario,webcJobAddedT:a.webcJobAddedT,webcJobCompletedT:a.webcJobCompletedT,webcJobStartedT:a.webcJobStartedT});if(i.scenario===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE){f=(e=b("cr:4324")==null?void 0:b("cr:4324").JOB_EVENT_SAMPLING_RATE[c])!=null?e:1;i.weight=f}i.commit()};return a}();g.JobStatsLogger=a}),98);
__d("WAWebJobOrchestrator",["WAConcurrentBucketJobQueue","WADefaultJobNoQueue","WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebBrokerGlobalAppState","WAWebJobOrchestratorHelper","WAWebOrchestratorJobStatsLogger","WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){var h,i={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[(b=d("WAJobOrchestratorTypes")).JOB_PRIORITY.HIGH,5],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,3],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},j={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[b.JOB_PRIORITY.HIGH,5],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,1],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},k="default",l="bucket";function m(){var a=c("WAWebBrokerGlobalAppState").getCurrentScenario();if(a===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE)return i;return a===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME?j:i}var n=i,o;function p(){o||(o=new(d("WAWebOrchestratorJobStatsLogger").JobStatsLogger)());return o}var q={};function a(a){a===void 0&&(a=!1);a=a?k:l;var b=m(),c;if(q[a]){d("WAWebJobOrchestratorHelper").hasConfigChanged(n,b)&&(d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestrator] config changed "]))),n=b,q[a].updateConfig(b));return q[a]}switch(a){case"bucket":c=new(d("WAConcurrentBucketJobQueue").WAConcurrentBucketJobQueue)();break;default:c=new(d("WADefaultJobNoQueue").WADefaultJobNoQueue)();break}c.init(b,p());q[a]=c;n=b;return c}g.getInstance=a}),98);
__d("WAWebOrchestratorNonPersistedJob",["WAJobOrchestratorTypes","WAWebJobOrchestrator","err"],(function(a,b,c,d,e,f,g){function a(a,b,e){if(typeof b!=="function")throw c("err")("getNonPersistJob got invalid function param");var f=d("WAWebJobOrchestrator").getInstance((e==null?void 0:e.priority)===d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP);return{fireAndForget:function(){var c=arguments;f.enqueue(a,function(){return b.apply(null,c)},e)},waitUntilCompleted:function(){var c=arguments,d=f.enqueue(a,function(){return b.apply(null,c)},e);return d}}}g.createNonPersistedJob=a}),98);
__d("WAWebEmojiCompile",["WATrie","escapeRegex","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){function a(a){a=c("WATrie").fromForwardsStrings(a.sort(function(a,b){return b.length-a.length}).map(function(a){return""+a+i}));return h(null,a,null,0)}function h(a,b,d,e,f){var g=[],k=!1,l=f;if(l==null&&!c("isStringNullOrEmpty")(a))if(e===1){f=j.has(a);f&&(l=!0)}else!c("isStringNullOrEmpty")(d)&&e===2&&(l=j.has(d+a));b.getChildren().forEach(function(b){if(b.prefix===i){k=!0;return}g.push(h(b.prefix,b.node,a,e+1,l))});f=a===String.fromCodePoint(65039)&&d!=null&&l!==!0?String.fromCodePoint(65039)+"?":c("escapeRegex")(a||"");b=g.length===0?"":"(?:"+g.join("|")+")";b&&k&&(b+="?");return""+f+b}var i="\n",j=new Set([String.fromCodePoint(169),String.fromCodePoint(174),String.fromCodePoint(8482),String.fromCodePoint(9823),String.fromCodePoint(9854),String.fromCodePoint(12336)]);g["default"]=a}),98);
__d("filterNulls",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];for(a of a)a!=null&&b.push(a);return b}f["default"]=a}),66);
__d("WAWebVoipGatingUtils",["WAWebABProps","WAWebEnvironment","cr:9565","gkx"],(function(a,b,c,d,e,f,g){b=(b=b("cr:9565"))!=null?b:{};var h=b.getWindowsBuildType;function a(){return c("WAWebEnvironment").isWindows||d("WAWebABProps").getABPropConfigValue("enable_web_calling")&&c("gkx")("11417")}function i(){return c("WAWebEnvironment").isWindows===!0&&h!==void 0&&h()!=="RELEASE"}function e(){return d("WAWebABProps").getABPropConfigValue("calling_lid_version")===1&&d("WAWebABProps").getABPropConfigValue("enable_calling_username")}function f(){return c("WAWebEnvironment").isWindows?i():!1}g.isCallingEnabled=a;g.callLinksEnabledOnWindowsHybrid=i;g.usernameCallingEnabled=e;g.callLinksEnabled=f}),98);
__d("isEmptyObject",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(a in a)return!1;return!0}f["default"]=a}),66);
__d("WAWebOrderStatusButton",["WAWebMsgType"],(function(a,b,c,d,e,f,g){a=function(a){if(a.type!==d("WAWebMsgType").MSG_TYPE.INTERACTIVE)return null;a=(a=a.interactivePayload)==null||(a=a.buttons)==null?void 0:a[0];return h(a)};var h=function(a){if((a==null?void 0:a.name)!=="order_status")return null;a=a==null?void 0:a.buttonParamsJson;if(a==null)return null;try{a=JSON.parse(a);return a}catch(a){return null}};g.getOrderStatusButton=a;g.parseOrderStatusButton=h}),98);
__d("parseJSONMixed",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a==null?null:JSON.parse(a,b)}f["default"]=a}),66);
__d("tryParseJSONMixed",["parseJSONMixed"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("parseJSONMixed")(a,b)}catch(a){return null}}g["default"]=a}),98);
__d("WAWebUserPrefsMultiDeviceDebug",["WAWebUserPrefsDebugKeys","WAWebUserPrefsStore","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(a){return typeof a==="string"?a:void 0}function i(a){return typeof a==="number"?a:void 0}function a(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_READ_RECEIPT,a)}function b(){return c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_READ_RECEIPT)}function e(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_PASSIVE_MODE,a)}function f(){return c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_PASSIVE_MODE)}function j(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_ENABLE_OFFLINE_MOCK,a)}function k(){return!!c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_ENABLE_OFFLINE_MOCK)}function l(a){return c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_OFFLINE_MOCK_TRAFFIC,a)}function m(){return c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_OFFLINE_MOCK_TRAFFIC)}function n(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_DECRYPT_FAIL,a)}function o(){return i(c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_DECRYPT_FAIL))}var p=new Map();function q(a,b){p.set(a.user,b)}function r(a){return(a=p.get(a.user))!=null?a:!1}function s(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_DO_NOT_SEND_RETRY_RECEIPT,a)}function t(){return i(c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_DO_NOT_SEND_RETRY_RECEIPT))}function u(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_ROUTING_TOKEN,a)}function v(){return h(c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_ROUTING_TOKEN))}function w(a){if(a==null){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_ONLY_DEFAULT_BOT_OVERIDE,null);return}var b;a.endsWith("@bot")?b=a:b=a+"@c.us";if(!((a=d("WAWebWidFactory").createWid(b))!=null&&a.isBot()))return;c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_ONLY_DEFAULT_BOT_OVERIDE,b)}function x(){return h(c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_ONLY_DEFAULT_BOT_OVERIDE))}function y(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").DEBUG_IGNORE_PARTICIPANT_ADD,a)}function z(){return i(c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").DEBUG_IGNORE_PARTICIPANT_ADD))}function A(a){c("WAWebUserPrefsStore").set(c("WAWebUserPrefsDebugKeys").LID_MIGRATION_DEBUG_MODE,a)}function B(){return!!c("WAWebUserPrefsStore").get(c("WAWebUserPrefsDebugKeys").LID_MIGRATION_DEBUG_MODE)}g.setDebugReadReceipt=a;g.getDebugReadReceipt=b;g.setDebugPassiveMode=e;g.getDebugPassiveMode=f;g.setDebugEnableOfflineMock=j;g.getDebugEnableOfflineMock=k;g.setDebugOfflineMockTraffic=l;g.getDebugOfflineMockTraffic=m;g.setDebugDecryptFail=n;g.getDebugDecryptFail=o;g.setDebugEncryptFail=q;g.getDebugEncryptFail=r;g.setDebugDoNotSendRetryReceipt=s;g.getDebugDoNotSendRetryReceipt=t;g.setDebugRoutingTokenPref=u;g.getDebugRoutingTokenPref=v;g.setDebugDefaultBotOverride=w;g.getDebugDefaultBotOverride=x;g.setDebugIgnoreParticipantAdd=y;g.getDebugIgnoreParticipantAdd=z;g.setLidMigrationDebugMode=A;g.getLidMigrationDebugMode=B}),98);
__d("WAWebEmojiConst",["$InternalEnum","WAWebAnimatedEmojiGatingUtils","WAWebMobilePlatforms"],(function(a,b,c,d,e,f,g){c=25;e={SMILEYS_PEOPLE:"SMILEYS_PEOPLE",ANIMALS_NATURE:"ANIMALS_NATURE",FOOD_DRINK:"FOOD_DRINK",ACTIVITY:"ACTIVITY",TRAVEL_PLACES:"TRAVEL_PLACES",OBJECTS:"OBJECTS",SYMBOLS:"SYMBOLS",FLAGS:"FLAGS"};f=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS"];var h={APPLE:"APPLE",WHATSAPP:"WHATSAPP"},i={small:20,large:32};b=b("$InternalEnum").Mirrored(["MEDIUM","LARGE","XLARGE","XLARGE_60"]);var j=[].concat(f,["VARIATION"]),k=["\u2764","\u2665",String.fromCodePoint(129294),String.fromCodePoint(128150),String.fromCodePoint(128420),String.fromCodePoint(128154),String.fromCodePoint(128156),String.fromCodePoint(128151),String.fromCodePoint(128147),String.fromCodePoint(128153),String.fromCodePoint(129293),String.fromCodePoint(128155),String.fromCodePoint(128149),String.fromCodePoint(129505),String.fromCodePoint(10084,65039,8205,128293),String.fromCodePoint(129653),String.fromCodePoint(129654),String.fromCodePoint(129655)],l=[String.fromCodePoint(128536),String.fromCodePoint(10084,65039),String.fromCodePoint(128175),String.fromCodePoint(128514),String.fromCodePoint(129315),String.fromCodePoint(128525),String.fromCodePoint(128522),String.fromCodePoint(128526),String.fromCodePoint(129321),String.fromCodePoint(128149),String.fromCodePoint(128521),String.fromCodePoint(10024)],m=[String.fromCodePoint(129671),String.fromCodePoint(128148),String.fromCodePoint(128079),String.fromCodePoint(128557),String.fromCodePoint(128545),String.fromCodePoint(129318,8205,9794,65039),String.fromCodePoint(128293),String.fromCodePoint(128591),String.fromCodePoint(128556),String.fromCodePoint(128517),String.fromCodePoint(129395),String.fromCodePoint(127881),String.fromCodePoint(128532),String.fromCodePoint(128588),String.fromCodePoint(128536),String.fromCodePoint(128546),String.fromCodePoint(129392),String.fromCodePoint(128536),String.fromCodePoint(128558),String.fromCodePoint(128077),String.fromCodePoint(128075),String.fromCodePoint(127922)],n=[String.fromCodePoint(127950),String.fromCodePoint(127950,65039)],o={AnimatedAsset1FA87:"v1_Maracas_1FA87",AnimatedAsset1F494:"v1_Broken_heart_1F494",AnimatedAsset1F44F:"v2_Clapping_hands_1F44F",AnimatedAsset1F62D:"v1_Cry_1F62D",AnimatedAsset1F621:"v1_Enraged_face_1F621",AnimatedAsset1F926:"v1_Face_palm_1F926",AnimatedAsset1F618:"v1_Faceblownbyakiss_1F618",AnimatedAsset1F525:"v2_Fire_1F525",AnimatedAsset1F64F:"v2_Folded_hands_1F64F",AnimatedAsset1F62C:"v1_Grimacing_face_1F62C",AnimatedAsset1F605:"v1_Grinning_face_with_sweat_1F605",AnimatedAsset2764FE0F:"v1_Heart_2764_FE0F",AnimatedAsset1F4AF:"v1_Hundred_points_1F4AF",AnimatedAsset1F602:"v1_LOL_1F602",AnimatedAsset1F973:"v1_Party_1F973",AnimatedAsset1F389:"v2_Party_popper_1F389",AnimatedAsset1F614:"v1_Pensive_face_1F614",AnimatedAsset1F64C:"v2_Raising_hands_1F64C",AnimatedAsset1F923:"v1_ROFL_1F923",AnimatedAsset1F622:"v1_Sad_tear_1F622",AnimatedAsset1F60D:"v1_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F970:"v1_Smiling_face_with_hearts_1F970",AnimatedAsset1F60A:"v1_Smiling_face_with_smiling_eyes_1F60A",AnimatedAsset1F60E:"v1_Smiling_face_with_sunglasses_1F60E",AnimatedAsset1F929:"v1_Star_struck_1F929",AnimatedAsset1F62E:"v1_Surprised_1F62E",AnimatedAsset1F44D:"v1_Thumbs_up_1F44D",AnimatedAsset1F495:"v1_Two_hearts_1F495",AnimatedAsset1F44B:"v1_Waving_hand_1F44B",AnimatedAsset1F609:"v1_Winking_face_1F609",AnimatedAsset1F3B2:"v1_Dice_1_1F3B2",AnimatedAsset2728:"v1_Sparkles_2728",AnimatedAsset1F3CE:"v1_race_car_1F3CE"},p={AnimatedAsset1FA87:"v1_Maracas_1FA87",AnimatedAsset1F494:"v1_Broken_heart_1F494",AnimatedAsset1F44F:"v2_iOS_clapping_hands_1F44F",AnimatedAsset1F62D:"v1_Cry_1F62D",AnimatedAsset1F621:"v2_iOS_enraged_face_1F621",AnimatedAsset1F926:"v2_iOS_face_palm_man",AnimatedAsset1F618:"v1_Faceblownbyakiss_1F618",AnimatedAsset1F525:"v1_Fire_1F525",AnimatedAsset1F64F:"v2_iOS_folded_hands_1F64F",AnimatedAsset1F62C:"v1_Grimacing_face_1F62C",AnimatedAsset1F605:"v2_iOS_grinning_face_with_sweat_1F605",AnimatedAsset2764FE0F:"v1_Heart_2764_FE0F",AnimatedAsset1F4AF:"v1_Hundred_points_1F4AF",AnimatedAsset1F602:"v1_LOL_1F602",AnimatedAsset1F973:"v2_iOS_party",AnimatedAsset1F389:"v2_iOS_party_popper_1F389",AnimatedAsset1F614:"v1_Pensive_face_1F614",AnimatedAsset1F64C:"v2_Raising_hands_1F64C",AnimatedAsset1F923:"v2_iOS_rofl_1F923",AnimatedAsset1F622:"v2_iOS_sad_tear_1F622",AnimatedAsset1F60D:"v1_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F970:"v2_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F60A:"v1_Smiling_face_with_smiling_eyes_1F60A",AnimatedAsset1F60E:"v1_Smiling_face_with_sunglasses_1F60E",AnimatedAsset1F929:"v3_iOS_star_struck_1F929",AnimatedAsset1F62E:"v1_Surprised_1F62E",AnimatedAsset1F44D:"v1_Thumbs_up_1F44D",AnimatedAsset1F495:"v1_Two_hearts_1F495",AnimatedAsset1F44B:"v1_Waving_hand_1F44B",AnimatedAsset1F609:"v2_iOS_winking_face_1F609",AnimatedAsset1F3B2:"v1_Dice_1_1F3B2",AnimatedAsset2728:"v1_Sparkles_2728",AnimatedAsset1F3CE:"v1_race_car_1F3CE"};function q(a){a=[d("WAWebMobilePlatforms").PLATFORMS.IPAD,d("WAWebMobilePlatforms").PLATFORMS.IPHONE,d("WAWebMobilePlatforms").PLATFORMS.SMBI].includes(a)?p:o;return[[String.fromCodePoint(128536),""+a.AnimatedAsset1F618],[String.fromCodePoint(10084,65039),""+a.AnimatedAsset2764FE0F],[String.fromCodePoint(128175),""+a.AnimatedAsset1F4AF],[String.fromCodePoint(128514),""+a.AnimatedAsset1F602],[String.fromCodePoint(129315),""+a.AnimatedAsset1F923],[String.fromCodePoint(128525),""+a.AnimatedAsset1F60D],[String.fromCodePoint(128522),""+a.AnimatedAsset1F60A],[String.fromCodePoint(128526),""+a.AnimatedAsset1F60E],[String.fromCodePoint(129321),""+a.AnimatedAsset1F929],[String.fromCodePoint(128149),""+a.AnimatedAsset1F495],[String.fromCodePoint(128521),""+a.AnimatedAsset1F609],[String.fromCodePoint(127922),""+a.AnimatedAsset1F3B2],[String.fromCodePoint(129671),""+a.AnimatedAsset1FA87],[String.fromCodePoint(128148),""+a.AnimatedAsset1F494],[String.fromCodePoint(128079),""+a.AnimatedAsset1F44F],[String.fromCodePoint(128557),""+a.AnimatedAsset1F62D],[String.fromCodePoint(128545),""+a.AnimatedAsset1F621],[String.fromCodePoint(129318,8205,9794,65039),""+a.AnimatedAsset1F926],[String.fromCodePoint(128293),""+a.AnimatedAsset1F525],[String.fromCodePoint(128591),""+a.AnimatedAsset1F64F],[String.fromCodePoint(128556),""+a.AnimatedAsset1F62C],[String.fromCodePoint(128517),""+a.AnimatedAsset1F605],[String.fromCodePoint(129395),""+a.AnimatedAsset1F973],[String.fromCodePoint(127881),""+a.AnimatedAsset1F389],[String.fromCodePoint(128532),""+a.AnimatedAsset1F614],[String.fromCodePoint(128588),""+a.AnimatedAsset1F64C],[String.fromCodePoint(128546),""+a.AnimatedAsset1F622],[String.fromCodePoint(129392),""+a.AnimatedAsset1F970],[String.fromCodePoint(128558),""+a.AnimatedAsset1F62E],[String.fromCodePoint(128077),""+a.AnimatedAsset1F44D],[String.fromCodePoint(128075),""+a.AnimatedAsset1F44B],[String.fromCodePoint(10024),""+a.AnimatedAsset2728],[String.fromCodePoint(127950),""+a.AnimatedAsset1F3CE],[String.fromCodePoint(127950,65039),""+a.AnimatedAsset1F3CE]]}function r(){var a=[];d("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiSet1Enabled()&&(a=[].concat(a,l));d("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiFinalSetEnabled()&&(a=[].concat(a,m));d("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiMercedesRacingEnabled()&&(a=[].concat(a,n));return a}function a(a){var b=r();a=q(a);a=a.filter(function(a){a=a[0];return b.includes(a)});return a}g.BUCKET_SIZE=c;g.CATEGORIES=e;g.ORDERED_CATEGORY_IDS=f;g.EMOJI_TYPE=h;g.EMOJI_WIDTH=i;g.LargeEmojiSize=b;g.CATEGORY_ORDERING=j;g.HEART_EMOJIS=k;g.getSupportedAnimatedEmojis=r;g.getSupportedAnimatedEmojisAssetIdsMapping=a}),98);
__d("WAWebGetEmojiPathExperimental",["gkx"],(function(a,b,c,d,e,f,g){d=""+window.location.origin;var h=c("gkx")("26258")?"https://web.whatsapp.com/emoji/v1":d+"/emoji/v1",i=16,j=0,k=1;function a(a,b,c){return l(a,c,b,"png")}function l(a,b,c,d){a=m(a);return n("single",c,b,a+"."+d)}function m(a){return Array.from(a).map(function(a){return a.codePointAt(0).toString(16).padStart(6,"0")}).join("_")}function b(a,b,c,d){return n("sprite",a,c,b+"."+d)}function n(a,b,c,d){return[h,i,j,k,a,b.toLowerCase().slice(0,1),c,d].join("/")}g.getGlyphExperimentalPath=a;g.getEmojiSpritesExperimentalPath=b}),98);
__d("WAWebEmoji",["invariant","WABitArray","WANullthrows","WAOnceWithReset","WAWebABProps","WAWebEmojiCompile","WAWebEmojiConst","WAWebGetEmojiPathExperimental","lodash","objectEntries"],(function(a,b,c,d,e,f,g,h){var i="\u25a1",j="\u200d",k=["\ud83c\udffb","\ud83c\udffc","\ud83c\udffd","\ud83c\udffe","\ud83c\udfff"],l=new RegExp(k.join("|"),"g");b="\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1";var m="\ud83d\udc6d",n="\ud83d\udc6c",o="\ud83d\udc6b";e=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128104);f=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128105);var p=String.fromCodePoint(128104,8205,10084,65039,8205,128139,8205,128104),q=String.fromCodePoint(129489,8205,10084,65039,8205,128139,8205,129489),r=String.fromCodePoint(128143),s=String.fromCodePoint(128105,8205,10084,65039,8205,128104),t=String.fromCodePoint(128105,8205,10084,65039,8205,128105),u=String.fromCodePoint(128104,8205,10084,65039,8205,128104),v=String.fromCodePoint(129489,8205,10084,65039,8205,129489),w=String.fromCodePoint(128145),x=String.fromCodePoint(129309),y=new Set([b,m,n,o,e,f,p,r,s,t,u,w,x]),z=d("WAWebEmojiConst").HEART_EMOJIS.map(function(a){return a}),A=new Set(["\ufe00","\ufe01","\ufe02","\ufe03","\ufe04","\ufe05","\ufe06","\ufe07","\ufe08","\ufe09","\ufe0a","\ufe0b","\ufe0c","\ufe0d","\ufe0e","\ufe0f"]),B=[127950,65039].map(function(a){return String.fromCodePoint(a)}).join(""),C=[127950,8205,128960].map(function(a){return String.fromCodePoint(a)}).join(""),D=[127950,8205,128961].map(function(a){return String.fromCodePoint(a)}).join(""),E=function(a){return a.replace(/\uFE0F/g,"")},F=c("lodash").memoize(function(a,b){function c(d){d===void 0&&(d=[]);if(d.length===b)return[d];var e=[];for(var f=0;f<a.length;f++){var g=[].concat(d);g.push(a[f]);e=e.concat(c(g))}return e}return c()},function(a,b){return a.toString()+b}),G=function(){function a(){var a=this,b;this.skinToneVariations=k;this.emojiRegex=function(){var b=a._createEmojiRegexIfNeeded();b.lastIndex=0;return b};this._createEmojiRegexIfNeeded=(b=c("WAOnceWithReset"))(function(){var b=a._getEmojiRegexSource();return new RegExp("("+b+")","g")});this.onlyEmojiRegex=function(){var b=a._createOnlyEmojiRegexIfNeeded();b.lastIndex=0;return b};this._createOnlyEmojiRegexIfNeeded=b(function(){var b=a._getEmojiRegexSource();return new RegExp("^("+b+")+$","g")});this.splitEmojis=function(b){return a.containsOnlyEmoji(b)===!1?null:b.split(a.emojiRegex()).filter(Boolean)};this.extractAllEmojis=function(b){return a.containsEmoji(b)===!1?null:Array.from(b.matchAll(a.emojiRegex())).filter(Boolean).map(function(a){return a[1]})};this.containsEmoji=function(b){return a.emojiRegex().test(b)};this.containsOnlyEmoji=function(b){return a.onlyEmojiRegex().test(b)};this.matchLargeEmojiPattern=function(b){if(b==null)return;if(b.length>50||b.includes(" "))return null;var c=a._getLargeEmojisRegex();c=c.exec(b);return c?c.filter(Boolean).slice(1):null};this.normalizeEmojiFromString=function(b){return a.normalizeEmoji(b)};this.normalizeEmoji=function(b){b=E(b);var c=a._getDerivedMaps();c=c.unqualifiedToNormalizedEmoji;return c.get(b)};this.normalizeAllEmojis=c("lodash").memoize(function(b){return b?b.replace(a.emojiRegex(),function(b,c){return A.has(c)?"":(b=a.normalizeEmoji(c))!=null?b:i}):""});this.getSkinToneVariant=function(b,c){var d=a._getBaseToSkinToneEmojis();d=d.get(b);if(d==null)return null;b=H(c);return d.get(b)};this._getDerivedMaps=b(function(){var b=a._getConfig(),d=b.orderedEmojis;b=b.legacyToEmoji;var e=new Map(),f=new Map(),g=new Map(),h=0;d.forEach(function(a,b){if(a===""||a==null)return;a=Array.isArray(a)?a:[a];a.forEach(function(a){f.set(a,b);var c=E(a);g.set(c,a)});e.set(b,h);h++});c("objectEntries")(b).forEach(function(a){var b=a[0];a=a[1];f.set(b,a);a=E(b);g.set(a,b)});return{emojiToGlyphId:f,glyphIdToIndex:e,unqualifiedToNormalizedEmoji:g}});this._getBaseToSkinToneEmojis=b(function(){var b=a._getDerivedMaps();b=b.emojiToGlyphId;var c=new Map(),d=function(){var b,d=e.replace(l,function(a){b==null&&(b=[]);b.push(a);return""});if(b==null)return 0;var f=b,g;d==="\ud83d\udc69"+j+"\ud83e\udd1d"+j+"\ud83d\udc69"?g=m:d==="\ud83d\udc68"+j+"\ud83e\udd1d"+j+"\ud83d\udc68"?g=n:d==="\ud83d\udc69"+j+"\ud83e\udd1d"+j+"\ud83d\udc68"?g=o:d===v?g=w:d===q?g=r:d===String.fromCodePoint(129777,8205,129778)?g=x:g=d;d=a.normalizeEmoji(g);if(d==null)return 0;g=c.get(d);g==null&&(g=new Map(),g.set("",d),c.set(d,g));d=H(f);g.set(d,e)};for(var e of b.keys()){b=d();if(b===0)continue}return c});this._getSkinToneEmojisToBase=b(function(){var b=new Map();for(var c of a._getBaseToSkinToneEmojis().entries()){var d=c[0],e=c[1];for(e of e.values())b.set(e,d)}return b});this._getEmojiRegexSource=b(function(){var b=a._getDerivedMaps();b=b.emojiToGlyphId;return c("WAWebEmojiCompile")([].concat(Array.from(b.keys()),Array.from(A)).filter(Boolean))});this._createLargeEmojisRegexIfNeeded=b(function(){var b=a._getEmojiRegexSource();return new RegExp("^("+b+")("+b+")?("+b+")?$")});this.getEmojisInCategory=function(b){return(b=a._getConfig().categorizedEmojis[b])!=null?b:[]};this._getEmojiToCategory=b(function(){var b=a._getConfig(),c=b.categorizedEmojis,e=new Map();Object.keys(c).forEach(function(b){var f=d("WAWebEmojiConst").CATEGORY_ORDERING.indexOf(b);c[b].forEach(function(b){b=a.normalizeEmoji(b);if(b==null)return;e.set(b,f)})});return e});this._applyGlyphTransformations=function(a){if(a===B)if(d("WAWebABProps").getABPropConfigValue("custom_racing_emoji_feb2025"))return D;else if(d("WAWebABProps").getABPropConfigValue("custom_racing_emoji"))return C;return a};this.getGlyphId=function(b){b=a.normalizeEmoji(b);if(b==null)return null;b=a._applyGlyphTransformations(b);var c=a._getDerivedMaps();c=c.emojiToGlyphId;return c.get(b)};this.getGlyphPath=function(b,c){b=a.normalizeEmojiFromString(b);if(b==null)return null;b=a._applyGlyphTransformations(b);var e=a._getDerivedMaps();e=e.emojiToGlyphId;e=e.get(b);return e==null?null:d("WAWebGetEmojiPathExperimental").getGlyphExperimentalPath(b,a._getConfig().emojiType,c)};this.getSpritesPath=function(a,b,c,e){return d("WAWebGetEmojiPathExperimental").getEmojiSpritesExperimentalPath(a,b,c,e)};this.isGlyphCached=function(b){b=a._getGlyphIndex(b);return a._getCachedGlyphs().get(b)};this.markGlyphCached=function(b){b=a._getGlyphIndex(b);a._getCachedGlyphs().set(b)};this._getCachedGlyphs=b(function(){return new(c("WABitArray"))(a._getGlyphCount())});this.getCssClasses=function(b,c){c===void 0&&(c="small");return["b"+a.getBucket(b),c==="small"?"emoji":"emojik",a._getConfig().emojiType===d("WAWebEmojiConst").EMOJI_TYPE.APPLE?"apple":"wa"].join(" ")};this.getStyle=function(b,c){c===void 0&&(c="small");b=a._getCoordinates(b,c);c=b.xpos;b=b.ypos;return{backgroundPosition:"-"+c+"px -"+b+"px"}};this.getBucket=function(b){b=a._getGlyphIndex(b);b=Math.floor(b/d("WAWebEmojiConst").BUCKET_SIZE);return""+b};this.getHeartEmojis=b(function(){return z.map(a.normalizeEmoji).filter(Boolean)});this._getLastBucketId=b(function(){var b=a._getGlyphCount();return b-b%d("WAWebEmojiConst").BUCKET_SIZE});this._getLastBucketCols=b(function(){return Math.floor(Math.sqrt(a._getGlyphCount()-a._getLastBucketId()))})}var b=a.prototype;b.configure=function(a){if(a===this._config)return;this._config=a;this.getHeartEmojis.reset();this._createEmojiRegexIfNeeded.reset();this._createLargeEmojisRegexIfNeeded.reset();this._createOnlyEmojiRegexIfNeeded.reset();this._getEmojiRegexSource.reset();this._getCachedGlyphs.reset();this._getSkinToneEmojisToBase.reset();this._getBaseToSkinToneEmojis.reset();this._getEmojiToCategory.reset();this._getLastBucketId.reset();this._getLastBucketCols.reset();this._getDerivedMaps.reset()};b._getConfig=function(){this._config!=null||h(0,56544);return this._config};b.isEmoji=function(a){return this.normalizeEmoji(a)!=null};b.getSkinToneBase=function(a){a=this.normalizeEmoji(a);return a==null?null:(a=this._getSkinToneEmojisToBase().get(a))!=null?a:null};b._getLargeEmojisRegex=function(){var a=this._createLargeEmojisRegexIfNeeded();a.lastIndex=0;return a};b._getGlyphCount=function(){var a=this._getDerivedMaps();a=a.glyphIdToIndex;return a.size};b._getCoordinates=function(a,b){a=this._getGlyphIndex(a);var c=a%d("WAWebEmojiConst").BUCKET_SIZE;a=a>=this._getLastBucketId()?this._getLastBucketCols():Math.floor(Math.sqrt(d("WAWebEmojiConst").BUCKET_SIZE));b=d("WAWebEmojiConst").EMOJI_WIDTH[b];var e=Math.floor(c/a);c=Math.floor(c%a);a=c*b;c=e*b;return{xpos:a,ypos:c,width:b}};b._getGlyphIndex=function(a){var b=this._getDerivedMaps();b=b.glyphIdToIndex;return c("WANullthrows")(b.get(a))};b.getEmojiAggregate=function(a){a=this.getNormalizedOrTofu(a);var b=this.getSkinToneBase(a);return b!=null?b:E(a)};b.getNormalizedOrTofu=function(a){var b=this.normalizeEmojiFromString(a);return!b?i:a};return a}();function H(a){return a.every(function(b){return b===a[0]})?a[0]:a.join("")}function a(a){return y.has(a)}G=new G();g.OPEN_BOX_CHAR=i;g.PEOPLE_HOLDING_HANDS=b;g.WOMEN_HOLDING_HANDS=m;g.MEN_HOLDING_HANDS=n;g.WOMAN_AND_MAN_HOLDING_HANDS=o;g.KISS_WOMAN_MAN=e;g.KISS_WOMAN_WOMAN=f;g.KISS_MAN_MAN=p;g.KISS=r;g.COUPLE_WITH_HEART_WOMAN_MAN=s;g.COUPLE_WITH_HEART_WOMAN_WOMAN=t;g.COUPLE_WITH_HEART_MAN_MAN=u;g.COUPLE_WITH_HEART=w;g.HANDSHAKE=x;g.getPermutations=F;g.isBaseMultiSkinToneEmoji=a;g.EmojiUtil=G}),98);
__d("WAWebBizParseProductGraphql_product.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},h=[b,g];return{argumentDefinitions:[],kind:"Fragment",metadata:{mask:!1},name:"WAWebBizParseProductGraphql_product",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_sanctioned",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},b,c,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shimmed_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},d,{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[a,e,f],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaVideo",kind:"LinkedField",name:"videos",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"original_video_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnail_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogProductVariantInfo",kind:"LinkedField",name:"variant_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XWACatalogVariantListingDetails",kind:"LinkedField",name:"listing_details",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"multi_price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lowest_price",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogVariantAvailability",kind:"LinkedField",name:"availability",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAVariantAvailabilityListing",kind:"LinkedField",name:"listing",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_available",storageKey:null},{alias:null,args:null,concreteType:"XWAVariantAvailabilityListingOption",kind:"LinkedField",name:"options",plural:!0,selections:h,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_id",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogVariantTypes",kind:"LinkedField",name:"types",plural:!0,selections:[b,{alias:null,args:null,concreteType:"XWACatalogVariantTypeOption",kind:"LinkedField",name:"options",plural:!0,selections:[g,{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"thumbnail_media",plural:!1,selections:[a,{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImageOriginalDimensions",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},e,f],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWACatalogVariantProperties",kind:"LinkedField",name:"variant_properties",plural:!0,selections:h,storageKey:null}],storageKey:null}],type:"XWACatalogProduct",abstractKey:null}}();e.exports=a}),null);
__d("WAWebBizParseProductGraphql",["WANullthrows","WAWebBizCartConstants","WAWebBizGatingUtils","WAWebBizParseProductGraphql_product.graphql","WAWebProductTypes.flow","WAWebSignedShimmedUrl","WAWebSyntheticCountryCode"],(function(a,b,c,d,e,f,g){var h=["status_info","sale_price","product_availability","compliance_info"],i,j={AVAILABLE_FOR_ANOTHER_POSTCODE:d("WAWebProductTypes.flow").ProductAvailability.AVAILABLE_FOR_ANOTHER_POSTCODE,IN_STOCK:d("WAWebProductTypes.flow").ProductAvailability.IN_STOCK,OUT_OF_STOCK:d("WAWebProductTypes.flow").ProductAvailability.OUT_OF_STOCK};function a(a){var b,e,f=a.status_info,g=a.sale_price,i=a.product_availability,k=a.compliance_info;a=babelHelpers.objectWithoutPropertiesLoose(a,h);b=(b=(b=a.media)==null?void 0:b.images)!=null?b:[];var l=b[0];b=b.slice(1);g=babelHelpers["extends"]({id:c("WANullthrows")(a.id),retailer_id:(e=a.retailer_id)!=null?e:"",name:c("WANullthrows")(a.name),description:(e=a.description)!=null?e:"",url:(e=a.url)!=null?e:"",currency:a.currency,price:a.price,is_hidden:a.is_hidden==="ISHIDDEN_TRUE",is_sanctioned:(e=a.is_sanctioned)!=null?e:!1,max_available:(e=a.max_available)!=null?e:d("WAWebBizCartConstants").CART_ITEM_MAX_QUANTITY,availability:i&&i in j?j[i]:d("WAWebProductTypes.flow").ProductAvailability.UNKNOWN},(g==null?void 0:g.price)!=null?babelHelpers["extends"]({sale_price:g.price},g.start_date!=null&&g.end_date!=null?{sale_start_date:g.start_date,sale_end_date:g.end_date}:null):null,{checkmark:a.belongs_to==="true",image_hashes_for_whatsapp:((i=(e=a.media)==null?void 0:e.images)!=null?i:[]).map(function(a){return c("WANullthrows")(a.id)}),image_cdn_urls:l?[{key:"requested",value:c("WANullthrows")(l.request_image_url)},{key:"full",value:c("WANullthrows")(l.original_image_url)}]:[],additional_image_cdn_urls:b.map(function(a){return[{key:"requested",value:c("WANullthrows")(a.request_image_url)},{key:"full",value:c("WANullthrows")(a.original_image_url)}]}),whatsapp_product_can_appeal:(f==null?void 0:f.can_appeal)==="true",capability_to_review_status:[{key:"WHATSAPP",value:(g=f==null?void 0:f.status)!=null?g:"APPROVED"}],videos:(e=a.media)==null||(e=e.videos)==null?void 0:e.map(function(a){return{id:c("WANullthrows")(a.id),original_video_url:c("WANullthrows")(a.original_video_url),thumbnail_url:c("WANullthrows")(a.thumbnail_url)}}),variant_info:a.variant_info!=null?{listing_details:a.variant_info.listing_details?{description:a.variant_info.listing_details.description,multi_price:a.variant_info.listing_details.multi_price,lowest_price:a.variant_info.listing_details.lowest_price}:void 0,availability:a.variant_info.availability?{listing:a.variant_info.availability.listing.map(function(a){return{is_available:a.is_available,options:a.options.map(function(a){return{name:a.name,value:a.value}}),product_id:a.product_id}})}:void 0,types:(l=(i=a.variant_info)==null?void 0:i.types.map(function(a){return{name:a.name,options:a.options.map(function(a){var b;a.thumbnail_media&&(b={id:a.thumbnail_media.id,original_dimensions:a.thumbnail_media.original_dimensions?{height:a.thumbnail_media.original_dimensions.height,width:a.thumbnail_media.original_dimensions.width}:void 0,original_image_url:a.thumbnail_media.original_image_url,request_image_url:a.thumbnail_media.request_image_url});return{value:a.value,thumbnail_media:b}})}}))!=null?l:[],variant_properties:(f=(b=a.variant_info)==null?void 0:b.variant_properties.map(function(a){return{name:a.name,value:a.value}}))!=null?f:[]}:void 0});if(a.compliance_category==="COMPLIANCECATEGORY_COUNTRYORIGINEXEMPT")if(k!=null&&k.country_code_origin!=null&&k.importer_address==null&&d("WAWebBizGatingUtils").isCountryOfOriginEnabled()){g.compliance_info={country_code_origin:(e=k.country_code_origin)!=null?e:void 0};g.importer_information_exempt=!0}else k==null&&d("WAWebBizGatingUtils").isCountryOfOriginEnabled()?g.importer_information_exempt=!0:g.compliance_info={country_code_origin:d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable};else if(k!=null){i=k.importer_address;if(!i){g.compliance_info={country_code_origin:(l=k.country_code_origin)!=null?l:void 0,importer_name:(b=k.importer_name)!=null?b:void 0,importer_address:void 0}}else{g.compliance_info={country_code_origin:(f=k.country_code_origin)!=null?f:void 0,importer_name:(e=k.importer_name)!=null?e:void 0,importer_address:{street1:c("WANullthrows")(i==null?void 0:i.street1),street2:(l=i==null?void 0:i.street2)!=null?l:void 0,postal_code:(b=i==null?void 0:i.postal_code)!=null?b:void 0,city:c("WANullthrows")(i==null?void 0:i.city),region:(f=i==null?void 0:i.region)!=null?f:void 0,country_code:c("WANullthrows")(i==null?void 0:i.country_code)}}}}a.shimmed_url!=null&&(g.signedShimmedUrl=d("WAWebSignedShimmedUrl").asSignedShimmedUrl(a.shimmed_url));return g}g.parseProductGraphQL=a}),98);
__d("WAWebBizCatalogManagementParseProductGraphql",["WAWebBizCatalogManagementParseProductGraphql_product.graphql","WAWebBizCatalogParseProduct","WAWebBizGatingUtils","WAWebBizParseProductGraphql","WAWebProductTypes.flow","WAWebSyntheticCountryCode","err","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){var h;f=h!==void 0?h:h=b("WAWebBizCatalogManagementParseProductGraphql_product.graphql");function a(a){var b;return d("WAWebBizParseProductGraphql").parseProductGraphQL({id:a.id,name:a.name,description:a.description,url:a.url,shimmed_url:a.shimmed_url,price:a.price,currency:a.currency,retailer_id:a.retailer_id,belongs_to:a.belongs_to,status_info:{can_appeal:(b=a.status_info)==null?void 0:b.can_appeal,status:(b=a.status_info)==null?void 0:b.status},product_availability:a.availability,max_available:a.max_available,sale_price:{start_date:(b=a.sale_price)==null?void 0:b.start_date,end_date:(b=a.sale_price)==null?void 0:b.end_date,price:(b=a.sale_price)==null?void 0:b.price},media:{images:(b=(b=a.media)==null?void 0:b.images.map(function(a){return{id:a.id,original_image_url:a.original_image_url,request_image_url:a.request_image_url}}))!=null?b:[],videos:((b=(b=a.media)==null?void 0:b.videos)!=null?b:[]).map(function(a){return{id:a.id,original_video_url:a.original_video_url,thumbnail_url:a.thumbnail_url}})},compliance_info:a.compliance_info!=null?{country_code_origin:a.compliance_info.country_code_origin,importer_name:a.compliance_info.importer_name,importer_address:a.compliance_info.importer_address!=null?{street1:a.compliance_info.importer_address.street1,street2:a.compliance_info.importer_address.street2,postal_code:a.compliance_info.importer_address.postal_code,city:a.compliance_info.importer_address.city,region:a.compliance_info.importer_address.region,country_code:a.compliance_info.importer_address.country_code}:null}:null,compliance_category:d("WAWebProductTypes.flow").mapComplianceCategoryToWASchema(a.compliance_category),is_hidden:d("WAWebProductTypes.flow").mapIsHiddenToWASchema(a.is_hidden),is_sanctioned:a.is_sanctioned,variant_info:a.variant_info})}function e(a){if(a.imageCdnUrl==null)throw c("err")("productModelToGraphQLInput: imageCdnUrl is null");var b=[{url:a.imageCdnUrl}];a.additionalImageCdnUrl!=null&&b.push.apply(b,a.additionalImageCdnUrl.map(function(a){return{url:a}}));b={name:a.name,media:{image:b},is_hidden:a.isHidden};c("isStringNullOrEmpty")(a.description)||(b.description=a.description);c("isStringNullOrEmpty")(a.url)||(b.url=a.url);c("isStringNullOrEmpty")(a.retailerId)||(b.retailer_id=a.retailerId);a.priceAmount1000!=null&&(b.currency=a.currency,b.price=a.priceAmount1000.toString());a.salePriceAmount1000!=null&&(b.sale_price=a.salePriceAmount1000.toString());a.videos!=null&&(b.media.video=a.videos.map(function(a){return{url:a.original_video_url}}));var e=a.complianceInfo&&i(a.complianceInfo);e!=null&&(b.compliance_info=e);(((e=a.complianceInfo)==null?void 0:e.countryCodeOrigin)===d("WAWebSyntheticCountryCode").SyntheticCountryCode.NotApplicable||a.importerInformationExempt&&d("WAWebBizGatingUtils").isCountryOfOriginEnabled())&&(b.compliance_category=d("WAWebProductTypes.flow").ProductComplianceCategory.CountryOriginExempt);return b}function i(a){var b=d("WAWebBizCatalogParseProduct").scanComplianceInfoForMissingData(a),e=b.isExempt,f=b.hasCountryCodeOrigin,g=b.hasImporterName;b=b.hasImporterAddress;if(e||!(f||g||b))return;e={country_code_origin:f&&a.countryCodeOrigin!=null?a.countryCodeOrigin:""};g&&(e.importer_name=a.importerName);if(b){f={country_code:(g=(f=a.importerAddress)==null?void 0:f.countryCode)!=null?g:"",city:(f=(b=a.importerAddress)==null?void 0:b.city)!=null?f:"",street1:(b=(g=a.importerAddress)==null?void 0:g.street1)!=null?b:""};c("isStringNullOrEmpty")((g=a.importerAddress)==null?void 0:g.street2)||(f.street2=a.importerAddress.street2);c("isStringNullOrEmpty")((b=a.importerAddress)==null?void 0:b.region)||(f.region=a.importerAddress.region);c("isStringNullOrEmpty")((g=a.importerAddress)==null?void 0:g.postalCode)||(f.postal_code=a.importerAddress.postalCode)}return e}g.PARSE_PRODUCT_FRAGMENT=f;g.parseProductGraphQL=a;g.productModelToGraphQLInput=e}),98);
__d("WAWebCTWABizAccessTokenNonceManager",["WACustomError","WALogger","WAPromiseRetryLoop","WAPromiseTimeout","WAQplTypes","WAResolvable","WASmaxBizAccessTokenRequestSilentNonceRPC","WAWebBizGatingUtils","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){var h,i=250,j=1e3,k=null;function a(a){if(k!=null&&a!==!0)return k.promise;var b=d("WAWebBizGatingUtils").adAccountTokenNoncePushWaitTimeoutSeconds(),c=d("WAWebBizGatingUtils").adAccountTokenNonceMaxRetries();d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{"int":{fetch_nonce_timeout:b,fetch_nonce_max_retries:c}});var e=c;a=function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{"int":{fetch_nonce_retry:c-e}});return d("WAPromiseTimeout").promiseTimeout(l(),b*1e3).then(function(b){a(b)})["catch"](function(a){var b=e>0;e--;if(!b){a instanceof d("WACustomError").TimeoutError&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.ABORTED),k=null);throw a}})};a=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"fetchAdAccountNonce",timer:{algo:{type:"exponential",first:i},max:j},code:a});a.start();return a.promise()}function l(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_start");var a=k=new(d("WAResolvable").Resolvable)();return d("WASmaxBizAccessTokenRequestSilentNonceRPC").sendRequestSilentNonceRPC({}).then(function(b){switch(b.name){case"RequestSilentNonceResponseError":d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.FAIL);k=null;return{type:"error"};case"RequestSilentNonceResponseRecoveryRequired":d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{bool:{fetch_nonce_recovery_needed:!0}});d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.FAIL);k=null;return{type:"recovery-required",emailMask:b.value.resultEmail};default:b.name;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_start");return a.promise}})["catch"](function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.FAIL);k=null;throw a})}function b(a){k==null?(d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Received a biz token nonce without asking for it"]))),k=null,d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.DROPPED)):(k.resolve({type:"success",nonce:a}),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,d("WAQplTypes").QuickLogActionType.SUCCESS))}function c(a){k==null&&(k=new(d("WAResolvable").Resolvable)()),k.resolve({type:"success",nonce:m(a)})}function e(){k=null}function m(a){return a}function f(){return d("WAWebBizGatingUtils").adAccountTokenNoncePushWaitTimeoutSeconds()*(d("WAWebBizGatingUtils").adAccountTokenNonceMaxRetries()+1)}g.fetchNonce=a;g.setNonceFromPushNotification=b;g.setNonceFromRecoveryCode=c;g.markNonceAsUsed=e;g.castToNonce=m;g.getMaximumNonceFetchTimeoutSeconds=f}),98);
__d("WAWebWamEnumBusinessType",[],(function(a,b,c,d,e,f){a=Object.freeze({SMB:1,API_DC:2,API:3});f.BUSINESS_TYPE=a}),66);
__d("WAWebWamEnumGraphqlCatalogEndpoint",[],(function(a,b,c,d,e,f){a=Object.freeze({GET_CATALOG:1,GET_PRODUCT:2,GET_PRODUCT_LIST:3,GET_COLLECTIONS:4,GET_SINGLE_COLLECTION:5,GET_CATEGORIES:6,GET_VARIANTS:7,GET_PROMOTIONS:8,CREATE_COLLECTION:9,GET_PUBLIC_KEY:10,VERIFY_POSTCODE:11});f.GRAPHQL_CATALOG_ENDPOINT=a}),66);
__d("WAWebWamEnumGraphqlRequestResult",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,FAILURE:2});f.GRAPHQL_REQUEST_RESULT=a}),66);
__d("WAWebGraphqlCatalogRequestWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBusinessType","WAWebWamEnumGraphqlCatalogEndpoint","WAWebWamEnumGraphqlRequestResult"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({GraphqlCatalogRequest:[3206,{businessJid:[4,d("WAWebWamCodegenUtils").TYPES.STRING],businessType:[5,d("WAWebWamEnumBusinessType").BUSINESS_TYPE],graphqlCatalogEndpoint:[1,d("WAWebWamEnumGraphqlCatalogEndpoint").GRAPHQL_CATALOG_ENDPOINT],graphqlErrorCode:[3,d("WAWebWamCodegenUtils").TYPES.INTEGER],graphqlRequestResult:[2,d("WAWebWamEnumGraphqlRequestResult").GRAPHQL_REQUEST_RESULT]},[1,1,1],"private",0]},{GraphqlCatalogRequest:[]});g.GraphqlCatalogRequestWamEvent=a}),98);
__d("WAWebCatalogEventLogger",["WAWebGraphqlCatalogRequestWamEvent","WAWebWamEnumGraphqlCatalogEndpoint","WAWebWamEnumGraphqlRequestResult"],(function(a,b,c,d,e,f,g){a=function(a){var b=new(d("WAWebGraphqlCatalogRequestWamEvent").GraphqlCatalogRequestWamEvent)({graphqlCatalogEndpoint:a});return{success:function(){b.set({graphqlErrorCode:-1,graphqlRequestResult:d("WAWebWamEnumGraphqlRequestResult").GRAPHQL_REQUEST_RESULT.SUCCESS}),b.commit()},failure:function(a){a=a[0];b.set({graphqlErrorCode:a.code,graphqlRequestResult:d("WAWebWamEnumGraphqlRequestResult").GRAPHQL_REQUEST_RESULT.FAILURE});b.commit()}}};g.GRAPHQL_CATALOG_ENDPOINT=d("WAWebWamEnumGraphqlCatalogEndpoint").GRAPHQL_CATALOG_ENDPOINT;g.createCatalogEventLogger=a}),98);
__d("WAWebChatConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1,INCOMPLETE:2,NOT_INCLUDED_IN_HIST_SYNC:3,COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY:4});c=60*5*1e3;f.ConversationEndOfHistoryTransferModelPropType=a;f.FTS_TTL=c}),66);
__d("WAWebCommonAdEntryPointsTypes",[],(function(a,b,c,d,e,f){function a(a){return a}f.asAdEntryPointContent=a}),66);
__d("WAWebCommonAdsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){e=b("$InternalEnum").Mirrored(["ACTIVE","AUTHENTICATION_NEEDED","CREATING","EXTENDABLE","FINISHED","LIMITED_DELIVERY","NOT_DELIVERING","PAUSED","PENDING","REJECTED","REVIEW_NEEDED","SCHEDULED","ERROR","UNKNOWN"]);function a(a){return a}function c(a){return a}function d(a,b,c){c===void 0&&(c="WAA");return{token:a,bp_id:b,type:c}}f.BoostingStatusEnum=e;f.asAdId=a;f.asAdCampaignGroupId=c;f.asAdAccountToken=d}),66);
__d("WAWebCommunityGatingUtils",["WAWebABProps","WAWebGroupType","WAWebMobilePlatforms"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebMobilePlatforms").isSMB()?d("WAWebABProps").getABPropConfigValue("parent_group_create_enabled_for_smb_on_web"):!0}function b(){return d("WAWebABProps").getABPropConfigValue("parent_group_link_limit")+1}function c(){return d("WAWebABProps").getABPropConfigValue("parent_group_link_limit_community_creation")+1}function e(){return d("WAWebABProps").getABPropConfigValue("community_admin_promotion_one_time_prompt")}function f(){return d("WAWebABProps").getABPropConfigValue("parent_group_create_privacy")}function h(){return d("WAWebABProps").getABPropConfigValue("parent_group_subgroup_filter")}function i(){return d("WAWebABProps").getABPropConfigValue("group_mentions_in_subgroups")}function j(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_added_groups_m1")}function k(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_added_groups_m2")}function l(a){return a==null?!1:(a.groupType===d("WAWebGroupType").GroupType.LINKED_SUBGROUP||a.groupType===d("WAWebGroupType").GroupType.LINKED_GENERAL_GROUP)&&a.getParentGroupChat()!=null}function m(){return d("WAWebABProps").getABPropConfigValue("community_general_chat_UI_enabled")}function n(){return d("WAWebABProps").getABPropConfigValue("community_general_chat_create_enabled")}function o(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_suggest_existing_m3_receiver")}function p(){return d("WAWebABProps").getABPropConfigValue("parent_group_allow_member_suggest_existing_m3_sender")}function q(){return d("WAWebABProps").getABPropConfigValue("web_communities_general_chat_v_2")}function r(){return d("WAWebABProps").getABPropConfigValue("enable_community_suspend_and_appeals")}function s(){return d("WAWebABProps").getABPropConfigValue("improve_subgroup_activation_subgroup_poll_interval")}g.communitiesCreationEnabled=a;g.getParentGroupLinkLimit=b;g.getParentGroupLinkLimitCommunityCreation=c;g.communityAdminPromotionOneTimePromptEnabled=e;g.communityCreatePrivacyEnabled=f;g.subgroupFilterEnabled=h;g.groupMentionsInSubgroupsEnabled=i;g.memberAddedGroupsM1Enabled=j;g.memberSuggestedGroupsEnabled=k;g.shouldShowNewSubgroupIdentity=l;g.communityGeneralChatUIEnabled=m;g.communityGeneralChatCreateEnabled=n;g.memberSuggestedGroupsM3ReceiverEnabled=o;g.memberSuggestedGroupsM3SenderEnabled=p;g.communityGeneralChatV2Enabled=q;g.isCommunitySuspendAppealEnabled=r;g.communityPollIntervalTimeInSeconds=s}),98);
__d("WAWebUpdateLidMetadataApi",["WAWebApiContact","WAWebBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.updates;var b=a.map(function(a){var b=a.lid;a=a.data;b={lid:b};a.shareOwnPn!=null&&(b.shareOwnPn=a.shareOwnPn);a.displayNameLID!=null&&(b.displayNameLID=a.displayNameLID);a.requestedPnTimestamp!=null&&(b.requestedPnTimestamp=a.requestedPnTimestamp);a.username!=null&&(b.username=a.username);return b});yield d("WAWebBackendApi").frontendSendAndReceive("bulkUpdateLidContactState",{lidContactDataMappings:b});yield d("WAWebApiContact").updateLidMetadata(a)});return h.apply(this,arguments)}g.updateLidMetadata=a}),98);
__d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob",["Promise","WAWebDBCreateLidPnMappings","WAWebEnvironment","WAWebRunInBatches","WAWebUpdateLidMetadataApi","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){c("WAWebEnvironment").isWindows?yield d("WAWebRunInBatches").runInBatches(a,function(a){return j(a,b)}):yield j(a,b)});return i.apply(this,arguments)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[],f=[];for(a of a){if(a==null)continue;var g=a.id,i=d("WAWebWidFactory").asUserWidOrThrow(g);if(i.isLid()){var j=a.displayName,k=a.phoneNumber;j!=null&&e.push({lid:i,data:{displayNameLID:j}});k!=null&&f.push({lid:i,pn:d("WAWebWidFactory").asUserWidOrThrow(k)})}else{j=a.lid;j!=null&&f.push({lid:d("WAWebWidFactory").asUserLidOrThrow(j),pn:d("WAWebWidFactory").asUserWidOrThrow(g)})}}yield (h||(h=b("Promise"))).all([e.length>0?d("WAWebUpdateLidMetadataApi").updateLidMetadata({updates:e}):null,f.length>0?d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:f,flushImmediately:c,learningSource:"other"}):null].filter(Boolean))});return k.apply(this,arguments)}g.createOrReplaceDisplayNamesAndLidPnMappingsInBatches=a;g.createOrReplaceDisplayNamesAndLidPnMappings=j}),98);
__d("WAWebDBBulkPersistContact",["WABatcher","WALogger","WAWebLidAwareContactsDB","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i,j=d("WABatcher").batch({delayMs:3e3},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield l(a);return a.map(function(a){return void 0})});return function(b){return a.apply(this,arguments)}}());function a(a,b){return j(babelHelpers["extends"]({},b,{id:a.toJid()}))}function k(a){return Array.from(a.reduce(function(a,b){var c;a.set(b.id,babelHelpers["extends"]({},(c=a.get(b.id))!=null?c:{},b));return a},new Map()).values())}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistContactChanges: processing "," records"])),a.length);var b=k(a);d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistContactChanges: persisting "," records"])),a.length);yield c("WAWebLidAwareContactsDB").bulkCreateOrMerge(b,"DBBulkPersistContact.bulkPersistContactChanges")});return m.apply(this,arguments)}g.persistContactUpdateBatched=a}),98);
__d("WAWebDBCommunityTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SubGroupLink","SiblingGroupLink","SubGroupUnlink","SiblingGroupUnlink"]);f.CommunityLinkOperation=a}),66);
__d("WAWebGroupsParticipantsApi",["WAWebAdvSyncDeviceListApi","WAWebDBGroupParticipant","WAWebDBParticipantTypes","WAWebGroupType","WAWebGroupUtils","WAWebOfflineDeviceCache","WAWebPnhCagIncognito","WAWebSchemaGroupMetadata","WAWebSchemaParticipant","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group,c=a.participants,e=a.isOffline,f=a.groupInfo;a=a.skipDeviceSync;a=a===void 0?!1:a;var g=[],h=[];c.forEach(function(a){a.isAdmin&&g.push(a.id),a.isSuperAdmin&&h.push(a.id)});var i=d("WAWebGroupUtils").amIGroupAdmin(g),j=!1;f!=null&&(j=Boolean(f.incognito)&&Boolean(f.defaultSubgroup));j=j?d("WAWebPnhCagIncognito").augmentedCagGroupParticipantList(i,c):c.map(function(a){a=a.id;return a});a?i=j:i=(yield q(j,e));return d("WAWebDBGroupParticipant").replaceParticipants({group:b,participants:c,admins:g,superAdmins:h,deviceIds:i,groupInfo:f})});return h.apply(this,arguments)}function e(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group,e=a.participants,f=a.isOffline;a=a.reason;var g=b.toString(),h=!1,i=[],j=d("WAWebUserPrefsMeUser").getMePnUserOrThrow(),k=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(g));if(k==null)throw c("err")("addParticipants: groupMetadataRecord is null");var l=Boolean(k.defaultSubgroup),m=k.isLidAddressingMode===!0,n=e.some(function(a){return a.id.isLid()});g=(yield d("WAWebSchemaParticipant").getParticipantTable().get(g));g!=null&&(i=g.admins.map(function(a){return d("WAWebWidFactory").createWid(a)}),h=d("WAWebGroupUtils").amIGroupAdmin(i)||a===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_PROMOTE);if(n&&!l&&!m)return;g=e.map(function(a){a=a.id;return a});l&&(g=a===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_PROMOTE?[].concat(i,g,[j]):d("WAWebPnhCagIncognito").augmentedCagGroupParticipantList(h,e));n=(yield q(g,f));return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.ADD,participants:e,deviceIds:n},k,f)});return i.apply(this,arguments)}function f(a){var b=a.group,c=a.participants,e=a.timestamp,f=a.author,g=a.reason,h=a.groupMetadata;a=a.isOffline;return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.REMOVE,participants:c,timestamp:e,author:f,reason:g},h,a)}function j(a){var b=a.group,c=a.participants,e=a.groupMetadata;a=a.isOffline;return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.DEMOTE,participants:c},e,a)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group,c=a.participants,e=a.groupMetadata;a=a.isOffline;var f=b.toString(),g=d("WAWebUserPrefsMeUser").getMePnUserOrThrow(),h=c.some(function(a){return g.equals(a.id)}),i;if(h){h=(yield d("WAWebSchemaParticipant").getParticipantTable().get(f));if(h!=null){f=Boolean(e.defaultSubgroup);f&&(f=h.admins.map(function(a){return d("WAWebWidFactory").createWid(a)}),i=(yield q([].concat(f,[g]),a)))}}return d("WAWebDBGroupParticipant").updateDBParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.PROMOTE,participants:c,deviceIds:i},e,a)});return l.apply(this,arguments)}function m(a){var b=a.group,c=a.participants;a=a.isOffline;return d("WAWebDBGroupParticipant").updateCommunityParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE,participants:c},a)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.group;a=a.newSuperAdmin;return d("WAWebDBGroupParticipant").setDBGroupSuperAdmin(b,a)});return o.apply(this,arguments)}function p(a){var b=a.group,c=a.participants;a=a.isOffline;return d("WAWebDBGroupParticipant").updateCommunityParticipants(b,{action:d("WAWebDBParticipantTypes").PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE,participants:c},a)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);if(b===!0){a.forEach(function(a){d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(String(a))});return a}b=(yield d("WAWebAdvSyncDeviceListApi").syncAndGetDeviceList(a));var c=[];b.forEach(function(b,e){if(!b)c.push(a[e]);else{var f=b.id;e=b.devices;c=c.concat(e.map(function(a){return d("WAWebWidFactory").createDeviceWidFromDeviceListPk(f,a.id,a.isHosted)}))}});return c});return r.apply(this,arguments)}function s(a){return d("WAWebSchemaParticipant").getParticipantTable().bulkGet(a.map(function(a){return a.toString()}))}function t(a){return d("WAWebSchemaParticipant").getParticipantTable().get(a.toString())}function u(a){a=a==null?void 0:a.participants;return a!=null&&a.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createWid(a))})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return u(yield t(a))});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield s(a)).map(u)});return y.apply(this,arguments)}g.updateParticipants=a;g.addParticipants=e;g.removeParticipants=f;g.demoteParticipants=j;g.promoteParticipants=k;g.promoteCommmunityParticipants=m;g.setGroupSuperAdmin=n;g.demoteCommmunityParticipants=p;g.bulkGetParticipants=s;g.getParticipants=t;g.checkMyMembership=v;g.bulkCheckMyMembership=x}),98);
__d("WAWebDBCommunity",["Promise","WABatcher","WALogger","WAWebDBCommunityTypes","WAWebGroupsParticipantsApi","WAWebSchemaChat","WAWebSchemaGroupMetadata","WAWebSchemaUnjoinedSubgroupMetadata","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["bulkPersistCommunityLink"]))).devConsole(a);var c=new Map(),e=new Map();a.forEach(function(a){a.subgroups.forEach(function(a){e.set(String(a.id),null)});switch(a.action){case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupLink:case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupUnlink:c.set(String(a.chatId),null);break;default:return}});(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkGet(Array.from(c.keys()))).forEach(function(a){a&&a.parentGroup!=null&&c.set(a.id,String(a.parentGroup))});(yield d("WAWebSchemaChat").getChatTable().bulkGet(Array.from(e.keys()))).forEach(function(a){a&&e.set(a.id,a)});var f=new Map(),g=new Map(),j=new Set(),k=function(a,b,c){b.forEach(function(b){var d=String(b.id),h=e.get(d);if(h!=null&&!h.isReadOnly)f.set(d,{id:d,parentGroup:c?a:void 0});else if(c){j["delete"](d);b={id:d,subject:b.subject,subjectTime:(h=b.subjectTime)!=null?h:0,parentGroup:a};h=g.get(d);h&&h.subjectTime>b.subjectTime&&(b.subject=h.subject,b.subjectTime=h.subjectTime);g.set(d,b)}else g["delete"](d),j.add(d)})};a.forEach(function(a){var b=null,e=!1;switch(a.action){case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupLink:b=c.get(String(a.chatId));e=!0;break;case d("WAWebDBCommunityTypes").CommunityLinkOperation.SiblingGroupUnlink:b=c.get(String(a.chatId));e=!1;break;case d("WAWebDBCommunityTypes").CommunityLinkOperation.SubGroupLink:b=String(a.chatId);e=!0;break;case d("WAWebDBCommunityTypes").CommunityLinkOperation.SubGroupUnlink:b=String(a.chatId),e=!1}b!=null&&k(b,a.subgroups,e)});yield (i||(i=b("Promise"))).all([d("WAWebSchemaGroupMetadata").getGroupMetadataTable().bulkCreateOrMerge(Array.from(f.values())),d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkRemove(Array.from(j)),d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkGet(Array.from(g.keys())).then(function(a){a.forEach(function(a){if(!a)return;var b=g.get(a.id);if(!b)return;a.subjectTime!=null&&a.subjectTime>b.subjectTime&&(b.subjectTime=a.subjectTime,b.subject=a.subject)});return d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().bulkCreateOrMerge(Array.from(g.values()).map(function(a){return babelHelpers["extends"]({},a)}))})])});return k.apply(this,arguments)}var l=function(){var a=5e3;return d("WABatcher").batch({delayMs:a},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield j(a);return(i||(i=b("Promise"))).resolve(a.map(function(a){return void 0}))});return function(b){return a.apply(this,arguments)}}())}();function a(a,b,c,d){d===void 0&&(d=!1);a={chatId:a,subgroups:b,action:c};return d?l(a):j([a])}function m(a){return d("WAWebSchemaGroupMetadata").getGroupMetadataTable().equals(["parentGroup"],a.toString())}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield m(a)).find(function(a){return a.defaultSubgroup===!0})});return o.apply(this,arguments)}function c(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield n(a));return a==null?null:d("WAWebWidFactory").createWid(a.id)});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield m(a));a=(yield d("WAWebGroupsParticipantsApi").bulkCheckMyMembership(b.map(function(a){a=a.id;return d("WAWebWidFactory").createWid(a)}))).map(function(a,c){return[b[c],a]});return a.filter(function(a){a=a[1];return a}).map(function(a){a=a[0];return a})});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield q(a)).map(function(a){a=a.id;return d("WAWebWidFactory").createWid(a)})});return t.apply(this,arguments)}function e(a){return d("WAWebSchemaUnjoinedSubgroupMetadata").getUnjoinedSubgroupMetadataTable().equals(["parentGroup"],a.toString())}function f(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.parentGroup;if(b==null)return!1;a=d("WAWebWidFactory").createWid(a.id);b=(yield s(d("WAWebWidFactory").createWid(b)));return b.length===1&&b[0].equals(a)});return u.apply(this,arguments)}g.persistCommunityLink=a;g.getDefaultSubgroup=c;g.getJoinedSubgroupsMetadata=q;g.getJoinedSubgroups=s;g.getUnjoinedSubgroupsMetadata=e;g.isLastJoinedSubgroup=f}),98);
__d("WAWebDBRevokeInviteV4",["WAWebApiGroupInviteV4Store","WAWebBackendApi","WAWebDBMsgUtils","WAWebDBProcessMessage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield d("WAWebApiGroupInviteV4Store").revokeGroupInvites(a,b,c,e));b=(a==null?void 0:a.map(function(a){return a.id}))||[];c=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(b,function(a){a.inviteCodeExp="0"}));for(e of c)d("WAWebBackendApi").frontendFireAndForget("expireGroupInviteV4",{inviteMsgId:e.id}),d("WAWebDBProcessMessage").updateExistingMessages([e],e.id.remote)});return h.apply(this,arguments)}g.revokeGroupInviteV4=a}),98);
__d("WAWebDirectConnectionUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}f.stringToCertificateString=a;f.certificateStringToString=b}),66);
__d("WAWebFailureErrorCodes",[],(function(a,b,c,d,e,f){a={REASON_GENERIC_FAILURE:400,REASON_NOT_AUTHORIZED:401,REASON_TEMP_BANNED:402,REASON_LOCKED:403,REASON_CLIENT_TOO_OLD:405,REASON_BANNED:406,REASON_BAD_USER_AGENT:409,REASON_INTERNAL_SERVER_ERROR:500,REASON_EXPERIMENTAL:501,REASON_SERVICE_UNAVAILABLE:503};f.FAILURE_REASON=a}),66);
__d("WAWebUserPrefsCTWA",["WATimeUtils","WAWebBizGatingUtils","WAWebCommonAdEntryPointsTypes","WAWebCommonAdsTypes","WAWebPonyfillsCryptoRandomUUID","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function h(){var a=c("WAWebPonyfillsCryptoRandomUUID")();c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_FLOW_ID_KEY,a);return a}function a(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_FLOW_ID_KEY);(a==null||typeof a!=="string")&&(a=h());return a}function b(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY);(a==null||typeof a!=="number")&&(a=1);c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,a+1);return a}function e(){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,1)}function f(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AD_ENTRY_POINTS_CONFIGURATION);if(b==null||typeof b!=="object")return null;var e=b.configuration,f=b.ts;b=b.locale;if(typeof f!=="number"||typeof b!=="string")return null;f=!d("WATimeUtils").isInFuture(d("WATimeUtils").futureUnixTime(d("WAWebBizGatingUtils").adEntryPointsConfigurationFetchThreshold()/1e3,d("WATimeUtils").castToUnixTime(f)));if(b!==a)return null;if(e==null||typeof e!=="object")return null;b=Object.keys(e).reduce(function(a,b){var c=e[b];if(c==null||typeof c!=="object")return a;var f=c.shouldShow,g=c.content;c=c.subContent;if(typeof f!=="boolean")return a;f={shouldShow:f};if(g!=null){if(typeof g!=="string")return a;f.content=d("WAWebCommonAdEntryPointsTypes").asAdEntryPointContent(g)}if(c!=null){if(typeof c!=="string")return a;f.subContent=d("WAWebCommonAdEntryPointsTypes").asAdEntryPointContent(c)}a[b]=f;return a},{});return{configuration:b,isExpired:f}}function i(a,b){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ENTRY_POINTS_CONFIGURATION,{configuration:b,ts:d("WATimeUtils").unixTime(),locale:a})}function j(){if(!d("WAWebBizGatingUtils").adAccountTokenStoringEnabled())return null;var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN),b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_BP_ID);if(a==null||typeof a!=="string")return null;(b==null||typeof b!=="string")&&(b="");return d("WAWebCommonAdsTypes").asAdAccountToken(a,b)}function k(a){if(!d("WAWebBizGatingUtils").adAccountTokenStoringEnabled())return;c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN,a.token);c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_BP_ID,a.bp_id)}function l(){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN,null),c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_BP_ID,null)}function m(){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_TOKEN,null),c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_BP_ID,null)}function n(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_TOKEN),b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_BP_ID);return a==null||typeof a!=="string"||b==null||typeof b!=="string"?null:d("WAWebCommonAdsTypes").asAdAccountToken(a,b,"FB")}function o(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_TOKEN,a.token),c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_BP_ID,a.bp_id)}g.generateAdCreationFlowId=h;g.getAdCreationFlowId=a;g.getAndIncrementAdCreationSequenceNumber=b;g.resetAdCreationSequenceNumber=e;g.getAdEntryPointsConfiguration=f;g.setAdEntryPointsConfiguration=i;g.getAdAccountToken=j;g.setAdAccountToken=k;g.clearAdAccountToken=l;g.clearFBIdentity=m;g.getFBIdentity=n;g.setFbIdentity=o}),98);
__d("WAWebFetchAdAccountToken",["WAQplTypes","WAResolvable","WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC","WAWebCTWABizAccessTokenNonceManager","WAWebCommonAdsTypes","WAWebFailureErrorCodes","WAWebGraphQLServerError","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsCTWA"],(function(a,b,c,d,e,f,g){var h=null,i=1;function a(a){if(h!=null){if(a!==!0)return h.promise;h=null}h;var b=h=new(d("WAResolvable").Resolvable)(),c=d("WAWebUserPrefsCTWA").getAdAccountToken();if(c!=null&&c.bp_id!==""&&a!==!0){b.resolve({type:"success",token:c});return b.promise}d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_start");void j(i).then(function(a){a.type==="success"?d("WAWebUserPrefsCTWA").setAdAccountToken(a.token):(a.type,h=null),b.resolve(a)})["catch"](function(a){h=null,b.reject(a)});return b.promise}function b(){h=null,d("WAWebUserPrefsCTWA").clearAdAccountToken()}function c(a){if(a instanceof d("WAWebGraphQLServerError").GraphQLServerError){a=a.source.errors.some(function(a){return d("WAWebGraphQLServerError").GraphQLErrorCode.cast(a.code)===d("WAWebGraphQLServerError").GraphQLErrorCode.INVALID_ACCESS_TOKEN||a.code===d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_GENERIC_FAILURE});return a}return!1}function j(a){return d("WAWebCTWABizAccessTokenNonceManager").fetchNonce().then(function(b){switch(b.type){case"error":case"recovery-required":return b;default:b.type;return k(b.nonce).then(function(b){return b.type==="incorrect-nonce"&&a>0?j(a-1).then(function(a){if(a.type==="success")return a;a.type;return b}):b})}})}function k(a){d("WAWebCTWABizAccessTokenNonceManager").markNonceAsUsed();return d("WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC").sendGetAccessTokenAndSessionCookiesRPC({codeElementValue:a}).then(function(a){switch(a.name){case"GetAccessTokenAndSessionCookiesResponseTooManyAttempts":n();return{type:"too-many-attempts"};case"GetAccessTokenAndSessionCookiesResponseIncorrectNonce":n();return{type:"incorrect-nonce"};case"GetAccessTokenAndSessionCookiesResponseError":n();return{type:"error"};default:a.name;m();return{type:"success",token:d("WAWebCommonAdsTypes").asAdAccountToken(a.value.accessTokenElementValue,a.value.businessPersonId)}}})["catch"](function(a){n();throw a})}function l(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_end"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,a)}function m(){l(d("WAQplTypes").QuickLogActionType.SUCCESS)}function n(){l(d("WAQplTypes").QuickLogActionType.FAIL)}function e(){return d("WAWebCTWABizAccessTokenNonceManager").getMaximumNonceFetchTimeoutSeconds()*(i+1)}g.FETCH_AD_ACCOUNT_TOKEN_MAX_RETRIES=i;g.fetchToken=a;g.markTokenAsInvalid=b;g.hasGraphQLAuthError=c;g.getMaximumAdAccountFetchTimeoutSeconds=e}),98);
__d("WAWebFtsStorageConsts",[],(function(a,b,c,d,e,f){a="fts-storage";f.DATABASE_NAME=a}),66);
__d("WAWebFtsStorageUtils",["invariant","Promise","WAWebFtsStorageConsts","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j=null;function a(){var a=new(c("WAWebIdb"))(d("WAWebFtsStorageConsts").DATABASE_NAME);j=new(d("WAWebStorage").Storage)(a)}function e(){j!=null||h(0,56265);return j}function f(){return j==null?(i||(i=b("Promise"))).reject(c("err")("[fts-storage] Storage should be created first before being destroyed")):j.purge().then(function(){j=null})["catch"](function(a){j=null;throw a})}g.createStorage=a;g.getStorage=e;g.destroyStorage=f}),98);
__d("WAWebFtsStorageVersions",["WAWebFtsStorageUtils"],(function(a,b,c,d,e,f,g){var h=8;function a(){return d("WAWebFtsStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebFtsStorageUtils").getStorage().versions.version(1)}function c(){return d("WAWebFtsStorageUtils").getStorage().versions.version(2)}function e(){return d("WAWebFtsStorageUtils").getStorage().versions.version(3)}function f(){return d("WAWebFtsStorageUtils").getStorage().versions.version(4)}function i(){return d("WAWebFtsStorageUtils").getStorage().versions.version(5)}function j(){return d("WAWebFtsStorageUtils").getStorage().versions.version(6)}function k(){return d("WAWebFtsStorageUtils").getStorage().versions.version(7)}function l(){return d("WAWebFtsStorageUtils").getStorage().versions.version(8)}g.versionToRollout=h;g.ftsV1IndexCreateTable=a;g.manifestCreateTable=b;g.purgeRangeQueueCreateTable=c;g.ftsV2IndexCreateTable=e;g.ftsV2TokenToPrefixesCreateTable=f;g.ftsV3IndexCreateTable=i;g.ftsV1DeleteAndDeprecate=j;g.ftsV2Delete=k;g.ftsV2DeleteTokenPrefixes=l}),98);
__d("WAWebSchemaFtsPurgeRangeQueue",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addCompositePrimaryKey,j="fts-purge-range-queue";function a(){d("WAWebFtsStorageUtils").getStorage().add(j).version(d("WAWebFtsStorageVersions").purgeRangeQueueCreateTable(),[i(["chatId","tsOfLastMessage","startRowId","endRowId"]),h("offset")]).view(function(a){return a})}function b(){return d("WAWebFtsStorageUtils").getStorage().table(j)}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaFtsV1Index",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b=d("WAWebStorageMutationBuilder").columnBuilder();var h=b.addColumn,i=b.addUserDefinedPrimaryKey,j=b.addArrayIndex,k="fts-v1-index";function a(){d("WAWebFtsStorageUtils").getStorage().add(k).version(d("WAWebFtsStorageVersions").ftsV1IndexCreateTable(),[i("token"),h("ids"),j("ids"),h("prefixes"),j("prefixes")])["delete"](d("WAWebFtsStorageVersions").ftsV1DeleteAndDeprecate())}g.deprecateTable=a}),98);
__d("WAWebSchemaFtsV2Index",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){b=d("WAWebStorageMutationBuilder").columnBuilder();var h=b.addColumn,i=b.addCompositePrimaryKey,j=b.addIndex,k=b.addCompositeIndex,l="fts-v2-index";function a(){d("WAWebFtsStorageUtils").getStorage().add(l).version(d("WAWebFtsStorageVersions").ftsV2IndexCreateTable(),[i(["id","chatId","token"]),j("id"),j("chatId"),j("token"),k(["chatId","token"]),h("timestamp"),k(["id","token"])])["delete"](d("WAWebFtsStorageVersions").ftsV2Delete())}g.addTable=a}),98);
__d("WAWebSchemaFtsV2TokenPrefixes",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="fts-v2-token-prefixes";b=d("WAWebStorageMutationBuilder").columnBuilder();var i=b.addColumn,j=b.addUserDefinedPrimaryKey,k=b.addArrayIndex;function a(){d("WAWebFtsStorageUtils").getStorage().add(h).version(d("WAWebFtsStorageVersions").ftsV2TokenToPrefixesCreateTable(),[j("token"),i("prefixes"),k("prefixes")])["delete"](d("WAWebFtsStorageVersions").ftsV2DeleteTokenPrefixes())}g.addTable=a}),98);
__d("WAWebSchemaFtsV3Index",["WAFtsV3IndexEntry","WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){c=d("WAWebStorageMutationBuilder").columnBuilder();var h=c.addColumn,i=c.addAutoIncrementingPrimaryKey,j=c.addIndex,k=c.addArrayIndex,l="fts-v3-index";function a(){d("WAWebFtsStorageUtils").getStorage().add(l).version(d("WAWebFtsStorageVersions").ftsV3IndexCreateTable(),[i("ftsRowId"),h("id"),j("id"),h("chatId"),j("chatId"),h("timestamp"),h("prefixes"),k("prefixes")]).view(function(a){return a?d("WAFtsV3IndexEntry").buildDBEntry(a.ftsRowId,a.id,a.chatId,a.timestamp,a.prefixes):null})}function b(){return d("WAWebFtsStorageUtils").getStorage().table(l)}g.addTable=a;g.getTable=b}),98);
__d("WAWebSchemaManifest",["WAWebFtsStorageUtils","WAWebFtsStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){var h="manifest";c=Object.freeze({PREV_VERSION:"prev.version",CURR_VERSION:"curr.version",NEXT_VERSION:"next.version"});e=d("WAWebStorageMutationBuilder").columnBuilder();var i=e.addColumn,j=e.addUserDefinedPrimaryKey;function a(){d("WAWebFtsStorageUtils").getStorage().add(h).version(d("WAWebFtsStorageVersions").manifestCreateTable(),[j("key"),i("tokenizerVersion"),i("schemaVersion"),i("isCurrent"),i("lastMsgKeyViaFullIndexer"),i("isFullIndexingComplete")]).view(function(a){return a||null})}function b(){return d("WAWebFtsStorageUtils").getStorage().table(h)}g.ManifestKeys=c;g.addTable=a;g.getTable=b}),98);
__d("WAWebFtsStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebFtsStorageConsts","WAWebFtsStorageUtils","WAWebSchemaFtsPurgeRangeQueue","WAWebSchemaFtsV1Index","WAWebSchemaFtsV2Index","WAWebSchemaFtsV2TokenPrefixes","WAWebSchemaFtsV3Index","WAWebSchemaManifest","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i==null&&(yield d("WAWebDbRolloutUtil").loadSchemaVersions(),d("WAWebFtsStorageUtils").createStorage(),d("WAWebSchemaManifest").addTable(),d("WAWebSchemaFtsV1Index").deprecateTable(),d("WAWebSchemaFtsV2Index").addTable(),d("WAWebSchemaFtsV2TokenPrefixes").addTable(),d("WAWebSchemaFtsPurgeRangeQueue").addTable(),d("WAWebSchemaFtsV3Index").addTable(),i=d("WAWebFtsStorageUtils").getStorage().initialize()["catch"](function(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]))).verbose().devConsole(a).sendLogs("Failed to initialize fts storage",{sendLogsType:d("WALogger").SendLogsType.EXTREMELY_BAD_USER_EXPERIENCE_SAD});throw a}));return i});return j.apply(this,arguments)}function e(){return d("WAWebFtsStorageUtils").destroyStorage()["catch"](function(){return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))(d("WAWebFtsStorageConsts").DATABASE_NAME)["delete"]())})["finally"](function(){i=null;return d("WAWebDexieCastTypes").dexieCastToPromise(new(c("WAWeb-dexie"))("fts-storage-dogfooding")["delete"]())})}function f(){i=null}g.getManifestTable=d("WAWebSchemaManifest").getTable;g.getPurgeRangeQueueTable=d("WAWebSchemaFtsPurgeRangeQueue").getTable;g.getIndexV3Table=d("WAWebSchemaFtsV3Index").getTable;g.initialize=a;g.destroy=e;g.clearInitializePromise=f}),98);
__d("WAWebGroupGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("enable_group_exit_experience")}function b(){return d("WAWebABProps").getABPropConfigValue("group_description_length")}function c(){return d("WAWebABProps").getABPropConfigValue("enable_group_exit_experience_logging")}function e(){return d("WAWebABProps").getABPropConfigValue("group_max_subject")}function f(){return d("WAWebABProps").getABPropConfigValue("web_group_info_query_participants_phash_pass")}function h(){return d("WAWebABProps").getABPropConfigValue("pending_group_requests_persistent_banner")}g.isGroupExitExperienceEnabled=a;g.getGroupDescriptionLength=b;g.isGroupExitExperienceLoggingEnabled=c;g.getGroupMaxSubject=e;g.isPassingParticipantsPhashToGroupInfoQueryEnabled=f;g.isPersistentPendingJoinRequestsBannerEnabled=h}),98);
__d("WAWebGroupsQueryApi",["WALogger","WATimeUtils","WAWebCountriesUtils","WAWebJidToWid","WAWebSchemaGroupMetadata","WAWebUsernameGatingUtils","WAWebWidFactory","err"],(function(a,b,c,d,e,f,g){var h;function i(a){if(!a)return null;var b=a.bodyElementValue,c=a.id,e=a.participant,f=a.t;a=a.participantIdentityMixin;b={desc:b,descId:c,descOwner:e!=null?d("WAWebJidToWid").userJidToUserWid(e):void 0,descTime:d("WATimeUtils").castToUnixTime(f)};c=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled();if(c){var g;b.descOwnerUsername=a==null||(g=a.participantUsernameMixin)==null?void 0:g.participantUsername}e=d("WAWebUsernameGatingUtils").lidGroupMigrationNonMemberIQEnabled();if(e){var h;f=a==null||(h=a.participantPNMixin)==null?void 0:h.participantPn;b.descOwnerPn=f!=null?d("WAWebJidToWid").userJidToUserWid(f):void 0}return b}function j(a){if(!a)return null;a=a.expiration;return{ephemeralDuration:a}}function k(a){if(a==null)return null;var b=a.expiration;a=a.type;return{growthLockExpiration:b,growthLockType:a}}function l(a){return a==null?null:{parentGroup:d("WAWebJidToWid").groupJidToWid(a.jid),parentGroupSubject:a.subject}}function m(a){switch(a.name){case"PhoneNumber":case"PhoneNumberAndUsernameAtt":return d("WAWebJidToWid").userJidToUserWid(a.value.phoneNumber);default:a.name;return null}}function n(a){if(!d("WAWebUsernameGatingUtils").usernameDisplayedEnabled())return null;switch(a.name){case"UsernameAtt":case"PhoneNumberAndUsernameAtt":return a.value.username;default:a.name;return null}}function o(a){return a.map(function(a){var b;if(a.groupInfoParticipantMixins.name==="GroupInfoParticipantAdmin"){var c=a.groupInfoParticipantMixins.value.type;c;b=!0;c=c==="superadmin"}else a.groupInfoParticipantMixins.name,b=!1,c=!1;a=a.groupInfoParticipantMixins.value.participantMixins;if(a.name==="ParticipantWithJid")return{isAdmin:b,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(a.value.jid)};else if(a.name==="ParticipantWithJidAndDisplayName")return{isAdmin:b,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(a.value.jid),displayName:a.value.displayName};else if(a.name==="ParticipantWithJidLidAndDisplayName")return{isAdmin:b,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(a.value.jid),lid:d("WAWebJidToWid").userJidToUserWid(a.value.lid),displayName:a.value.displayName};else if(a.name==="ParticipantWithJidAndLid")return{isAdmin:b,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(a.value.jid),lid:d("WAWebJidToWid").userJidToUserWid(a.value.lid)};else if(a.name==="ParticipantWithJidAndIdentity")return{isAdmin:b,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(a.value.jid),phoneNumber:m(a.value.identityTypes),username:n(a.value.identityTypes)};a.name;return{isAdmin:b,isSuperAdmin:c,id:d("WAWebJidToWid").userJidToUserWid(a.value.jid),lid:null,displayName:a.value.displayName,phoneNumber:m(a.value.identityTypes),username:n(a.value.identityTypes)}})}function p(a){var b=a.creator;a=a.groupCreatorIdentityMixin;var c,e;if(d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()){var f,g;c=a==null||(f=a.groupCreatorUsernameMixin)==null?void 0:f.creatorUsername;e=a==null||(g=a.groupCreatorCountryCodeMixin)==null?void 0:g.creatorCountryCode}var h=d("WAWebUsernameGatingUtils").lidGroupMigrationNonMemberIQEnabled(),i;if(h){var j;i=a==null||(j=a.groupCreatorPhoneNumberMixin)==null?void 0:j.creatorPn}return{creator:b!=null?d("WAWebJidToWid").userJidToUserWid(b):void 0,creatorUsername:c,creatorCountryCode:e!=null?d("WAWebCountriesUtils").asISOCountryCode(e):null,creatorPn:i!=null?d("WAWebJidToWid").userJidToUserWid(i):void 0}}function q(a,b){var c;if(a==null)return{subjectOwner:void 0,subjectOwnerUsername:void 0,subjectOwnerPn:void 0};a=d("WAWebJidToWid").userJidToUserWid(a);var e=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()?b==null||(c=b.subjectOwnerUsernameMixin)==null?void 0:c.sOUsername:void 0,f=d("WAWebUsernameGatingUtils").lidGroupMigrationNonMemberIQEnabled(),g;if(f){var h;f=b==null||(h=b.subjectOwnerPhoneNumberMixin)==null?void 0:h.sOPn;g=f!=null?d("WAWebJidToWid").userJidToUserWid(f):void 0}return{subjectOwner:a,subjectOwnerUsername:e,subjectOwnerPn:g}}function a(a,b){var c=[];b.forEach(function(b){b=b.groupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup;a==="per_group_dirty_recovery"&&b.name==="TruncatedGroupInfo"&&d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["parseBatchGroupInfoSmax: unexpected truncated group info received from server when querying dirty groups metadata"]))).sendLogs("unexpected-truncated-group-info-for-dirty-group-request");(b.name==="GroupInfo"||b.name==="TruncatedGroupInfo")&&c.push(r(b.value))});return c}function r(a){var b,e,f,g,h=a.groupAddressingModeMixin,m=a.creation,n=a.id,r=a.hasLocked,s=a.hasAnnouncement,t=a.hasNoFrequentlyForwarded,u=a.hasSupport,v=a.suspended,w=a.parent,x=a.hasCapi,y=a.hasDefaultSubGroup,z=a.hasGeneralChat,A=a.hasIncognito,B=a.membershipApprovalMode,C=a.membershipApprovalRequest,D=a.hasAllowAdminReports,E=a.ephemeral,F=a.growthLocked,G=a.linkedParent,H=a.description,I=a.descriptionGroupInfoDescriptionMixin,J=a.namedSubjectOrUnnamedSubjectFallbackMixinGroup,K=a.sO,L=a.subjectOwnerIdentityMixin,M=a.participant,N=a.sT,O=a.size,P=a.groupMemberAddModeMixin,Q=a.hasAllowNonAdminSubGroupCreation,R=a.hasAutoAddDisabled,S=a.hasMissingParticipantIdentification;if(n==null)throw c("err")("parseGroupSmax: invalid group id");J=J==null?void 0:J.value.subject;if(J==null)throw c("err")("parseGroupSmax: invalid group subject");M=M!=null?o(M):[];b=(b=B==null||(e=B.membershipApprovalGroupJoinModeEnabledMixin)==null?void 0:e.state)!=null?b:B==null?void 0:B.state;B=d("WAWebSchemaGroupMetadata").MemberAddMode.cast(P==null||(f=P.memberAddModeMemberAddModes)==null?void 0:f.value.elementValue);H=(P=H==null?void 0:H.groupInfoDescriptionMixin)!=null?P:I;P=p(a);I=P.creator;a=P.creatorUsername;var T=P.creatorCountryCode;P=P.creatorPn;K=q(K,L);L=K.subjectOwner;var U=K.subjectOwnerUsername;K=K.subjectOwnerPn;n=babelHelpers["extends"]({id:d("WAWebWidFactory").createWid(n+"@g.us"),owner:I,creatorPn:P,creatorUsername:a,creatorCountryCode:T,creation:m,restrict:Boolean(r),announce:Boolean(s),noFrequentlyForwarded:Boolean(t),support:u,suspended:v!=null,isParentGroup:w!=null,numSubgroups:w==null?void 0:w.numSubGroups,participants:M,isParentGroupClosed:(w==null||(g=w.parentGroupDefaultMembershipApprovalModeMixin)==null?void 0:g.defaultMembershipApprovalMode)==="request_required",defaultSubgroup:y,generalSubgroup:z,incognito:A,membershipApprovalMode:b==="on",reportToAdminMode:D,membershipApprovalRequest:C,isLidAddressingMode:(h==null?void 0:h.addressingMode)==="lid",memberAddMode:B,allowNonAdminSubGroupCreation:Q},H&&i(H),E&&j(E),k(F),l(G),{subject:J,subjectTime:N,subjectOwner:L,subjectOwnerUsername:U,subjectOwnerPn:K,size:O,generalChatAutoAddDisabled:Boolean(R),hasCapi:x,hasIncompleteParticipantInformation:S===!0});return n}function b(a){a=a.maybeChild("linked_parent");var b=a==null?void 0:a.maybeAttrGroupJid("jid");return b==null?null:{parentGroup:d("WAWebJidToWid").groupJidToWid(b),parentGroupSubject:a==null?void 0:a.maybeAttrString("subject")}}g.extractDescriptionSmax=i;g.extractUsernameFromIdentityTypes=n;g.extractGroupParticipantsSmax=o;g.parseGroupCreatorSmax=p;g.parseSubjectOwnerSmax=q;g.parseBatchGroupInfoSmax=a;g.parseGroupSmax=r;g.extractLinkedParent=b}),98);
__d("WAWebRequestMethodType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NonAdminAdd","InviteLink","LinkedGroupJoin"]);f.RequestMethod=a}),66);
__d("WAWebGroupGetMembershipApprovalRequestsJob",["Promise","WALogger","WASmaxGroupsGetMembershipApprovalRequestsRPC","WAWebApiMembershipApprovalRequestStore","WAWebBackendApi","WAWebBackendErrors","WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebGroupsQueryApi","WAWebJidToWid","WAWebRequestMethodType","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=["phoneNumber","username","addedByUsername","addedByPn"],i,j;function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxGroupsGetMembershipApprovalRequestsRPC").sendGetMembershipApprovalRequestsRPC({iqTo:d("WAWebWidToJid").widToGroupJid(a)}));switch(a.name){case"GetMembershipApprovalRequestsResponseSuccess":return a.value.membershipApprovalRequestsMembershipApprovalRequest.map(function(a){var b=d("WAWebJidToWid").userJidToUserWid(a.jid),c=a.requestor;c={id:b,t:a.requestTime,addedBy:c!=null?d("WAWebJidToWid").userJidToUserWid(c):b,requestMethod:m(a.requestMethod),parentGroupId:a.parentGroupJid!=null?d("WAWebJidToWid").groupJidToWid(a.parentGroupJid):void 0};if(d("WAWebUsernameGatingUtils").lidGroupMigrationNonMemberIQEnabled()){b=(b=a.identityMixin)==null?void 0:b.identityTypes.value.phoneNumber;b!=null&&(c.phoneNumber=d("WAWebJidToWid").userJidToUserWid(b));b=a.requestorPn;b!=null&&(c.addedByPn=d("WAWebJidToWid").userJidToUserWid(b))}if(d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()){b=a.requestorUsername;b!=null&&(c.addedByUsername=b);b=((b=a.identityMixin)==null?void 0:b.identityTypes)!=null?d("WAWebGroupsQueryApi").extractUsernameFromIdentityTypes(a.identityMixin.identityTypes):void 0;b!=null&&(c.username=b)}return c});case"GetMembershipApprovalRequestsResponseClientError":var b=a.value.errorGetMembershipApprovalRequestsClientErrors;return n(b.value);default:a.name;return n(a.value.errorServerErrors.value)}});return l.apply(this,arguments)}function m(a){switch(a){case"invite_link":return d("WAWebRequestMethodType").RequestMethod.InviteLink;case"linked_group_join":return d("WAWebRequestMethodType").RequestMethod.LinkedGroupJoin;case"non_admin_add":return d("WAWebRequestMethodType").RequestMethod.NonAdminAdd}}function n(a){var c=a.code;a=a.text;d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["queryMembershipApprovalRequests failed: ",":",""])),c,a);return(j||(j=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a))}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield k(a)),c=b.map(function(a){a.phoneNumber;a.username;a.addedByUsername;a.addedByPn;a=babelHelpers.objectWithoutPropertiesLoose(a,h);return a}),e=(yield d("WAWebApiMembershipApprovalRequestStore").getMembershipApprovalRequests(a));e=e.filter(function(a){return!c.some(function(b){return b.id.equals(a.id)})});yield d("WAWebApiMembershipApprovalRequestStore").removeMembershipApprovalRequests(a,e.map(function(a){return a.id}));yield d("WAWebApiMembershipApprovalRequestStore").addMembershipApprovalRequests(a,c);if(d("WAWebUsernameGatingUtils").lidGroupMigrationNonMemberIQEnabled()){var f=b.reduce(function(a,b){var c=b.id,d=b.phoneNumber,e=b.addedBy;b=b.addedByPn;a.push({id:c,lid:c.isLid()?c:null,phoneNumber:d!=null?d:null});a.push({id:e,lid:e.isLid()?e:null,phoneNumber:b!=null?b:null});return a},[]);yield d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappingsInBatches(f,!0)}if(d("WAWebUsernameGatingUtils").usernameDisplayedEnabled()){f=b.reduce(function(a,b){b.username!=null&&a.push({username:b.username,userId:d("WAWebWidFactory").asUserWidOrThrow(b.id)});b.addedByUsername!=null&&a.push({username:b.addedByUsername,userId:d("WAWebWidFactory").asUserWidOrThrow(b.addedBy)});return a},[]);yield d("WAWebSetUsernameJob").setUsernamesJob(f)}d("WAWebBackendApi").frontendFireAndForget("removeMembershipApprovalRequests",{groupId:a,requestIds:e.map(function(a){return a.id})});d("WAWebBackendApi").frontendFireAndForget("addMembershipApprovalRequests",{groupId:a,requests:c})});return o.apply(this,arguments)}g.queryAndUpdateGroupMembershipApprovalRequests=a}),98);
__d("WAWebMexFetchGroupInfoJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},b={defaultValue:null,kind:"LocalArgument",name:"include_username"},c={defaultValue:null,kind:"LocalArgument",name:"participants_phash"},d={defaultValue:null,kind:"LocalArgument",name:"query_context"},e=[{fields:[{kind:"Variable",name:"group_id",variableName:"id"},{kind:"Variable",name:"participants_phash",variableName:"participants_phash"},{kind:"Variable",name:"query_context",variableName:"query_context"}],kind:"ObjectValue",name:"group_input"}],f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"lid",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"pn",storageKey:null},j={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],type:"XWA2Username",abstractKey:null},k={condition:"include_username",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"username_info",plural:!1,selections:[j],storageKey:null}]},l={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[f,h,i,k],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"display_name",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"participants_phash_match",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"total_participants_count",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"missing_participant_identification",storageKey:null},t={alias:null,args:null,concreteType:"XWA2GroupLimitSharingSetting",kind:"LinkedField",name:"limit_sharing",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"limit_sharing_enabled",storageKey:null}],storageKey:null},u={alias:null,args:null,concreteType:"XWA2GroupLIDMigrationState",kind:"LinkedField",name:"lid_migration_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"addressing_mode",storageKey:null}],storageKey:null},v={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunityProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"allow_non_admin_sub_group_creation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed_by_membership_approval_mode",storageKey:null},t,u],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null},w={alias:null,args:null,concreteType:"XWA2GroupEphemeralSetting",kind:"LinkedField",name:"ephemeral",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_sec",storageKey:null}],storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"locked",storageKey:null},y={alias:null,args:null,concreteType:"XWA2GroupGrowthLocked",kind:"LinkedField",name:"growth_locked2",plural:!1,selections:[x],storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"member_add_mode",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"parent_group_jid",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"group_safety_check",storageKey:null},C={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunityDefaultSubGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[w,y,u,z,A,B,t],storageKey:null}],type:"XWA2CommunityDefaultSubGroup",abstractKey:null},D={alias:null,args:null,kind:"ScalarField",name:"allow_admin_reports",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"announcement",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"membership_approval_mode_enabled",storageKey:null};A={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"membership_approval_request",storageKey:null},{alias:null,args:null,concreteType:"XWA2CommunitySubGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[D,E,w,y,u,x,z,F,A,{alias:null,args:null,kind:"ScalarField",name:"general_chat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"auto_add_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hidden_group",storageKey:null},B,t],storageKey:null}],type:"XWA2CommunitySubGroup",abstractKey:null};D={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2GroupRegularGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[D,E,{alias:null,args:null,kind:"ScalarField",name:"capi",storageKey:null},w,y,u,x,z,F,{alias:null,args:null,kind:"ScalarField",name:"support",storageKey:null},B,t],storageKey:null}],type:"XWA2GroupRegularGroup",abstractKey:null};E={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};w={condition:"include_username",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"username_info",plural:!1,selections:[E,j],storageKey:null}]};y={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[f,h,i,w],storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"WAWebMexFetchGroupInfoJobQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[f,g,l,m,{alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:[l,g,n],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[f,g,l,n],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupParticipantsConnection",kind:"LinkedField",name:"participants",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2GroupParticipantEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"node",plural:!1,selections:[f,h,i,o,k],storageKey:null},p],storageKey:null},q],storageKey:null},r,s,v,C,A,D],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,b,c],kind:"Operation",name:"WAWebMexFetchGroupInfoJobQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[E,f,g,y,m,{alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:[y,g,n],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[f,g,y,n],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupParticipantsConnection",kind:"LinkedField",name:"participants",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2GroupParticipantEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"node",plural:!1,selections:[f,h,i,o,w],storageKey:null},p],storageKey:null},q],storageKey:null},r,s,v,C,A,D],storageKey:null}]},params:{id:"10065560693498563",metadata:{},name:"WAWebMexFetchGroupInfoJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexGetTypename",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==null?void 0:a.__typename}f.getTypename=a}),66);
__d("WAWebNewsletterRpcUtils",["WAExponentialBackoff","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h={minTimeout:1e3,retries:3},i=new Set([429,500]);function a(a,c){c=c===void 0?{retryableErrorCodes:i}:c;var e=c.retryableErrorCodes;c=new AbortController();c=c.signal;return d("WAExponentialBackoff").exponentialBackoff(babelHelpers["extends"]({},h,{signal:c}),function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){try{return yield a()}catch(a){if(!(a instanceof d("WAWebBackendErrors").ServerStatusCodeError))throw a;var f=e.has(a.statusCode);if(f&&c<h.retries)return b(a);throw a}});return function(a,b){return c.apply(this,arguments)}}())}g.runWithBackoff=a}),98);
__d("WAWebMexFetchGroupInfoJob",["WALogger","WAWebBackendErrors","WAWebMexClient","WAWebMexFetchGroupInfoJobQuery.graphql","WAWebMexGetTypename","WAWebNewsletterRpcUtils","WAWebSchemaGroupMetadata","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i,j="XWA2CommunityGroup",k="XWA2CommunityDefaultSubGroup",l="XWA2CommunitySubGroup",m="LID",n=h!==void 0?h:h=b("WAWebMexFetchGroupInfoJobQuery.graphql");function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.groupId,e=a.queryContext,f=a.participantsPhash;return d("WAWebNewsletterRpcUtils").runWithBackoff(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebMexClient").fetchQuery(n,{id:c,query_context:e,include_username:d("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),participants_phash:f}));d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[MEX][GROUP] fetched get group info for ",""])),c).tags("GQL","MEX").devConsole({response:a});return a}))});return p.apply(this,arguments)}function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.groupId,c=a.queryContext;a=a.participantsPhash;c=t(c);b=(yield o({groupId:b,queryContext:c,participantsPhash:a}));if(b==null)return;return r(b)});return q.apply(this,arguments)}function r(a){var b,c,e,f,g,h,i,n,o,p,q,r,t,w,x,y,z,A,B,C,D,E,F,G;a=a.xwa2_group_query_by_id;if(a==null)return null;var H=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),I=a.id,J=a.creation_time,K=a.creator;b=(b=a.creator)==null?void 0:b.pn;c=H?(c=a.creator)==null||(c=c.username_info)==null?void 0:c.username:null;var L=a.description;e=H?(e=a.description)==null||(e=e.creator)==null||(e=e.username_info)==null?void 0:e.username:null;f=(f=a.participants)==null?void 0:f.edges;g=(g=a.properties)==null?void 0:g.allow_admin_reports;h=(h=a.properties)==null?void 0:h.allow_non_admin_sub_group_creation;i=(i=a.properties)==null?void 0:i.announcement;n=(n=a.properties)==null||(n=n.ephemeral)==null?void 0:n.expiration_time_in_sec;o=((o=a.properties)==null||(o=o.lid_migration_state)==null?void 0:o.addressing_mode)===m;p=(p=a.properties)==null?void 0:p.locked;q=(q=a.properties)==null?void 0:q.member_add_mode;r=(r=a.properties)==null?void 0:r.membership_approval_mode_enabled;t=(t=a.properties)==null?void 0:t.support;var M=a.state,N=a.subject;w=(w=a.subject)==null||(w=w.creator)==null?void 0:w.pn;H=H?(H=a.subject)==null||(H=H.creator)==null||(H=H.username_info)==null?void 0:H.username:null;var O=a.total_participants_count;x=((x=a.participants)==null?void 0:x.participants_phash_match)===!0;y=(y=a.properties)==null?void 0:y.closed_by_membership_approval_mode;z=(z=a.properties)==null?void 0:z.general_chat;var P=a==null||(A=a.properties)==null||(A=A.growth_locked2)==null?void 0:A.locked,Q=a==null||(B=a.properties)==null?void 0:B.auto_add_disabled,R=a==null||(C=a.properties)==null?void 0:C.parent_group_jid,S=a==null||(D=a.properties)==null?void 0:D.capi,T=a==null||(E=a.properties)==null?void 0:E.hidden_group,U=a==null||(F=a.properties)==null?void 0:F.group_safety_check,V=a==null||(G=a.properties)==null?void 0:G.limit_sharing,aa=(a==null?void 0:a.missing_participant_identification)===!0;if(I!=null&&J!=null&&(N==null?void 0:N.value)!=null){var W,X,Y,Z,$=d("WAWebMexGetTypename").getTypename(a);c={groupInfo:babelHelpers["extends"]({id:d("WAWebWidFactory").createWid(I),owner:(K==null?void 0:K.id)!=null?d("WAWebWidFactory").createWid(K==null?void 0:K.id):void 0,creatorPn:b!=null?d("WAWebWidFactory").createWid(b):void 0,creatorUsername:c,subject:N.value,creation:Number(J),participants:v(x,f),subjectTime:Number(N==null?void 0:N.creation_time),subjectOwner:(N==null||(W=N.creator)==null?void 0:W.id)!=null?d("WAWebWidFactory").createWid(N==null||(X=N.creator)==null?void 0:X.id):void 0,subjectOwnerPn:w!=null?d("WAWebWidFactory").createWid(w):void 0,subjectOwnerUsername:H,allowNonAdminSubGroupCreation:h!=null?h:!1,generalChatAutoAddDisabled:$===l&&Q!=null?Q:!1,restrict:p===!0,announce:$===k||i===!0,support:t!=null?t:!1,desc:(I=L==null?void 0:L.value)!=null?I:void 0,descId:(K=L==null?void 0:L.id)!=null?K:void 0,descOwner:(L==null||(Y=L.creator)==null?void 0:Y.id)!=null?d("WAWebWidFactory").createWid(L==null||(Z=L.creator)==null?void 0:Z.id):void 0,descOwnerUsername:e,descTime:(L==null?void 0:L.creation_time)!=null?Number(L==null?void 0:L.creation_time):void 0,size:O,noFrequentlyForwarded:!1,incognito:$===k,ephemeralDuration:n!=null?n:void 0,membershipApprovalMode:r!=null?r:!1,memberAddMode:u(q),suspended:M===s.SUSPENDED,terminated:M===s.TERMINATED?!0:void 0,isLidAddressingMode:o,reportToAdminMode:g!=null?g:!1,isParentGroupClosed:y===!0,isParentGroup:$===j,parentGroup:R!=null?d("WAWebWidFactory").createWid(R):void 0,generalSubgroup:z===!0,defaultSubgroup:$===k},($===l||$===k)&&{parentGroupSubject:null},{numSubgroups:0,membershipApprovalRequest:a.membership_approval_request===!0,growthLockType:P===!0?"invite":void 0,hasCapi:S===!0,hiddenSubgroup:T!=null?T:void 0,groupSafetyCheck:U!=null?U:void 0,limitSharingEnabled:(b=V==null?void 0:V.limit_sharing_enabled)!=null?b:void 0,hasIncompleteParticipantInformation:aa}),participantPhashMatch:x};return c}}var s={ACTIVE:"ACTIVE",TERMINATED:"NON_EXISTENT",SUSPENDED:"SUSPENDED"};function t(a){switch(a){case"interactive":return"INTERACTIVE";case"missing_participant_identification":return"MISSING_PARTICIPANT_IDENTIFICATION";default:a;return"UNKNOWN"}}function u(a){switch(a){case"ADMIN_ADD":return d("WAWebSchemaGroupMetadata").MemberAddMode.ADMIN_ADD;case"ALL_MEMBER_ADD":return d("WAWebSchemaGroupMetadata").MemberAddMode.ALL_MEMBER_ADD;default:return d("WAWebSchemaGroupMetadata").MemberAddMode.ADMIN_ADD}}function v(a,b){if(a)return[];if(b==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing participants in group info participant response");var c=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled();a=b.map(function(a){var b=a.node;a=a.role;var e,f,g;if(b.id==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing id in group info participant response");else e=d("WAWebWidFactory").createWid(b.id);b.lid!=null&&(f=d("WAWebWidFactory").createWid(b.lid));b.pn!=null&&(g=d("WAWebWidFactory").createWid(b.pn));return{id:e,lid:f,phoneNumber:g!=null?g:null,displayName:(e=b.display_name)!=null?e:null,isAdmin:a==="ADMIN_MEMBER"||a==="SUPERADMIN_MEMBER",isSuperAdmin:a==="SUPERADMIN_MEMBER",username:c?(e=b.username_info)==null?void 0:e.username:null}});return a}g.mexGetGroupInfo=a}),98);
__d("WAWebGroupQueryGroupJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebApiChat","WAWebApiParticipantStore","WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebDBGroupParticipant","WAWebDBGroupsGroupMetadata","WAWebEnvironment","WAWebGroupGatingUtils","WAWebGroupsParticipantsApi","WAWebLimitSharingModelUtils","WAWebMexFetchGroupInfoJob","WAWebOrchestratorNonPersistedJob","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function a(a,e){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("queryGroup",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));if(c!=null&&c.terminated){d("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["groupQueryJob: group "," does not exist"])),a);return}var f=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),g={groupId:a.toString(),queryContext:e};if(d("WAWebGroupGatingUtils").isPassingParticipantsPhashToGroupInfoQueryEnabled())if((c==null?void 0:c.hasIncompleteParticipantInformation)===!0&&f)g.queryContext="missing_participant_identification";else if(e!=="out_of_sync_update"){e;c=(yield d("WAWebDBGroupParticipant").computeGroupParticipantsHash(a));c!=null&&(g.participantsPhash=c)}c=(yield d("WAWebMexFetchGroupInfoJob").mexGetGroupInfo(g));g=c==null?void 0:c.groupInfo;if(g==null)return null;c=(c==null?void 0:c.participantPhashMatch)===!0;var j=g.participants.map(function(a){return{id:d("WAWebWidFactory").asUserWidOrThrow(a.id),lid:a.lid?d("WAWebWidFactory").asUserWidOrThrow(a.lid):null,displayName:a.displayName,phoneNumber:a.phoneNumber?d("WAWebWidFactory").asUserWidOrThrow(a.phoneNumber):null}}),k=g,l=k.owner,m=k.creatorPn,n=k.creatorUsername,o=k.descOwner,p=k.descOwnerUsername,q=k.subjectOwner,r=k.subjectOwnerPn,s=k.subjectOwnerUsername;k=k.participants;l&&m&&j.push({id:d("WAWebWidFactory").asUserWidOrThrow(l),lid:d("WAWebWidFactory").asUserWidOrThrow(l),phoneNumber:d("WAWebWidFactory").asUserWidOrThrow(m)});q&&r&&j.push({id:d("WAWebWidFactory").asUserWidOrThrow(q),lid:d("WAWebWidFactory").asUserWidOrThrow(q),phoneNumber:d("WAWebWidFactory").asUserWidOrThrow(r)});var t=[];l&&n!=null&&t.push({userId:d("WAWebWidFactory").asUserWidOrThrow(l),username:n});q&&s!=null&&t.push({userId:d("WAWebWidFactory").asUserWidOrThrow(q),username:s});o&&p!=null&&t.push({userId:d("WAWebWidFactory").asUserWidOrThrow(o),username:p});k.forEach(function(a){var b=a.username;a=a.id;b!=null&&t.push({userId:d("WAWebWidFactory").asUserWidOrThrow(a),username:b})});m=(yield d("WAWebApiChat").injectAdditionalEphemeralInfoFromDB([g]));r=m[0];l=(yield (i||(i=b("Promise"))).all([c===!0?d("WAWebDBGroupParticipant").getGroupParticipant({groupWid:a}):null,d("WAWebDBGroupsGroupMetadata").updateGroupMetadataTable({groupInfos:[r]}),c!==!0&&d("WAWebGroupsParticipantsApi").updateParticipants({group:g.id,participants:k,groupInfo:g}),d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappings(j,!0),f&&t.length>0&&d("WAWebSetUsernameJob").setUsernamesJob(t)]));n=l[0];n!=null&&(g=babelHelpers["extends"]({},g,{participants:n.participants}));d("WAWebApiParticipantStore").clearAdminshipCache(g.id.toString());void d("WAWebLimitSharingModelUtils").genLimitSharingSystemMessageOnPersistedChat({chatWID:a,sharingLimited:r.limitSharingEnabled});return g}),c("WAWebEnvironment").isWindows?{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH}:null).waitUntilCompleted()}g.queryGroupJob=a}),98);
__d("WAWebGroupQueryJob",["Promise","WALogger","WASmaxGroupsBatchGetGroupInfoRPC","WASmaxGroupsGetInviteGroupInfoRPC","WASmaxGroupsGetParticipatingGroupsRPC","WAWebABProps","WAWebApiChat","WAWebApiParticipantStore","WAWebBackendApi","WAWebBackendErrors","WAWebGroupDatabaseJob","WAWebGroupGetMembershipApprovalRequestsJob","WAWebGroupQueryGroupJob","WAWebGroupsQueryApi","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q;function a(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebApiParticipantStore").clearAdminshipCache();var a=(yield d("WASmaxGroupsGetParticipatingGroupsRPC").sendGetParticipatingGroupsRPC({hasParticipants:!0,hasDescription:!0}));switch(a.name){case"GetParticipatingGroupsResponseSuccess":return a.value.groupsGroup.map(function(a){a=a.groupInfoOrTruncatedGroupInfoGroupInfoMixinGroup;a=a.value;return a.truncated?a:d("WAWebGroupsQueryApi").parseGroupSmax(a)});case"GetParticipatingGroupsResponseClientError":var c=a.value.errorIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup.value,e=c.code;c=c.text;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["queryAllGroups failed: ",":",""])),e,c);return(q||(q=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),c));case"GetParticipatingGroupsResponseServerError":e=a.value.errorServerErrors.value;c=e.code;a=e.text;d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["queryAllGroups failed: ",":",""])),c,a);return(q||(q=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a))}});return r.apply(this,arguments)}function c(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxGroupsGetInviteGroupInfoRPC").sendGetInviteGroupInfoRPC({inviteCode:a}));switch(a.name){case"GetInviteGroupInfoResponseSuccess":return d("WAWebGroupsQueryApi").parseGroupSmax(a.value.groupInviteLinkGroupInfoMixin);case"GetInviteGroupInfoResponseClientError":var c=a.value.errorGetInviteGroupInfoClientErrors.value,e=c.code;c=c.text;d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["queryGroupInvite failed: ",":",""])),e,c);return(q||(q=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(e),c));case"GetInviteGroupInfoResponseServerError":e=a.value.errorServerErrors.value;c=e.code;a=e.text;d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["queryGroupInvite failed: ",":",""])),c,a);return(q||(q=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a))}});return s.apply(this,arguments)}function e(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.id,c=a.request;a=a.actionType;c=(yield d("WAWebGroupQueryGroupJob").queryGroupJob(b,c));if(c==null){d("WALogger").DEV(l||(l=babelHelpers.taggedTemplateLiteralLoose(["queryAndUpdateGroupMetadataById: unable to query group ",""])),b);return}if(c.phashMatch){d("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["queryAndUpdateGroupMetadataById: skip update due to phash match"])));return}b=(yield d("WAWebApiParticipantStore").injectPastParticipantsFromDB([c],a));c=b[0];a=(yield d("WAWebApiChat").injectAdditionalEphemeralInfoFromDB([c]));b=a[0];yield d("WAWebGroupDatabaseJob").updateGroupParticipantTableWithoutDeviceSyncJob([b]);d("WAWebBackendApi").frontendFireAndForget("createOrUpdateGroupMetadataFromQuery",{groupInfo:b});yield u(b)});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.membershipApprovalMode&&a.participants.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a.id)&&a.isAdmin})&&d("WAWebABProps").getABPropConfigValue("group_join_request_m2")){var b=(yield d("WAWebApiChat").getChatRecord(a.id));if(!b)return;return d("WAWebGroupGetMembershipApprovalRequestsJob").queryAndUpdateGroupMembershipApprovalRequests(a.id)}});return v.apply(this,arguments)}function f(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("WASmaxGroupsBatchGetGroupInfoRPC").sendBatchGetGroupInfoRPC({queryContext:c,groupArgs:a.map(function(a){return{groupJid:a}})}));switch(e.name){case"BatchGetGroupInfoResponseSuccess":d("WALogger").LOG(n||(n=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsById: successfully received batch group info for ",""])),a.length);return d("WAWebGroupsQueryApi").parseBatchGroupInfoSmax(c,e.value.groupsGroup);case"BatchGetGroupInfoResponseClientError":a=e.value.errorBatchGetGroupInfoClientErrors.value;c=a.code;a=a.text;d("WALogger").LOG(o||(o=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsById failed: ",":",""])),c,a);return(q||(q=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(c),a));case"BatchGetGroupInfoResponseServerError":c=e.value.errorServerErrors.value;a=c.code;e=c.text;d("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["queryGroupsById failed: ",":",""])),a,e);return(q||(q=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a),e))}});return w.apply(this,arguments)}g.queryAllGroups=a;g.queryGroupInvite=c;g.queryAndUpdateGroupMetadataById=e;g.maybeQueryAndUpdateMembershipApprovalRequests=u;g.queryGroupsById=f}),98);
__d("WAWebGroupQueryBridge",["WALogger","WATypeUtils","WAWebBackendApi","WAWebBackendErrors","WAWebGroupQueryGroupJob","WAWebGroupQueryJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["querying server for groupMetadata of group id ",""])),a.toLogString()).tags("groups");var b=d("WAWebGroupQueryGroupJob").queryGroupJob(a,"out_of_sync_update");try{b=(yield b);if(b!=null&&b.id){var c;k(a,b.subject);l(a,(c=b.isLidAddressingMode)!=null?c:!1);return{id:b.id,owner:b.owner,creation:b.creation,subject:b.subject,desc:b.desc,descId:b.descId,descOwner:b.descOwner,descTime:b.descTime,restrict:(c=b.restrict)!=null?c:!1,announce:(c=b.announce)!=null?c:!1,noFrequentlyForwarded:(c=b.noFrequentlyForwarded)!=null?c:!1,ephemeralDuration:(c=b.ephemeralDuration)!=null?c:0,membershipApprovalMode:b.membershipApprovalMode,participants:b.participants,support:(c=b.support)!=null?c:!1,suspended:(c=b.suspended)!=null?c:!1,terminated:(c=b.terminated)!=null?c:!1,parentGroup:b.parentGroup,isParentGroup:(c=b.isParentGroup)!=null?c:!1,isParentGroupClosed:(c=b.isParentGroupClosed)!=null?c:!1,defaultSubgroup:(c=b.defaultSubgroup)!=null?c:!1,generalSubgroup:(c=b.generalSubgroup)!=null?c:!1,incognito:(c=b.incognito)!=null?c:!1,isLidAddressingMode:(c=b.isLidAddressingMode)!=null?c:!1,allowNonAdminSubGroupCreation:b.allowNonAdminSubGroupCreation,generalChatAutoAddDisabled:b.generalChatAutoAddDisabled,hiddenSubgroup:(c=b.hiddenSubgroup)!=null?c:!1,groupSafetyCheck:(c=b.groupSafetyCheck)!=null?c:!1}}d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Store:GroupMetadata Unexpected server response"]))).devConsole(b)}catch(b){if(b instanceof d("WAWebBackendErrors").ServerStatusCodeError&&b.status>=400)return{id:a,stale:!1};throw b}});return j.apply(this,arguments)}function c(a){return d("WAWebGroupQueryJob").queryGroupInvite(a).then(function(a){return{status:200,groupInfo:a}})}function k(a,b){d("WATypeUtils").isString(b)&&d("WAWebBackendApi").frontendFireAndForget("updateGroupSubject",{id:a,subject:b})}function l(a,b){d("WAWebBackendApi").frontendFireAndForget("updateGroupAddressingMode",{id:a,isLidAddressingMode:b})}g.sendQueryGroup=a;g.sendQueryGroupInvite=c;g.updateSubject=k}),98);
__d("WAWebGroupQueryBridgeOneAlreadyInFlightLogger",["WALogger","WAWebWamEnumMismatchOriginType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=Object.fromEntries(Object.entries(d("WAWebWamEnumMismatchOriginType").MISMATCH_ORIGIN_TYPE).map(function(a){var b=a[0];a=a[1];return[a,b]})),j=function(){function a(){this.$1=new Map()}var b=a.prototype;b.$2=function(a){return(a=this.$1.get(a))!=null?a:0};b.increment=function(a){a=a.toString();var b=this.$2(a)+1;this.$1.set(a,b);return b};b.decrement=function(a){a=a.toString();this.$1.set(a,Math.max(this.$2(a)-1,0))};return a}();function a(a){var c=new j();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){c.increment(b)>1&&d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["lid_migration - ",""])),i[e]).sendLogs("GroupLidInfra/one_in_flight_group_info_mismatch");try{e=(yield a(b));c.decrement(b);return e}catch(a){c.decrement(b);throw a}});function f(a,b){return e.apply(this,arguments)}return f}()}g.logDuplicateRequestsWrapper=a}),98);
__d("WAWebWamAddressingModeUtils",["WAWebHandleMsgCommon","WAWebWamEnumAddressingMode"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case!0:return d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.LID;case!1:return d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.PN}}function a(a){return a===d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid?d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.LID:d("WAWebWamEnumAddressingMode").ADDRESSING_MODE.PN}function b(a){return a.isLidAddressingMode==null?{}:{localAddressingMode:h(a.isLidAddressingMode)}}g.getWamAddressingModeFromString=a;g.getAddressingModeMetricsFromGroupMetadata=b}),98);
__d("WAWebWamAddressingModeMismatchReporter",["WAWebAddressingModeMismatchWamEvent","WAWebWamAddressingModeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){new(d("WAWebAddressingModeMismatchWamEvent").AddressingModeMismatchWamEvent)(babelHelpers["extends"]({},a,{localAddressingMode:d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(a.localAddressingMode),serverAddressingMode:d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(a.serverAddressingMode)})).commit()}g.logAddressingModeMismatch=a}),98);
__d("WAWebGroupHandleAddressingModeMismatch",["WALogger","WANullthrows","WAWebApiMembershipApprovalRequestStore","WAWebBackendApi","WAWebDBGroupParticipant","WAWebGroupQueryBridge","WAWebGroupQueryBridgeOneAlreadyInFlightLogger","WAWebHandleMsgCommon","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebWamAddressingModeMismatchReporter","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("WAWebGroupQueryBridgeOneAlreadyInFlightLogger").logDuplicateRequestsWrapper(d("WAWebGroupQueryBridge").sendQueryGroup);function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.serverAddressingMode===d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid;d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Migrating group "," to addressing mode ",""])),a.toString(),b.serverAddressingMode);d("WAWebWamAddressingModeMismatchReporter").logAddressingModeMismatch(b);yield m(a,c,b);yield o(a,c)});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("WAWebDBGroupParticipant").migrateParticipantInfoAddressingMode(a,b));if(e===d("WAWebDBGroupParticipant").AddressingModeMigrationResult.Success){e=(yield d("WAWebDBGroupParticipant").getGroupParticipant({groupWid:a}));d("WAWebBackendApi").frontendFireAndForget("updateGroupAddressingMode",{id:a,isLidAddressingMode:b,groupInfoUpdate:{participants:e==null?void 0:e.participants}})}else d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Unable to migrate participants in "," with local data"])),a.toString()),yield k(a,c.mismatchOrigin)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=d("WAWebLidMigrationUtils").toAddressingModeFactory(e),g=(yield d("WAWebApiMembershipApprovalRequestStore").getMembershipApprovalRequests(a));if(g.length===0)return;try{var h=g.map(function(a){return babelHelpers["extends"]({},a,{id:c("WANullthrows")(f(a.id)),addedBy:c("WANullthrows")(f(a.addedBy))})});yield d("WAWebModelStorageUtils").getStorage().lock(["pending-membership-approval-request"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebApiMembershipApprovalRequestStore").removeMembershipApprovalRequests(a,g.map(function(a){return a.id})),yield d("WAWebApiMembershipApprovalRequestStore").addMembershipApprovalRequests(a,h)}));d("WAWebBackendApi").frontendFireAndForget("removeMembershipApprovalRequests",{groupId:a,requestIds:g.map(function(a){return a.id})});d("WAWebBackendApi").frontendFireAndForget("addMembershipApprovalRequests",{groupId:a,requests:h})}catch(b){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Unable to migrate pending approvals in "," with local data"])),a.toString())}});return p.apply(this,arguments)}g.handleAddressingModeMismatch=a}),98);
__d("WAWebGroupParticipantsJob",["WAJobOrchestratorTypes","WAWebGroupsParticipantsApi","WAWebLidMigrationUtils","WAWebOrchestratorNonPersistedJob","WAWebSchemaParticipant","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateParticipants",function(a){return d("WAWebGroupsParticipantsApi").updateParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function c(a,b){a={parentGroupId:a,isParentGroupLidAddressingMode:b};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("migrateParticipantsToLIDOrPN",function(a){return m(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function e(a,b,c,e){a={group:a,participants:b,isOffline:c,reason:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("addParticipants",function(a){return d("WAWebGroupsParticipantsApi").addParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function f(a,b,c,e,f,g,h){a={group:a,participants:b,timestamp:c,author:e,reason:f,groupMetadata:g,isOffline:h};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("removeParticipants",function(a){return d("WAWebGroupsParticipantsApi").removeParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function h(a,b,c,e){a={group:a,participants:b,groupMetadata:c,isOffline:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("demoteParticipants",function(a){return d("WAWebGroupsParticipantsApi").demoteParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function i(a,b,c,e){a={group:a,participants:b,groupMetadata:c,isOffline:e};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("promoteParticipants",function(a){return d("WAWebGroupsParticipantsApi").promoteParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function j(a,b){a={group:a,newSuperAdmin:b};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("setGroupSuperAdmin",function(a){return d("WAWebGroupsParticipantsApi").setGroupSuperAdmin(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function k(a,b,c){a={group:a,participants:b,isOffline:c};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("promoteCommunityParticipants",function(a){return d("WAWebGroupsParticipantsApi").promoteCommmunityParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function l(a,b,c){a={group:a,participants:b,isOffline:c};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("demoteCommunityParticipants",function(a){return d("WAWebGroupsParticipantsApi").demoteCommmunityParticipants(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP}).waitUntilCompleted(a)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.parentGroupId;a=a.isParentGroupLidAddressingMode;var c=(yield d("WAWebSchemaParticipant").getParticipantTable().get(b));if(c==null)return;var e=a?d("WAWebLidMigrationUtils").toUserLidOrThrow:d("WAWebLidMigrationUtils").toPnOrThrow;a=function(a){return a.map(function(a){return e(d("WAWebWidFactory").createUserWidOrThrow(a)).toString()})};var f=a(c.participants),g=a(c.admins);a=a((a=c==null?void 0:c.superAdmins)!=null?a:[]);c=c.pastParticipants.map(function(a){var b=e(d("WAWebWidFactory").createUserWidOrThrow(a.jid)).toString();return babelHelpers["extends"]({},a,{jid:b})});yield d("WAWebSchemaParticipant").getParticipantTable().merge(b,{groupId:b,participants:f,pastParticipants:c,admins:g,superAdmins:a})});return n.apply(this,arguments)}g.updateParticipantsJob=a;g.migrateParentGroupToLIDOrFallbackToPNJob=c;g.addParticipantsJob=e;g.removeParticipantsJob=f;g.demoteParticipantsJob=h;g.promoteParticipantsJob=i;g.setGroupSuperAdminJob=j;g.promoteCommunityParticipantsJob=k;g.demoteCommunityParticipantsJob=l}),98);
__d("WAWebGroupSafetyCheckGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WAWebABProps").getABPropConfigValue("group_safety_check_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("is_group_chat_open_logging_enabled")}function c(){return d("WAWebABProps").getABPropConfigValue("is_part_of_gsc_experiment")}g.groupSafetyCheckM2Enabled=a;g.groupSafetyCheckLoggingEnabled=b;g.groupSafetyCheckIsPartOfExperiment=c}),98);
__d("WAWebHandleGroupNotificationConst",["WATimeUtils","WAWebABProps","WAWebApiParticipantStore","WAWebBackendApi","WAWebCommunityGatingUtils","WAWebDBGroupsGroupMetadata","WAWebGroupType","WAWebGroupsParticipantsApi","WAWebLidMigrationUtils","WAWebNoop","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=Object.freeze({REMOVE:"remove",ADD:"add",DEMOTE:"demote",DELETE:"delete",PROMOTE:"promote",MODIFY:"modify",CREATE:"create",SUBJECT:"subject",DESC:"description",LOCKED:"locked",UNLOCKED:"unlocked",ANNOUNCE:"announcement",NOT_ANNOUNCE:"not_announcement",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",FREQUENTLY_FORWARDED_OK:"frequently_forwarded_ok",INVITE:"invite",EPHEMERAL:"ephemeral",NOT_EPHEMERAL:"not_ephemeral",REVOKE_INVITE:"revoke",SUSPENDED:"suspended",UNSUSPENDED:"unsuspended",GROWTH_LOCKED:"growth_locked",GROWTH_UNLOCKED:"growth_unlocked",LINK:"link",UNLINK:"unlink",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",MEMBERSHIP_APPROVAL_REQUEST:"membership_approval_request",CREATED_MEMBERSHIP_REQUESTS:"created_membership_requests",REVOKED_MEMBERSHIP_REQUESTS:"revoked_membership_requests",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",NOT_ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"not_allow_non_admin_sub_group_creation",ALLOW_ADMIN_REPORTS:"allow_admin_reports",NOT_ALLOW_ADMIN_REPORTS:"not_allow_admin_reports",REPORTS:"reports",CREATED_SUBGROUP_SUGGESTION:"created_sub_group_suggestion",REVOKED_SUB_GROUP_SUGGESTIONS:"revoked_sub_group_suggestions",CHANGE_NUMBER:"change_number",MEMBER_ADD_MODE:"member_add_mode",AUTO_ADD_DISABLED:"auto_add_disabled",IS_CAPI_HOSTED_GROUP:"is_capi_hosted_group",GROUP_SAFETY_CHECK:"group_safety_check",LIMIT_SHARING_ENABLED:"limit_sharing_enabled",MISSING_PARTICIPANT_IDENTIFICATION:"missing_participant_identification"});function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return!!a&&a.growthLockType===b&&((b=a.growthLockExpiration)!=null?b:0)>d("WATimeUtils").unixTime()});return j.apply(this,arguments)}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REVOKE_INVITE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.SUSPEND||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROUP_SAFETY_CHECK)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION&&!d("WAWebCommunityGatingUtils").memberAddedGroupsM1Enabled())return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROWTH_UNLOCKED){if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED){if(b.type!=="invite")return!0;var e=(yield i(a.chatId,b.type));if(e)return!0}e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));return!e}if((b.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE)&&(yield m(a.chatId))===!0)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE){e=b.participants.length===1&&d("WAWebUserPrefsMeUser").isMeAccount(b.participants[0].id);if(!e)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE&&b.participants.length===1&&!d("WAWebUserPrefsMeUser").isMeAccount(b.participants[0].id)){e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(!e)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&b.participants.length===1&&c("WAWebWid").equals.apply(c("WAWebWid"),d("WAWebLidMigrationUtils").toCommonAddressingMode(a.author,b.participants[0].id))){e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));var f=d("WAWebUserPrefsMeUser").isMeAccount(a.author);if(!e||f)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION){e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(!e||b.isExistingGroup===!0&&!d("WAWebCommunityGatingUtils").memberSuggestedGroupsM3ReceiverEnabled())return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DELETE){f=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a.chatId));e=f!=null?d("WAWebGroupType").getGroupTypeFromGroupMetadata(f):null;if(b.reason===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT&&e===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return!1;else if(b.reason===d("WAWebGroupType").DELETE_REASON.DELETE_PARENT&&e===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return!0;return!0}if(b.actionType===(d("WAWebABProps").getABPropConfigValue("group_join_request_m3")?d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST:d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS))return!0;if(d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled")&&b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS){f=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(!f)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS&&b.skipGenMsg)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS&&b.shouldSkipGenMsg===!0)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.ADMIN_REPORT_RECIEVED&&b.shouldSkipGenMsg===!0)return!0;if((b.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.MODIFY)&&(yield m(a.chatId))===!0)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE){e=b.participants.every(function(a){a=a.id;return a.isLid()});f=a.isLidAddressingMode===!0;if(!f&&e)return!0}return!1});return k.apply(this,arguments)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebBackendApi").frontendSendAndReceive("notAlreadyInGroup",{groupId:a,participants:b});var c=new Set((a=(a=(yield d("WAWebGroupsParticipantsApi").getParticipants(a)))==null?void 0:a.participants)!=null?a:[]);return b.filter(function(a){a=a.id;return!c.has(String(a))})});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return Boolean(a==null?void 0:a.defaultSubgroup)});return n.apply(this,arguments)}function f(a){var b=a.author;a=a.authorPhoneNumber;return b!=null?{id:b,phoneNumber:a}:null}function o(a){var b;b=(b=a.participants)!=null?b:(b=a.groupInfo)==null?void 0:b.participants;var d=b!=null?[].concat(b):[];$$gen$m0:{b=a;if((typeof b==="object"&&b!==null||typeof b==="function")&&"actionType"in b&&b.actionType===h.CREATE&&(typeof b.groupInfo==="object"&&b.groupInfo!==null||typeof b.groupInfo==="function")&&"owner"in b.groupInfo&&"creatorPn"in b.groupInfo&&"subjectOwner"in b.groupInfo&&"subjectOwnerPn"in b.groupInfo){a=b.groupInfo.owner;var e=b.groupInfo.creatorPn,f=b.groupInfo.subjectOwner,g=b.groupInfo.subjectOwnerPn;a!=null&&d.push({id:a,phoneNumber:e});f!=null&&d.push({id:f,phoneNumber:g});break $$gen$m0}if((typeof b==="object"&&b!==null||typeof b==="function")&&"actionType"in b&&b.actionType===h.SUBJECT&&"s_o"in b&&"subjectOwnerPn"in b){a=b.s_o;e=b.subjectOwnerPn;a!=null&&e!=null&&d.push({id:a,phoneNumber:e});break $$gen$m0}if((typeof b==="object"&&b!==null||typeof b==="function")&&"actionType"in b&&b.actionType===h.CREATED_MEMBERSHIP_REQUESTS&&"requests"in b){f=b.requests;f.forEach(function(a){var b=a.wid;a=a.phoneNumber;a!=null&&d.push({id:b,phoneNumber:a})});break $$gen$m0}c("WAWebNoop")();break $$gen$m0}return d}g.GROUP_NOTIFICATION_TAG=h;g.shouldSkipGenMsg=a;g.notAlreadyInGroup=e;g.getIsCagById=m;g.getAuthorLidPnFieldsFromMeta=f;g.getMappingsFromAction=o}),98);
__d("WAWebPairList",["lodash"],(function(a,b,c,d,e,f,g){function a(a){return c("lodash").flatten(a.map(function(a){return[a[0],a[1]]}))}function b(a){if(a.length%2!==0)throw new RangeError("Flattened pairs come in 2, invalid list size to unflatten!");var b=[];for(var c=0;c<a.length;c++)b.push([a[c],a[++c]]);return b}g.flattenPairList=a;g.unFlattenPairList=b}),98);
__d("WAWebProfilePicConstants",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["Remove","Set"]);c="pps.whatsapp.net";f.ProfilePicCommand=a;f.DEFAULT_HOSTNAME=c}),66);
__d("WAWebGroupSystemMsg",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebApiParticipantStore","WAWebCommunityGatingUtils","WAWebContactSystemMsg","WAWebDBCommunity","WAWebDBGroupsGroupMetadata","WAWebGroupType","WAWebGroupUtils","WAWebGroupsParticipantsApi","WAWebHandleGroupNotificationConst","WAWebLimitSharingModelUtils","WAWebMsgKey","WAWebMsgType","WAWebPairList","WAWebProfilePicConstants","WAWebRequestMethodType","WAWebSchemaGroupMetadata","WAWebUserPrefsMeUser","WAWebViewMode.flow","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i,j,k,l;function m(a,b){var e,f=a.chatId;e=(e=(e=b.owner)!=null?e:a.author)!=null?e:d("WAWebUserPrefsMeUser").getMaybeMePnUser();var g=d("WAWebGroupUtils").amIGroupAdminGivenParticipants(b.participants),h=f,i=!1,j=b.subject,k,l;if(b.defaultSubgroup===!0){var m;k="community_create";b.parentGroup&&(l=[b.parentGroup,b.subject]);e=(m=b.owner)!=null?m:a.author}else if(b.generalSubgroup===!0&&g&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){k="general_chat_add";l=["created",b.subject];e=(m=b.owner)!=null?m:a.author}else{e=(g=b.owner)!=null?g:a.author;m=b.membershipApprovalMode===!0?"true":"false";g=b.hiddenSubgroup===!0?"true":"false";b.parentGroup&&b.participants.length===1?(l=[b.parentGroup,b.parentGroupSubject,b.subject,m,g],k="empty_subgroup_create"):k="create"}return{id:new(c("WAWebMsgKey"))({remote:h,fromMe:i,participant:e,id:H(a,k)}),author:e,body:j,from:f,recipients:[],subtype:k,t:(m=b.creation)!=null?m:a.ts,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,templateParams:l}}function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=c.participants.find(function(a){var b=a.isAdmin;a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)&&b});return(yield (l||(l=b("Promise"))).all([i(),j(),k(),n(),p()])).flat();function i(){return!e&&!g&&c.defaultSubgroup===!0&&c.incognito===!0?[d("WAWebContactSystemMsg").genNotificationMsg(c.id,{type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"cag_masked_thread_created",templateParams:[]})]:[]}function j(){return e?[]:[m(a,c)]}function k(){var b=c.ephemeralDuration;return a.author&&a.ts!=null&&b!=null&&b>0?[u(a.chatId,a.ts,a.author,b)]:[]}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(f==null)return[];d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[CAG system message] participantAddMsg: participant add message with actionType: ",""])),f.actionType);return[yield s({meta:a,action:f})]});return o.apply(this,arguments)}function p(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c.limitSharingEnabled===!0){var b=(yield d("WAWebLimitSharingModelUtils").genLimitSharingSystemMessageOnPersistedChat({chatWID:a.chatId,sharingLimited:c.limitSharingEnabled}));if(b)return[b]}return[]});return q.apply(this,arguments)}});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a.parentGroupId;if(!a)return!1;a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return!a||a!=null&&(yield d("WAWebDBCommunity").getJoinedSubgroups(d("WAWebWidFactory").createWid(a.id))).length<=b?!0:!1});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;if(a.actionType===d("WAWebGroupType").GROUP_ACTIONS.ADD||a.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE||a.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE||a.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE)c=a.participants.every(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a.id)});else return;if(Boolean(c))return;d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[CAG system message] logErrorIfSystemMessageIsUnexpectedForCAG: actionType: ",""])),a.actionType);c=(yield d("WAWebGroupsParticipantsApi").getParticipants(b));b=d("WAWebGroupUtils").amIGroupAdmin((a=c==null?void 0:c.admins)!=null?a:[]);b||d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["[CAG] received a CAG system message for a non-admin which should not have been created"]))).sendLogs("invalid-system-message-action-for-cag-non-admin",{sampling:.01})});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.meta,e=a.action;a=a.ts;var f=b.chatId,g=b.isAdmin;g=g===void 0?!1:g;var h=b.author&&d("WAWebWidFactory").asUserWidOrThrow(b.author)||void 0,i=f,j=!1,k=null,l=[],m=h,n=e.actionType,p=null,r,s=e.parentGroupId,t=(yield d("WAWebHandleGroupNotificationConst").getIsCagById(f));t&&(yield q(e,f));switch(e.actionType){case d("WAWebGroupType").GROUP_ACTIONS.SUBJECT:k=e.subject;break;case d("WAWebGroupType").GROUP_ACTIONS.MODIFY:l=e.participants.map(function(a){a=a.id;return a});break;case d("WAWebGroupType").GROUP_ACTIONS.ADD:if(e.reason===d("WAWebGroupType").ADD_REASON.INVITE)if(s&&e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)}))if(e.generalSubgroup===!0&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){n="general_chat_add";p=["linked_group_join",(t=e.groupName)!=null?t:""]}else if(e.defaultSubgroup===!0){n="community_invite_rich";p=[s,(t=e.groupName)!=null?t:""]}else{n="sub_group_invite_rich";t=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(s));p=[s,(t=t==null?void 0:t.subject)!=null?t:""]}else n="invite";else if(e.reason===d("WAWebGroupType").ADD_REASON.LINKED_GROUP_JOIN)if(e.generalSubgroup===!0&&s!=null&&e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){n="general_chat_add";p=["linked_group_join",(t=e.groupName)!=null?t:""]}else n="linked_group_join";else if(e.reason===d("WAWebGroupType").ADD_REASON.AUTO_ADD)if(s){p=[s,(t=e.groupName)!=null?t:"",(t=e.contextGroupId)!=null?t:""];n="subgroup_admin_triggered_auto_add"}else{n="auto_add";if(yield o(e,2)){p=[e.parentGroupId,(t=e.groupName)!=null?t:""]}}else if(e.reason===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_ADMIN_ADD)if(s){n="community_participant_add_rich";p=[s,(t=e.groupName)!=null?t:""]}else{n="default_sub_group_admin_add";if(yield o(e,1)){p=[e.parentGroupId,(t=e.groupName)!=null?t:""]}}else if(e.reason===d("WAWebGroupType").ADD_REASON.DEFAULT_SUBGROUP_PROMOTE)n="default_sub_group_promote";else if(e.reason===d("WAWebGroupType").ADD_REASON.INVITE_AUTO_ADD)if(s&&Boolean(e.defaultSubgroup)&&e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})){p=[s,(t=e.groupName)!=null?t:"",(t=e.contextGroupId)!=null?t:""];n="subgroup_admin_triggered_invite_auto_add"}else n="invite_auto_add",e.contextGroupId&&(p=[e.contextGroupId,""],(yield o(e,2))?p.push("false"):p.push("true"));else if(e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&e.reason===d("WAWebGroupType").ADD_REASON.GENERAL_CHAT_AUTO_ADD&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){n="general_chat_add";p=["general_chat_auto_add",(t=e.groupName)!=null?t:""]}else if(e.reason==null&&s&&e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})&&e.generalSubgroup===!0&&d("WAWebCommunityGatingUtils").communityGeneralChatUIEnabled()){n="general_chat_add";p=["",(t=e.groupName)!=null?t:""]}else if(s&&e.participants.some(function(a){a=a.id;return d("WAWebUserPrefsMeUser").isMeAccount(a)})){t=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(s));p=[s,(s=t==null?void 0:t.subject)!=null?s:""];n=e.defaultSubgroup===!0?"community_participant_add_rich":"sub_group_participant_add_rich"}case d("WAWebGroupType").GROUP_ACTIONS.PROMOTE:case d("WAWebGroupType").GROUP_ACTIONS.DEMOTE:case d("WAWebGroupType").GROUP_ACTIONS.REMOVE:case d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE:case d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE:if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&e.reason===d("WAWebGroupType").REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){n="default_sub_group_demote";break}l=e.participants.map(function(a){a=a.id;return a});l.length===1&&(m=l[0]);e.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&l.length===1&&h===m&&(n="leave");break;case d("WAWebGroupType").GROUP_ACTIONS.INVITE_CODE:n="revoke_invite";break;case d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD:n=e.isParentGroup===!0?"parent_group_description":"description";k=e.desc;break;case d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE:n=e.isParentGroup===!0?"parent_group_description":"description";break;case d("WAWebGroupType").GROUP_ACTIONS.RESTRICT:p=[e.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];k=p[0];e.threshold!=null&&p.push(e.threshold);break;case d("WAWebGroupType").GROUP_ACTIONS.ANNOUNCE:case d("WAWebGroupType").GROUP_ACTIONS.NO_FORWARD:p=[e.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];k=p[0];break;case d("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL:h&&(p=[""+e.duration,h]);break;case d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED:p=[e.type];k=p[0];break;case d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_LINK:case d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_LINK:case d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK:case d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK:p=d("WAWebPairList").flattenPairList(e.groupDatas.map(function(a){return[a.id,a.subject]}));break;case d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK:p=d("WAWebPairList").flattenPairList(e.groupDatas.map(function(a){return[a.id,a.subject]}));n="community_link_parent_group_rich";r="parentGroupLink";break;case d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP:p=[e.communityTitle];break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE:p=[e.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off,g?d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin:d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Regular];e.triggered==="server"&&(h=void 0);break;case d("WAWebGroupType").GROUP_ACTIONS.MEMBER_ADD_MODE:if(!d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled"))break;t=e.memberAddMode;t!=null&&(p=[t===d("WAWebSchemaGroupMetadata").MemberAddMode.ALL_MEMBER_ADD?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off]);break;case d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS:s=e.requests;e.requestMethod===d("WAWebRequestMethodType").RequestMethod.NonAdminAdd&&h!=null&&s.length>0?(p=[h.toJid()].concat(s.map(function(a){a=a.wid;return a.toJid()})),n="created_membership_requests"):n="membership_approval_request";break;case d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS:p=[e.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];g=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(b.chatId.toString()));p.push(g?d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Admin:d("WAWebGroupType").GroupSettingChangeSystemMessageIsAdmin.Regular);break;case d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:p=[e.value?d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.On:d("WAWebGroupType").GroupSettingChangeSystemMessageToggleEnabled.Off];break;case d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION:n="created_subgroup_suggestion";p=[e.subject];break;case d("WAWebGroupType").GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED:n="general_chat_auto_add_disabled";p=[d("WAWebGroupType").GeneralChatAutoAddDisabledReasonEnum.Full];break;case d("WAWebGroupType").GROUP_ACTIONS.COMMUNITY_OWNER_UPDATE:n="community_owner_update";p=[e.newOwner.toString()];l=[e.newOwner];break;case d("WAWebGroupType").GROUP_ACTIONS.HIDDEN_GROUP:n="hidden_group";break}return{id:new(c("WAWebMsgKey"))({remote:i,fromMe:j,participant:m,id:H(b,r)}),body:k?k:void 0,author:h,from:f,to:d("WAWebUserPrefsMeUser").getMePnUserOrThrow(),recipients:l.map(d("WAWebWidFactory").asUserWidOrThrow)||[],subtype:n,t:a!=null?a:b.ts,type:"gp2",viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE,kind:d("WAWebMsgType").MsgKind.Gp2,templateParams:p?p:void 0}});return t.apply(this,arguments)}function e(a,b,e,f){var g=!1;return{type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,subtype:"picture",viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE,t:e,author:f,body:b===d("WAWebProfilePicConstants").ProfilePicCommand.Set?"set":"remove",recipients:[],from:a,to:d("WAWebUserPrefsMeUser").getMePnUserOrThrow(),id:new(c("WAWebMsgKey"))({remote:a,fromMe:g,id:c("WAWebMsgKey").newId_DEPRECATED()})}}function u(a,b,e,f){return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,participant:e,id:c("WAWebMsgKey").newId_DEPRECATED()}),author:e,from:a,to:d("WAWebUserPrefsMeUser").getMePnUserOrThrow(),recipients:[],subtype:"ephemeral",t:b,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE,templateParams:[""+f]}}function f(a,b){return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,id:c("WAWebMsgKey").newId_DEPRECATED()}),from:a,to:d("WAWebUserPrefsMeUser").getMePnUserOrThrow(),recipients:[],subtype:"initial_pHash_mismatch",t:b,type:"gp2",kind:d("WAWebMsgType").MsgKind.Gp2,viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE}}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c,e=[],f=a.chatId,g=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(f));if(g==null||g.isParentGroup===!1)return e;var h=(yield d("WAWebDBCommunity").getDefaultSubgroup(f)),i=(c=g==null?void 0:g.subject)!=null?c:"",j=d("WATimeUtils").unixTime();h!=null&&(yield d("WAWebGroupsParticipantsApi").checkMyMembership(h))&&e.push(yield s({meta:{chatId:h,author:a.author,ts:j},action:{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP,communityTitle:i}}));yield (l||(l=b("Promise"))).all(((c=(yield d("WAWebDBCommunity").getJoinedSubgroups(d("WAWebWidFactory").createWid(g.id))))!=null?c:[]).filter(function(a){return!(h!=null&&h.equals(a))}).map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){e.push(yield s({meta:{chatId:b,author:a.author,ts:j},action:{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP,communityTitle:i}})),e.push(yield s({meta:{chatId:b,author:a.author,ts:j},action:{actionType:d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK,groupDatas:[{id:f,subject:i}]}}))});return function(a){return c.apply(this,arguments)}}()));return e});return w.apply(this,arguments)}function x(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=[],f=a.chatId,g=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(f));if(g==null){d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["genIntegrityDelteteParentNotificationMsgs: missing parentGroupMetadata"])));return[]}var h=(yield d("WAWebDBCommunity").getDefaultSubgroup(f));if(h!=null&&(yield d("WAWebGroupsParticipantsApi").checkMyMembership(h))){e.push(yield s({meta:{chatId:h,author:void 0,ts:d("WATimeUtils").unixTime()},action:{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE,reason:d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT,groupDatas:[{id:f,subject:(c=g==null?void 0:g.subject)!=null?c:""}]}}))}yield (l||(l=b("Promise"))).all(((a=(yield d("WAWebDBCommunity").getJoinedSubgroups(f)))!=null?a:[]).filter(function(a){return!(h!=null&&h.equals(a))}).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return e.push(yield s({meta:{chatId:a,author:void 0,ts:d("WATimeUtils").unixTime()},action:{actionType:d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK,groupDatas:[{id:f,subject:(a=g==null?void 0:g.subject)!=null?a:""}]}}))});return function(b){return a.apply(this,arguments)}}()));return e});return y.apply(this,arguments)}function z(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId,e=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(c));if((e==null?void 0:e.isParentGroup)===!0){e=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(e&&(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE))return s({meta:babelHelpers["extends"]({},a,{chatId:e}),action:babelHelpers["extends"]({},b,{isParentGroup:!0})})}return s({meta:a,action:b})});return A.apply(this,arguments)}function B(a,b){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId;c=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(!c)return;var e=(yield d("WAWebGroupsParticipantsApi").getParticipants(c));e=Boolean(e==null?void 0:e.participants.find(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createWid(a))}));if(!e)return;return s({meta:babelHelpers["extends"]({},a,{chatId:c}),action:b})});return C.apply(this,arguments)}function D(a,b){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId;c=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(!(c&&b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION))return;return s({meta:babelHelpers["extends"]({},a,{chatId:c}),action:b})});return E.apply(this,arguments)}function F(a,b){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.chatId;c=(yield d("WAWebDBCommunity").getDefaultSubgroup(c));if(!c)return;var e=(yield d("WAWebGroupsParticipantsApi").getParticipants(c));e=Boolean(e==null?void 0:e.participants.find(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").createWid(a))}));if(!e)return;return s({meta:babelHelpers["extends"]({},a,{chatId:c}),action:b})});return G.apply(this,arguments)}function H(a,b){var d;d=(d=a.externalId)!=null?d:c("WAWebMsgKey").newId_DEPRECATED();b!=null&&(d=""+d+b);return""+d+((b=a.ts)!=null?b:"")}g.genMsgsForGroupCreation=a;g.genGroupNotificationMsg=s;g.genGroupPicChangeNotificationMsg=e;g.genInitialPhashMismatchMsg=f;g.generateDeleteParentNotificationMessages=v;g.genIntegrityDeleteParentNotificationMsgs=x;g.genDescriptionNotificationMsg=z;g.genAllowNonAdminSubGroupCreationNotificationMsg=B;g.genCreatedSubgroupSuggestionNotificationMsg=D;g.genCommunityOwnerUpdateNotificationMsg=F}),98);
__d("WAWebGroupUnjoinedSubgroupJob",["WAJobOrchestratorTypes","WAWebApiUnjoinedSubgroupMetadataStore","WAWebOrchestratorNonPersistedJob"],(function(a,b,c,d,e,f,g){function a(a,b,c){c===void 0&&(c=!0);return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateUnjoinedSubgroups",function(a){return d("WAWebApiUnjoinedSubgroupMetadataStore").updateUnjoinedSubgroups(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({unjoinedSubgroups:a,parentGroupId:b,link:c})}function b(a,b){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("cleanUnjoinedSubgroups",function(a){return d("WAWebApiUnjoinedSubgroupMetadataStore").cleanUnjoinedSubgroups(a)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({unjoinedSubgroupIds:a,parentGroupId:b})}g.updateUnjoinedSubgroupsJob=a;g.cleanUnjoinedSubgroupsJob=b}),98);
__d("WAWebHandlePushnameUpdate",["WALogger","WAWebBackendApi","WAWebDBBulkPersistContact","WAWebPromiseQueue","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new(d("WAWebPromiseQueue").PromiseQueue)();function j(a,b){return d("WAWebBackendApi").frontendSendAndReceive("updatePushname",{contactId:a,pushname:b})}function a(a,c,e){e===void 0&&(e=!1);var f=d("WAWebWidFactory").asUserWidOrThrow(a);return i.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=void 0;e||(a=(yield j(f,c)));(a===!0||a===void 0)&&(d("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["updatePushName: set pushname for ",""])),f.toLogString()),void d("WAWebDBBulkPersistContact").persistContactUpdateBatched(f,{pushname:c}))}))}g.updatePushname=a}),98);
__d("WAWebLidMappingUsernameLearnUtils",["WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebGroupType","WAWebHandleGroupNotificationConst","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),c=d("WAWebUsernameGatingUtils").lidGroupMigrationNonMemberIQEnabled(),e=[],f=[];a.forEach(function(a){var g;(g=a.participants)==null||g.forEach(function(a){var c=a.id,g=a.lid,h=a.phoneNumber,i=a.displayName;a=a.username;e.push({id:d("WAWebWidFactory").asUserWidOrThrow(c),lid:g?d("WAWebWidFactory").asUserWidOrThrow(g):null,phoneNumber:h?d("WAWebWidFactory").asUserWidOrThrow(h):null,displayName:i});b&&a!=null&&f.push({userId:d("WAWebWidFactory").asUserWidOrThrow(c),username:a})});if(c){a.subjectOwner&&e.push({id:a.subjectOwner,lid:a.subjectOwner.isLid()?a.subjectOwner:null,phoneNumber:a.subjectOwnerPn});if(a.owner){e.push({id:a.owner,lid:(g=a.owner)!=null&&g.isLid()?a.owner:null,phoneNumber:a.creatorPn})}if(a.descOwner){e.push({id:a.descOwner,lid:(g=a.descOwner)!=null&&g.isLid()?a.descOwner:null,phoneNumber:a.descOwnerPn})}}if(b){if(a.owner){g=d("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:d("WAWebWidFactory").asUserWidOrThrow(a.owner),username:a.creatorUsername,usernameCountryCode:a.creatorCountryCode});g&&f.push(g)}a.subjectOwner&&a.subjectOwnerUsername!=null&&f.push({username:a.subjectOwnerUsername,userId:d("WAWebWidFactory").asUserWidOrThrow(a.subjectOwner)});a.descOwner&&a.descOwnerUsername!=null&&f.push({username:a.descOwnerUsername,userId:d("WAWebWidFactory").asUserWidOrThrow(a.descOwner)})}});yield d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappingsInBatches(e,!0);b&&f.length>0&&(yield d("WAWebSetUsernameJob").setUsernamesJob(f))});return h.apply(this,arguments)}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.notification;a=a.flushImmediately;var c=d("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),e=[],f=[];b.actions.forEach(function(a){var b=d("WAWebHandleGroupNotificationConst").getMappingsFromAction(a);e.push.apply(e,b);if(c){b=(b=a.participants)!=null?b:(b=a.groupInfo)==null?void 0:b.participants;b==null||b.forEach(function(a){var b=a.id;a=a.username;a!=null&&f.push({userId:d("WAWebWidFactory").asUserWidOrThrow(b),username:a})});if(a.groupInfo){b=a.groupInfo;var g=b.owner,h=b.creatorUsername,i=b.creatorCountryCode,j=b.subjectOwner;b=b.subjectOwnerUsername;if(g!=null){g=d("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:d("WAWebWidFactory").asUserWidOrThrow(g),username:h,usernameCountryCode:i});g&&f.push(g)}j!=null&&b!=null&&f.push({username:b,userId:d("WAWebWidFactory").asUserWidOrThrow(j)})}if(a.actionType===d("WAWebGroupType").GROUP_ACTIONS.SUBJECT){h=a.s_o;i=a.subjectOwnerUsername;h!=null&&i!=null&&f.push({username:i,userId:d("WAWebWidFactory").asUserWidOrThrow(h)})}else a.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS&&a.requests.forEach(function(a){var b=a.wid;a=a.username;a!=null&&f.push({username:a,userId:d("WAWebWidFactory").asUserWidOrThrow(b)})})}});var g=d("WAWebHandleGroupNotificationConst").getAuthorLidPnFieldsFromMeta(b);g!=null&&e.push(g);if(c){g=b.author;var h=b.authorUsername;b=b.authorUsernameCountryCode;if(g!=null){g=d("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:d("WAWebWidFactory").asUserWidOrThrow(g),username:h,usernameCountryCode:b});g&&f.push(g)}}yield d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappingsInBatches(e,a);c&&f.length>0&&(yield d("WAWebSetUsernameJob").setUsernamesJob(f))});return i.apply(this,arguments)}g.processParsedGroupInfosForLidMappingAndUsernames=a;g.processParsedGroupNotificationForLidMappingAndUsernames=c}),98);
__d("errorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){throw new Error('errorCode("'+a+'"): This should not happen. Oh noes!')}f["default"]=a}),66);
__d("WAWebMaybeThrowCatalogErrors",["errorCode","$InternalEnum","WALogger","WAWebBackendErrors"],(function(a,b,c,d,e,f,g,h){var i,j,k=b("$InternalEnum").Mirrored(["GET_PRODUCT_CATALOG_OWNER_GRAPHQL"]);function a(a,b){var c=a.source.errors||[];c=c[0];c=c==null?void 0:c.code;if(c==null)return;d("WALogger").ERROR(i||(i=babelHelpers.taggedTemplateLiteralLoose(["maybeThrowLocalErrorForCatalogQuery: error code ",""])),c);if(b===k.GET_PRODUCT_CATALOG_OWNER_GRAPHQL&&c===2498052)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(404,a.message);switch(c){case 2498052:case 2498049:case 2498050:case 2498051:case 2498053:case 2498056:throw new(d("WAWebBackendErrors").ServerStatusCodeError)(400,a.message);case 2498048:throw new(d("WAWebBackendErrors").E451)();case 2498054:throw new(d("WAWebBackendErrors").ServerStatusCodeError)(421);case 2498103:case 2498102:throw new(d("WAWebBackendErrors").CollectionReorderError)()}d("WALogger").WARN(j||(j=babelHelpers.taggedTemplateLiteralLoose(["maybeThrowLocalErrorForCatalogQuery: unknown error code ",""])),c)}g.ErrorSourceForCatalogQuery=k;g.maybeThrowLocalErrorForCatalogQuery=a}),98);
__d("WAWebMexFetchSubgroupSuggestionsJobQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"group_id"},b={defaultValue:null,kind:"LocalArgument",name:"query_context"},c={defaultValue:null,kind:"LocalArgument",name:"sub_group_hint_id"},d=[{fields:[{kind:"Variable",name:"group_id",variableName:"group_id"},{kind:"Variable",name:"query_context",variableName:"query_context"},{kind:"Variable",name:"sub_group_hint",variableName:"sub_group_hint_id"}],kind:"ObjectValue",name:"group_input"}],e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},g=[f],h={alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:g,storageKey:null},i={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[e],storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"total_participants_count",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"is_existing_group",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"hidden_group",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c],kind:"Fragment",metadata:null,name:"WAWebMexFetchSubgroupSuggestionsJobQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[e,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionConnection",kind:"LinkedField",name:"sub_group_suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestion",kind:"LinkedField",name:"node",plural:!1,selections:[e,h,{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:g,storageKey:null},i,j,k,l,m],storageKey:null}],storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,b],kind:"Operation",name:"WAWebMexFetchSubgroupSuggestionsJobQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionConnection",kind:"LinkedField",name:"sub_group_suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestion",kind:"LinkedField",name:"node",plural:!1,selections:[e,h,{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[f,e],storageKey:null},i,j,k,l,m],storageKey:null}],storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null}],storageKey:null}]},params:{id:"23972005349071865",metadata:{},name:"WAWebMexFetchSubgroupSuggestionsJobQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebMexFetchSubgroupSuggestionsJob",["Promise","WALogger","WAWebBackendErrors","WAWebMexClient","WAWebMexFetchSubgroupSuggestionsJobQuery.graphql","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i,j,k=h!==void 0?h:h=b("WAWebMexFetchSubgroupSuggestionsJobQuery.graphql");function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e={group_id:a.toString(),query_context:e,sub_group_hint_id:c.toString()};try{c=(yield d("WAWebMexClient").fetchQuery(k,e));e=(e=c.xwa2_group_query_by_id)==null||(e=e.sub_group_suggestions)==null?void 0:e.edges;if(e==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing edges in response");e=e.map(function(b){b=b.node;if(b!=null)return m(a,b);throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"null node in sub_group_suggestions")});d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["[MEX][COMMUNITY] Fetched subgroup suggestions for ",""])),a.toString()).tags("GQL","MEX").devConsole({result:c});return e}catch(a){return a instanceof d("WAWebBackendErrors").ServerStatusCodeError?(j||(j=b("Promise"))).reject(a):(j||(j=b("Promise"))).reject(new(d("WAWebBackendErrors").ServerStatusCodeError)(Number(a.code),a.message))}});return l.apply(this,arguments)}function m(a,b){var e,f,g;if(b.is_existing_group==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing is_existing_group in response");else g=b.is_existing_group;if(b.id==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing id in response");else e=new(c("WAWebWid"))(b.id,{intentionallyUsePrivateConstructor:!0});if(b.creator.id==null)throw new(d("WAWebBackendErrors").ServerStatusCodeError)(500,"missing creator.id in response");else f=new(c("WAWebWid"))(b.creator.id,{intentionallyUsePrivateConstructor:!0});return{id:e,parentGroupId:a,subject:(a=(e=b.subject)==null?void 0:e.value)!=null?a:"",desc:(e=b.description)==null?void 0:e.value,owner:f,t:parseInt(b.creation_time,10),isExistingGroup:g,participantCount:b.total_participants_count,hiddenSubgroup:b.hidden_group}}g.mexFetchSubgroupSuggestions=a}),98);
__d("WAWebProductMessageListConstant",[],(function(a,b,c,d,e,f){a="DELETED";f.INVALID_PRODUCT_TOKEN=a}),66);
__d("WAWebQueryAndUpdateSubgroupSuggestionsJob",["WAWebApiSubgroupSuggestionStore","WAWebBackendApi","WAWebCommunityGatingUtils","WAWebDBCommunity","WAWebMexFetchSubgroupSuggestionsJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("WAWebMexFetchSubgroupSuggestionsJob").mexFetchSubgroupSuggestions(a,b,"INTERACTIVE"));b=(yield d("WAWebApiSubgroupSuggestionStore").getSubgroupSuggestions(a));b=b.filter(function(a){return!c.some(function(b){return b.id.equals(a.id)&&b.owner.equals(a.owner)})});yield d("WAWebApiSubgroupSuggestionStore").removeSubgroupSuggestions(b.map(function(b){var c=b.id;b=b.owner;return{parentGroupId:a,id:c,owner:b}}));yield d("WAWebApiSubgroupSuggestionStore").addSubgroupSuggestions(a,c);d("WAWebBackendApi").frontendFireAndForget("createOrUpdateSubgroupSuggestions",{parentGroupId:a,subgroupSuggestions:c})});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.isParentGroup===!0&&a.allowNonAdminSubGroupCreation===!1&&a.participants.some(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a.id)&&a.isAdmin})&&d("WAWebCommunityGatingUtils").memberSuggestedGroupsEnabled()){var b=(yield d("WAWebDBCommunity").getJoinedSubgroups(a.id));if(b.length)return h(a.id,b[0])}});return j.apply(this,arguments)}g.queryAndUpdateSubgroupSuggestions=h;g.maybeQueryAndUpdateSubgroupSuggestions=a}),98);
__d("WAWebUserPrefsModelStorage",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function a(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.INITIAL_GROUP_PHASH,JSON.stringify(a))}function b(a){var b;return(b=h())==null?void 0:b[a]}function h(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.INITIAL_GROUP_PHASH);if(typeof a!=="string")return null;try{return JSON.parse(a)}catch(a){return null}}g.setInitialGroupPhash=a;g.getInitialGroupPhash=b;g.getInitialGroupPhashMap=h}),98);
__d("WAWebQueryAndUpdateGroupMetadataJob",["Promise","WALogger","WAPromiseEach","WATimeUtils","WAWebApiChat","WAWebApiParticipantStore","WAWebBackendApi","WAWebChatConstants","WAWebGroupDatabaseJob","WAWebGroupQueryJob","WAWebGroupSystemMsg","WAWebHandleSingleMsg","WAWebLidMappingUsernameLearnUtils","WAWebPhashUtils","WAWebQueryAndUpdateSubgroupSuggestionsJob","WAWebSchemaChat","WAWebUserPrefsModelStorage","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i,j,k,l,m=5e4;function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.dirtyGroupJids;a=a.isHistorySyncInProgress;b!=null?b=(yield d("WAWebGroupQueryJob").queryGroupsById(b,"per_group_dirty_recovery")):b=(yield d("WAWebGroupQueryJob").queryAllGroups());if(b==null||b.length===0)return;var c=[],e=[];b.forEach(function(a){a.truncated?e.push(a):c.push(a)});yield q(c,a);yield o(e,a)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(a.length===0)return;var e=[[]],f=0;a.forEach(function(a){var b=d("WAWebWidToJid").widToGroupJid(d("WAWebWidFactory").createWid(a.id+"@g.us"));a=a.size;f+a>m&&f>0&&(e.push([]),f=0);e[e.length-1].push(b);f+=a});yield d("WAPromiseEach").promiseEach(e,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebGroupQueryJob").queryGroupsById(a,"get_participating_groups_paginated"));a&&(yield q(a,c))}catch(a){d("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[group-info] failed to query batch group info for truncated group"]))).sendLogs("failed-to-query-batch-group-info")}});return function(b){return a.apply(this,arguments)}}())});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(a.length===0)return;a=(yield d("WAWebApiParticipantStore").injectPastParticipantsFromDB(a));a=(yield d("WAWebApiChat").injectAdditionalEphemeralInfoFromDB(a));var e=[],f=[];a.forEach(function(a){d("WAWebBackendApi").frontendFireAndForget("createOrUpdateGroupMetadataFromQuery",{groupInfo:a}),c&&void u(a),e.push(d("WAWebGroupQueryJob").maybeQueryAndUpdateMembershipApprovalRequests(a))});yield d("WAWebLidMappingUsernameLearnUtils").processParsedGroupInfosForLidMappingAndUsernames(a);yield d("WAWebGroupDatabaseJob").updateGroupMetadataTableJob(a);yield d("WAWebGroupDatabaseJob").updateGroupParticipantTableWithoutDeviceSyncJob(a);c&&(yield s(a));a.forEach(function(a){f.push(d("WAWebQueryAndUpdateSubgroupSuggestionsJob").maybeQueryAndUpdateSubgroupSuggestions(a))});yield (l||(l=b("Promise"))).all(e)});return r.apply(this,arguments)}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["Start updateGroupEndOfHistorySyncFlag"]))).tags("history-sync","groups");var b=d("WAWebUserPrefsModelStorage").getInitialGroupPhashMap(),c=[];for(a of a){var e=(yield d("WAWebApiChat").getChatRecord(a.id));if(e)continue;e=b==null?void 0:b[a.id.toString()];if(e!=null)continue;c.push({unreadCount:0,muteExpiration:0,isAutoMuted:!1,id:a.id,endOfHistoryTransferType:d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.NOT_INCLUDED_IN_HIST_SYNC})}yield d("WAWebBackendApi").frontendSendAndReceive("chatCollectionAdd",{things:c,options:{merge:!0}});yield d("WAWebSchemaChat").getChatTable().bulkCreate(c.map(function(a){var b=a.endOfHistoryTransferType;a=a.id;b={endOfHistoryTransferType:b,id:a.toString(),unreadCount:0,muteExpiration:0,isAutoMuted:!1};return b}))["catch"](function(a){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["One ore more chat create failed for group not synced in initial sync with error: "," "])),a.message).tags("history-sync","groups")});d("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Completed updateGroupEndOfHistorySyncFlag"]))).tags("history-sync","groups")});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsModelStorage").getInitialGroupPhash(a.id.toString());if(b==null)return;var c=(yield d("WAWebPhashUtils").phashV1(a.participants.map(function(a){return a.id}))),e=c.substring(2);b!=null&&b!==c&&b!==e&&a.defaultSubgroup!==!0&&d("WAWebHandleSingleMsg").handleSingleMsg({chatId:a.id,newMsg:d("WAWebGroupSystemMsg").genInitialPhashMismatchMsg(a.id,d("WATimeUtils").unixTime()),handleSingleMsgOrigin:"pHashMismatchMsg"})});return v.apply(this,arguments)}g.queryAndUpdateAllGroupMetadata=a}),98);
__d("vulture",["ExecutionEnvironment","FBLogger","JSResource","VultureJSGating","asyncToGeneratorRuntime","clearTimeout","objectEntries","requireDeferred","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=0,j=-1,k=1e4,l=null;c("requireDeferred")("bumpVultureJSHash").__setRef("vulture").onReadyImmediately(function(a){l=a,v()});var m=!1,n=!1,o=null,p=new Map(),q=[],r=12e4;function s(a){var b=p.get(a);if(b===i||l==null)return;b==null?l(a,1):b===j?(l(a,1),d("VultureJSGating").isLowVolumeLoggingEnabled()&&c("FBLogger")("vulture_js","low_volume_"+a).addToCategoryKey(a).addMetadata("VULTURE_JS","LOW_VOLUME_HASH",a).warn("Low volume vulture with hash %s hit",a)):Math.floor(Math.random()*b)===0&&l(a,b)}function t(a){q.push(a)}function u(){o!=null&&(c("clearTimeout")(o),o=null),n=!1,m=!0,v()}function v(){if(m&&l!=null)while(q.length>0){var a=q.pop();a!=null&&s(a)}}function w(){c("JSResource")("VultureJSSampleRatesLoader").__setRef("vulture").load().then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a.loadSampleRates());for(a of c("objectEntries")(a)){var b=a[0],d=a[1];p.set(b,d)}});return function(b){return a.apply(this,arguments)}}())["catch"](function(a){c("FBLogger")("vulture_js","sample_rate_load_timeout").catching(a).mustfix("Failed to fetch sample rates:  %s",a.getMessage())})["finally"](u)}function x(){if(n)return;n=!0;(h||(h=c("ExecutionEnvironment"))).canUseDOM?(o=c("setTimeout")(function(){u(),c("FBLogger")("vulture_js","sample_rate_load_timeout").warn("Timed out attemping to fetch VultureJS sample rates")},r),c("setTimeout")(w,k)):w()}function a(a){d("VultureJSGating").isLoggingEnabled()&&(m&&l!=null?s(a):(t(a),x()))}g["default"]=a}),98);